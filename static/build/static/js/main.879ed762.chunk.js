(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{158:function(e,t,n){},159:function(e,t,n){},206:function(e,t){e.exports=function(e){return e>1e6?(e=(e=e.toString()).slice(0,-6),e+="m"):e>1e3&&(e=(e=e.toString()).slice(0,-3),e+="k"),e}},237:function(e,t){},239:function(e,t){},250:function(e,t){},252:function(e,t){},357:function(e,t,n){"use strict";n.r(t);var a=n(35),r=n(0),c=n.n(r),o=n(28),l=n.n(o),i=(n(158),n(2)),s=n(3),m=n.n(s),u=n(5),d=n(4),p=(n(159),n(160),n(20)),f=n(1);function b(e){return{type:"TOGGLE_CREATE",payload:e}}function g(e){return{type:"TOGGLE_SIDEBAR",payload:e}}function h(e){return{type:"SIGN_IN",payload:e}}function x(e){return{type:"SIGN_OUT",payload:e}}function v(e){return{type:"SET_FILES",payload:e}}function E(e){return{type:"ADD_FILE",payload:e}}function y(e){return{type:"CLEAR_FILE",payload:e}}function w(e){return{type:"TOGGLE_FOCUS_VIEW",payload:e}}function j(e){return{type:"TOGGLE_THEME",payload:e}}function O(e){return{type:"TOGGLE_SIGN_UP_OVERLAY",payload:e}}function k(e){return{type:"SET_SEARCH",payload:e}}function N(e){return{type:"SET_DESCRIPTION",payload:e}}var _,S,C,T,A=n(10),I="production"==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MODE?"":"http://localhost:8888";var D=Object(f.c)(_||(_=Object(i.a)(["\n  from{\n    opacity:0;\n    transform: scale(.5)\n  }\n  to{\n    opacity:1;\n    transform: scale(1);\n  }\n"]))),z=f.b.div(S||(S=Object(i.a)(["\n  opacity: 0;\n  transform: scale(.5);\n  animation: "," .1s cubic-bezier(0.68, -0.6, 0.32, 1.6) forwards;\n  color: ",";\n  .overlay-bg{\n    background: ",";\n  }\n"])),D,(function(e){return e.theme.text}),(function(e){return e.theme.background_1})),F=f.b.a(C||(C=Object(i.a)(["\n  margin: 0 6px;\n  padding: 8px 16px;\n  border-radius: 8px;\n  background: ",";\n  \n  :hover {\n    opacity: .4;\n  }\n"])),(function(e){return e.theme.background_3})),P=f.b.div(T||(T=Object(i.a)(["\n"]))),R={toggleFocusView:w};var U,L,B,M,H,G=Object(A.b)((function(e){return{focusPath:e.app_state_reducer.focusPath,focusGallery:e.app_state_reducer.focusGallery}}),R)((function(e){function t(t){27===t.keyCode&&e.toggleFocusView()}return console.log(e),Object(r.useEffect)((function(){return document.addEventListener("keydown",t),document.body.classList.add("noscroll"),function(){document.body.classList.remove("noscroll"),document.removeEventListener("keydown",t)}}),[]),c.a.createElement(z,{className:"fixed top-0 left-0 right-0 bottom-0",style:{zIndex:2e3}},c.a.createElement("div",{id:"overlay-bg",className:"overlay-bg absolute top-0 left-0 right-0 bottom-0 ",onClick:function(t){return e.toggleFocusView()},style:{zIndex:1}}),c.a.createElement(P,{id:"overlay-content",className:"overlay absolute top-0 left-0 right-0 bottom-0 flex flex-col justify-center items-center p-16"},c.a.createElement("div",{className:"image-container mx-24 relative  h-full flex flex-col justify-center items-center",style:{zIndex:2}},c.a.createElement("div",{id:"focus-click-overlay",className:"fixed top-0 left-0 right-0 w-screen h-screen overlay z-10",onClick:function(t){return e.toggleFocusView()},style:{opacity:.8,cursor:"pointer"}}),c.a.createElement("div",{className:"my-32 relative z-20 ",style:{maxHeight:"100%"}},c.a.createElement("img",{src:e.focusPath,alt:"",onClick:function(t){return e.toggleFocusView()},className:"object-contain block w-full h-full",style:{cursor:"zoom-out",objectFit:"contain",maxHeight:"100%",maxWidth:"100%"}}),c.a.createElement("div",{className:"focus-action-wrapper pt-4 flex flex-row mx-auto justify-center"},c.a.createElement(F,{href:"".concat(e.focusPath),title:"Direct Link",className:"mx-4 block"},c.a.createElement("div",{className:"h-full flex flex-row items-center justify-center px-4 text-sm font-bold",style:{}},"View Full Res")),c.a.createElement(F,{href:"",className:"block",id:"image-focus-copy-direct-link",onClick:function(t){return function(t){t.preventDefault();var n=e.focusPath,a=document.createElement("input");document.body.appendChild(a),a.value=n,a.select(),document.execCommand("copy"),Object(p.b)("Link copied to clipboard.",{position:"bottom-right"}),document.body.removeChild(a)}(t)}},c.a.createElement("div",{className:"h-full flex flex-row items-center justify-center px-4 text-sm font-bold",style:{}},"Copy Direct Link")),c.a.createElement(F,{href:"".concat(I,"/api/beam/").concat(e.focusGallery,"/download"),className:"mx-4 block",download:!0,title:"Download"},c.a.createElement("div",null,c.a.createElement("i",{className:"fas fa-cloud-download-alt  mx-4"}))))))))})),W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAScAAABGCAYAAACOhVIKAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABJ6ADAAQAAAABAAAARgAAAAB1NCq0AAATtUlEQVR4Ae2dB9QdRRXHTRBCKEmkt5AQpAia0EE6KE0EQYqH0EQUxIAIKCqoYJCjBgSVIgIRFBFBDAFBooGAIl1MKEdqSCGGAAYCgVAkib//l7fvzNu3ZWbe7mvf3HP+387O3Hvn7p2ZuzOzu+/r8wGDFi9e/HFO9wAfBYNAP/AqmAPuAhP69OnzBsdAbe4B2nJfTNwTRG25POk+BZj9PjpeAS+BWWCSQL94m2Og4IFiPUBHXhqMA3n0IgwKXoHa1AO0T39wF2gmLaCyG8GmbeqWYFaneoBO9TWHnvwqvKt16rV2u920zbcd2rJo1vdReCVYtdv9HK6vSR6gM/3LsZce1STTQjWOHqAdn3RsyzLYp6E0zKIc2y6w13qgL51IexGb12bnnm2cyxEYmu4B2nJFKm2HthmKHfdizyea7oRQYdd4oC9XMsDjajQIArWfB9qpXQbinvEEqBHt56ZgUSd4QMHpgx6GLuchE0TK94BPW5Zp1Qoov4UAtXqZlQTd3ekBBSefx8uSCxQ8YOOBdWG6yoYx8AQPmB4IQcb0RkiX5YF9wv5TWa7tXr0hOHVv27bblY0hQPnM0tvtOoI9TfJACE5NcnSo5gNb4IOtgh+CB2w9EIKTracCXxEe+HQRSoKO3uGBdnu60zu83l5XuQBz5lmYpCWZvrfsb8GbxqLgdFZaYcgPHjA9EIKT6Y3emb6Bj3aPsb109o30Xtze4Eww3FauwreJI39g78UeCMGpzRu/somsGct7YAGBZHErTa78KsUN2KVfqXgcuLzDtCxyA9HxeiPXgI6lkd8GaB9L3/GtUjnq/buXgX5FI8JD1DeN80Ad5oFCgxOdRnfg7cGG4MNAA0qd5EWgn9a4go7yLscaQk6dSrIHA8mtAfSTHDMruJXjjci+w9GK0LkUjAeAkWAjMAwsBLPBC+B2IJ0zOBZO1N8HpTuCg8AGYDDQdWkJJZ/cB24CGjw1AQdZfVh9CjgUrA300zUiihbLJ/eCU5DTQGwJUfcr2PJ3Kj/E0QD5wDk4UZcCtL7p1M/A7AL0gqcVIftPGG8UsHuqlZAjE3UoQKr/6lOwdYDaW+2qfvwMUB++i/qT+r/4R4EdgNJ6u/4tMB88Ce4GVyKb2P+puzvHHRe2LnClq3BWlRBeHlxvoWQWPBqoVeL8UDDXQla/hvBTkPm5DeV9wJfBC8CGboZpvapBDSbQpZ8s+R6YCWxIH13vG1VLeiUwDeSR9Nd8GsJ5w20Z2WFzpL4L84xMKB9iozviQX5lcA6Yl6DLJ+sahFaK9Dd6RNee4DbwP5BHL8PwLaCbcQ+R/iR4F+TRozDUBGTOu3vccYENd2h0qPPYku4gUcP8wFbI4HuadOIX7+RvAP5h8Nom9XtEX4vs8j2iQy8bPm9baYxPPzWyFLgolp91+hfTVhgbbktTX16a+i7LMi6h7G3y+ubpVTl8usl8HcwHRdMcFB5oY0caD/JrAy1vfUh9+CNgRfCGg4JTTXuQ6+5xxwU23KHRMcPBwWJdDnzTUcZkf5OTvWINtRt5ml01Qj8yddqmqVBBxXWgJtmpmeFzSQUpefr9pJUjO0k33JaRLpsj9f0txa607Mcs9Q5CgWa0ZdP5NvbEeTDqYOASVJKuQzPfk5IKMvIeMG2Br7vHHRfYUIdGXh3JlXRHXOgqFOPXUlDfbekuuy3QXbkI+qHZAfLSVKhN3vFFVOypQ5vCPYR8Q20Z6ck7Uo+WE+d52Kt9n0xC53DwvIduX5GvZhoUK6SSE0GjfTeydVGUsDxW95zg7/pxZzXFjrVP/LS6fo4XZJyPoazRurVvcB2NNIzjzWBZUASdjk5tTOYSfPotrIngM7nM5TEUdd2JFnKNO4Ex4BowEUyHURu1X08UyM6cklWMbu1Haala2B5gVn2VMu2bWbUffD9A5iLQaN+NzNJDExfqhw160CPq+nFXxNM6Hx2ujbKkOer/6sngo6Bmo7CezSlHHe9XdIIRaU9HDG1jSeuJXCsp6qyF2lAZBH9F6e4FKdbLnpen6aI+PY3TE1Q9zWsmqb1/R/0b0956iptIlJ9AwZmJhc3N1HhbCLp+3BV1B2hu89TWVmRgijRvSOKI6CTpSGf9BvmfSyrrkjwtd4oKTHLJZQz+l5N8gy91sxoHPpJU3oQ8zUJqNpvNOrFPM+mfmXktTBd1Y2/0Ekofd90QnBp1cpq83qlJpEpnddqbSlTU3pnV1xsKMPNtdJyXoedwynbLKG9G0ZdoV20V1BB5q5OhvTK9+BmofA9Ux10ITunO3pGOOSyl+HzyS1lOpdTXiuyhBVb6e2ZNc5L04eNlyD8nqazJedo/PDGhzrPJa/ZSM8GMXpNVHXchOKW3uabPde/CMJj2J3+7dLGuKdFnIUXRZ/Db2inKvkL+0JQy22ztZ90HxoPJQDM1H/q8KYTN63P+RTMvpEv3QHXcheCU7evNEorb4S6fYFbhWf8pUKOWS79hsCf1t6TZim3VM2HUDWQAM7MdwIFgC871iskFwJWGYKP59HM0Cnw2nl3rDfy1HugZd0mdpZat/LP/UYXuds8CfYtUFM1C0YPgzQYUDjdl6bgbcV6TZ5bnpF+l/Pfgm2AkOBdMAItAO9L0go3aHX3HmTrxpx48aHbiQ1cgtAnBaDzQ06sqcf5fcBoZl1Qz7RIaD8PEim0DOByidAOkpaxejXgEvNeAnjJE237ctTo4jcHruuttAdRR9bbzTQ22xP3Ir42+wUDLr4FAnewt4Er6xMDcCP20q4IK/90ch2PPYWAMuA58B+xD/p4g8SkW+a2kX5VQuf4bselPXb8PKcgfj//y2vQXHso3qMioXUxbXVSNg1n9b02wN9iK8xXAQeA10GrqjHFHZ2norWJPecQWX5zUQuT3AbeLwYOmIaONzToiXx9Y+pCCZg8hPMlDwU3IZN4EKB8MXvPQLZGdDPsaastIT3RE9wXA5qNU2WFLXzD0+7Tz41TUL9KRdYRvLVujDL5R0sn51UaeS/LkHJuGoOwJF4Ux3p5lJ3k+bS1VHTPuMgdNlpMbLNPy7cIkHdxlVHZ+UplFnp4KJd5Nyb8D+ckWOuIsA40M1yXdG8iOou7MpRvlL8D3HaOetkhi16kYsh44DJwOLgCaUd0K/gt86FhDaFMjbZvUz568a8l8lCWfyfafyskuZqZl+lpsy3wfivIZ6DoaZPYJy/pc2Tpq3LVqs28KjTQ1zbOU3UmEn0u5lnku9Occ5hso3zyHJ17c8190sUdTfG3sutDFXMtsSwEtQc4Aa1nyN4WtYr+WUTWEP/RU5QRwSU1B/om+gxyE3nmwrpbPXscxAPnq7KuudEmG+o2WZdVZZQpfUvZzlcw1kwoz8l6nTME8l7j2R7gG7Zkdn8tcLENHjbtWBSdtVueReFyDU14gsKk3blf0L741kDQgXehhW2Y67CI6rDZO2yo4pdmPvboLX4rN2tC2GpQVXUtx3B05zWStlmcVuejgUlckY3vUNU3FtkEcXW27B5+47B3eTB3NDk42/b9txl2rlnUvWvSWvECTpOKVpEwjL5qyG1m5ySg4uc6apPjpXO21DHpi2Wl0p4fBH0VmVQ+5skUeJsDoHSmfly5dtwymlH0xCfo7aty1Kji9meC4eNb8eIbFeZ6MTb3xano2IMl8NV5gcb6BBY/J4spvyrYq7RNQNQvt3yqDU+rVHtBJlTKf/SA9mnchnzpc9Cfx2vT/vDGUpDdPxqbeuN5lWxWc4oYUde667HKpV1N2TftdaHtbZpYSWu5sbcvfRnxzPWxRcPLdUPeozkrkcmZND1U4X7KSqGVybbsta8U7+qyUcddtwam0Fqbj6s7oOnsaVdmTsbHrFJh8lhM2usvkGeKhXLOGdglOuuH8HFT3smhrbW6/A1xIv3vlslQ90EV5b+QNwcmt1R91Y+958U6fbWQuYSjXHsxoR93twu4zA5hNAHifC3AN9kVes54WTgR7YMvJQHtNJrnuT2oT/ZemgrQ07b0zZeYrFWmsvTr/g7366t0v/jZEdncU09JuMh3ySAZA3dM78o+i/FKQGcAc62wKO7ZrP87n/axo4Msfezkaq/fjxjrKxNkXkDGd9shapk+CR08iXehAfHIuAmehW8G3jigfTuavQSlLoboKOzgjBCe3xrsV9p+4ifRwb8Tf++iY93PUU53pYBOgfYoRoKOI69CMexugoOqzrHu+csEKAK7BaWsGfnUJVtFTxuHPKP2Sh+IzkNHXCCdzfARbezbKOV+F85HgxyB6yEIyUJoHQnBK80xCPh3tGTqZHgFvllCclyVf66VAnxcD83Q3Uq6fM9E12VI/GNcDOvqQBquCkuiuJQenv/q9n+/SFuc4Sbkz6z2s98Ay7qI9gft+yWPrvznqNZR1PfT0apEQnNyb/3uI3OIu1rYSH8IyoVmklxVfr1T2CMepwHX5NJpBvzFyZ6BrRkVX5gF+zfD2A3pzfFegDfkfIX85xzoiX/9+7FoKjqkrtM9QYPO5kdnX0MWcITg5Ni6d9k90Wt0VP+4oGtiXeGB85Ah8qbfif8r5RVGew1FLpM8hfzNH6XwWzATauxtYwWCO24MdwKbA3OdZkfNfIr8GdowmnUTfJ/Nw4DN7StIX8hw8EIKTg7MM1tNI3wOWMvJCMt8DL8IyNsZ2FecKDj6zN/n/sxVw8KKzCVB/IUA9GJcmT/+0Uk/gToqXhfPyPdC3/Cq6rwY6rWZO3+i+Kyv9ikbjuwVmLZy/xfkYM6/Jac2mtEmdRgqcs9IKQ355HgjBydO3DKoLEf2dp3hvFHuci47PmiI/nE9C+0+tol2YIW2YVDntrL2pg4A2xwM10QMKToubWF/ZVeVdS165q3161Hy3q1CJ/ItK1N2I6rkIH8BA15O6OiJf7wRp47mVAWDPOsMqGdinz1raZWlXdB9Ou2yX/Dyb8soT61JwqplmJ3LVZ5ovmJnpes7kHBsZGx5T+2I6UZ4TXHVKf6oM9cl3e4M/irENSEukdiP571B89XyWYZRrZnUiyGvDLDWNlA3JEsa+yynXEq/VFPXH6Ohij42MDY9ZZ2njTsFpvlmTZdoMaGbaUtwqILp+yWwzMG144teQKUOnfReBQ8HFcUGP8wkeMqaI2rKdZk/y3cH4aJJpZFoavisoOw60IkDNTLMryse+s0hrBtUK+2TGO9iwUAmo68ddXy5WU+lney7X/s8TESvy80jrKYwLPWnB/JgFj8lStcnMjKWncx69YxMrSj3NtQMfLALqtHuA51I1ZRdcR/HR2SzZpdigu95T2VxNK9Um8k7YpEf91gT/lTAfC5oZZPWRr5Wd2Keb0GHgTdAI6UbyXUcF1b6IHV0/7jRzEt205GD1VzOFP8Q4x8XOs07VKH/KYqiUySaXO9Rv83TSoNrzuDWPzyjX5wdPG+eZSXjvgOFj4AxgG6R0Y9B+zEiORbyaEG8b1DaVdGdXgNmKa5rsUzNyVyG3LdBT0bJJfew06sydOUWGwHs9aX1+dEuU53hUYNkPnAdcPn6Oj7P4eZYZnTnueFIxEDwEbOjUuAcQ0n8PmW0jDM8Jcfm0c3j1JrANyfbl0vSY+fCtD162UKpPD3Y1ZV3TyG8HzgXXgnvAo2ASuB6cCbYA1RcDSetnN1xphGkXwsuBia5KCuB/Gx03Ar3sWAihS/+J53AwC5RB0qsluTchvz+QvxeCPHofhrFg1ahC0juDt0AeXQNDzTd5nHf1uDMHhl7I1LJif6C7/ypAzngDaNn2ABjLXUPHOsJRg8gcBT4BNgY6l07Ja4ovOf2g1784WhN6d4NZdm0HVgMrAv28xWtgCrgNXI1eLU+tCJ0rwajNV9mqR8iyVbNILflmgH8A/XOCqRybRtj1RSrTvosL6X+jzTEF0KN2PQBEbbky6QEmT4NpLYNU50tgOpgA7sAOn30QRLOJ6+kPxz5A17QvUPv5kmZ2fwN/AL/G5vhPpXjpxca1EFSg04xqMFgHyB+vgNlA+2562VP9toaQVdtIdlegthKWBdPAM0A/H3wDxzpCVn23K8edOnGgNvEAHU0d8BAHc7QvswwdVwOuVxA+0g1vJ7AzWKOC1TkKA4FuUtp6EOYC3VgVSDXIpwj4SzfMQMEDvcMDDJotwYXgFnCE61UjszXQt2YuVDNjcq0z8AcPBA90uQeIJscC7SeYdC8nWormEnz9gfhdaVyu8sAQPBA80Ds9QDQ5EmTNeLT5PSzNO5StA/4JfOjzaXpDfvBAp3sg7Dk10IJEk+GIPwyWyVGjVxgeB09U8BRHbZpuCz4F9PDBlbTfpJ/70IZroOCB4IHggSUeIDD1A4/5THcKkrk9tEXwQDd7QI/PA/l54CjE9MpFK0hP505vRcWhzuCBZnkgBCd/T2tJ1iq6guWclomBgge61gNhz8mzaVmaTUZ0M0/xRsT0Qt8IgpN+ZyhQ8EDXeiDMnPybVkGi2aS3i/cKganZbg/1BQ90kAeYOW0OFhS0uW2jRt9fbd9BLgqmBg8ED7TKAwQL/fPEuTaRpUGeOcjv0qrrDPUGDwQPdKAHCBpDQZm/AnAH+vUNWaDggeCB4AF3DxBADgFPgqLoNRSdDsK+oHtzBInggeCBuAcIJjuCq4HNb/TAVkfzyNH/UtMX9oGCB3qtB8KrBCU1fSW4jET9fmA9MATod4mSSL93NQHore+JPI2bn8QU8oIHepMHQnBqYmsTsFanuqFgLTAP6MfaXiIY6XeHAgUPBA8YHvg/CNVT4WgveG8AAAAASUVORK5CYII=",V=n(14),K=n(7),Y=n(45),J=n.n(Y),Q=n(50),X=n.n(Q);function q(e){return c.a.createElement(Z,{className:"flex flex-row justify-start  items-center"},e.user?c.a.createElement("div",{className:"mr-2 avatar flex flex-col relative overflow-hidden items-center justify-center",style:{width:"26px",height:"26px",borderRadius:"100%"}},null!==e.avatar&&c.a.createElement("img",{className:"block absolute top-0 bottom-0 left-0 right-0 z-20",src:e.avatar,alt:"".concat(e.username,"'s avatar"),style:{width:"100%",height:"100%",objectFit:"cover"}}),c.a.createElement("i",{className:"icon fas ".concat(e.icon," block z-10 relative")})):c.a.createElement("div",{className:"mr-2 flex flex-col items-center justify-center",style:{width:"26px",height:"26px"}},c.a.createElement("i",{className:"icon fas ".concat(e.icon," block z-10 relative")})),c.a.createElement("div",{className:"title"},e.string))}var Z=f.b.div(U||(U=Object(i.a)(["\n  padding: 6px 10px;\n  :hover {\n    background: ",";\n    border-radius: 8px;\n  }\n  .title {\n    font-weight: 600;\n  }\n  .avatar {\n    background: ",";\n  }\n  .icon {\n    font-size: 16px;\n    color: ",";\n  }\n"])),(function(e){return e.theme.background_3}),(function(e){return e.theme.background_3}),(function(e){return e.theme.textFaded}));function $(e){return c.a.createElement("div",{className:"ml-2 mb-2",style:{fontSize:"16px",fontWeight:700}},e.string)}var ee=f.b.div(L||(L=Object(i.a)(["\n  transition: all 0.2s linear;\n  top: 100%;\n  background: ",";\n  border-width: 1px;\n  border-radius: 8px;\n  padding: 12px 8px;\n  width: 220px;\n  border-color: ",";\n"])),(function(e){return e.theme.background_1}),(function(e){return e.theme.border})),te=f.b.div(B||(B=Object(i.a)(["\n  background: ",";\n  /* border-color: ",";\n  border-width: 1px; */\n"])),(function(e){return e.theme.background_3}),(function(e){return e.theme.border})),ne=f.b.button(M||(M=Object(i.a)([""]))),ae=f.b.input(H||(H=Object(i.a)(["\n  font-weight: 500;\n  opacity: 0.7;\n  :focus,\n  :active {\n    opacity: 1;\n  }\n"]))),re={setSearch:k};var ce,oe=Object(A.b)((function(e){return{search:e.app_state_reducer.search}}),re)((function(e){var t=/^[@#A-Za-z0-9 ]{1}[A-Za-z0-9 ]{0,}$/,n=Object(V.g)(),a=Object(r.useState)(""),o=Object(d.a)(a,2),l=o[0],i=o[1],s=Object(r.useState)(!1),p=Object(d.a)(s,2),f=p[0],b=p[1];function g(e){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=l,"#"==l.charAt(0)?n.push("/tag/".concat(a.replace(/#/g,""))):"@"==l.charAt(0)?n.push("/users/".concat(a.replace(/@/g,""))):n.push("/search/".concat(a)),C();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){i(e.search)}),[e.search]);var x=J()((function(e){return E.apply(this,arguments)}),400);function v(e){return e=(e=e.replace("#","")).replace("@","")}function E(){return(E=Object(u.a)(m.a.mark((function e(t){var n,a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(l),console.log("searching "+n),a="/api/search/suggest?search=".concat(n),e.prev=3,e.next=6,fetch(a);case 6:return r=e.sent,e.next=9,r.json();case 9:c=e.sent,200==r.status&&O(c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}Object(r.useEffect)((function(){l.length>0&&x(),0==l.length&&(S(!1),O(null))}),[l]);var y=Object(r.useState)(null),w=Object(d.a)(y,2),j=w[0],O=w[1],k=Object(r.useState)(!1),N=Object(d.a)(k,2),_=N[0],S=N[1];function C(){console.log("unfocus"),document.getElementById("search-input").blur(),S(!1)}return Object(r.useEffect)((function(){console.log(j),S(null!==j)}),[j]),c.a.createElement("div",{className:"relative flex-1 flex items-center justify-center ml-2 mr-2  text-sm "},c.a.createElement(te,{id:"search-form-style",focused:f,className:"flex flex-row w-full my-1 items-center outline-none focus:outline-none md:w-full",onClick:function(e){document.getElementById("search-input").focus()},style:{cursor:"text",borderRadius:"8px",maxWidth:"480px"}},c.a.createElement("div",{className:"w-full relative h-full px-4 py-2"},c.a.createElement(ae,{id:"search-input",type:"text",tabIndex:1,className:"w-full h-full bg-transparent  outline-none ",name:"search",autoComplete:"off",placeholder:"Search for topics, @users, or #tags!",value:l,onKeyDown:function(e){return function(e){13==e.keyCode&&g(),27==e.keyCode&&C()}(e)},onChange:function(e){return function(e){if(null!=e&&""!=e)return t.test(e)?(console.log("special"),void i(e)):void 0;i("")}(e.target.value)},onFocus:function(e){return b(!0)},onBlur:function(e){return b(!1)}}),_&&(j.galleries.length||j.tags.length||j.users.length)?c.a.createElement(ee,{id:"search-drop",className:"w-full text-left text-sm  mt-2 left-0 right-0  absolute "},c.a.createElement("div",{className:"dropdown-overlay fixed top-0 left-0 right-0 w-screen h-screen z-10",onClick:function(e){return C()},style:{}}),c.a.createElement("div",{className:"relative z-20"},j.galleries.length>0&&c.a.createElement("div",{id:"search-dropdown-galleries",className:""},c.a.createElement($,{string:"Galleries"}),c.a.createElement("div",{className:"flex flex-col mb-3"},j.galleries.map((function(e,t){if(t<3)return c.a.createElement(K.b,{onClickCapture:function(e){return C()},to:"/beam/".concat(e.gallery_id),key:"search-box-gallery-result-".concat(e.gallery_id)},c.a.createElement(q,{icon:"fa-images",string:e.title}))})))),j.users.length>0&&c.a.createElement("div",{id:"search-dropdown-users",className:""},c.a.createElement($,{string:"Users"}),c.a.createElement("div",{className:"flex flex-col mb-3"},j.users.map((function(e,t){if(t<3)return c.a.createElement(K.b,{onClickCapture:function(e){return C()},key:"search-box-user-result-".concat(e.username),to:"/user/".concat(e.username)},c.a.createElement(q,{user:!0,icon:"fa-user",avatar:e.avatar_lq,string:e.username}))})))),j.tags.length>0&&c.a.createElement("div",{id:"search-dropdown-tags",className:""},c.a.createElement($,{string:"Tags"}),c.a.createElement("div",{className:"flex flex-col mb-3"},j.tags.map((function(e,t){if(t<3)return c.a.createElement(K.b,{onClickCapture:function(e){return C()},to:"/tag/".concat(e.name.replace(" ","_")),key:"search-box-tag-result-".concat(t)},c.a.createElement(q,{icon:"fa-hashtag",string:e.name}))})))))):c.a.createElement("div",null)),l.length>0&&c.a.createElement("div",{className:"h-full p-1 flex flex-col items-center justify-center",id:"search-clear cursor-pointer",onClick:function(e){return i("")}},c.a.createElement("button",{className:"block"},c.a.createElement("i",{className:"fas fa-times opacity-50 fa-lg"}))),c.a.createElement(ne,{type:"submit",onClick:function(e){return g(e)},onSubmit:function(e){return g(e)},className:" font-bold px-4"},c.a.createElement("i",{className:"fas fa-search fa-lg opacity-25"}))))}));function le(e){return c.a.createElement(se,{className:"",background:e.background},c.a.createElement("div",null,e.value||0))}var ie,se=f.b.div(ce||(ce=Object(i.a)(["\n    width:18px;\n    height:18px;\n    position: absolute;\n    border-radius:100%;\n    display:flex;\n    font-size: 10px;\n    justify-content:center;\n    align-items: center;\n    top: -6px;\n    right: -6px;\n    border: ",";\n    background-color: ",";\n"])),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.background&&e.value>0?e.background:e.theme.background_1}));var me=f.b.label(ie||(ie=Object(i.a)(["\n    background-color: ",";\n    height: 20px;\n    width: 34px;\n    border-radius: 16px;\n    display: block;\n    input:checked{\n\n    }\n"])),(function(e){return"theme_light"===e.theme_string?e.theme.background_3:"black"}));var ue,de,pe,fe,be,ge,he={toggleTheme:j},xe=(Object(A.b)((function(e){return{theme_string:e.app_state_reducer.theme}}),he)((function(e){return console.log(e),c.a.createElement("div",null,c.a.createElement(me,{htmlFor:"theme_toggle",title:"theme toggle",theme_string:e.theme_string},c.a.createElement("input",{checked:"theme_light"===e.theme_string,onChange:function(t){return e.toggleTheme()},className:"hidden",type:"checkbox",name:"theme_toggle",id:"theme_toggle",style:{width:0,height:0}})))})),{success:"#3498db",error:"#e74c3c",secondary:"#2ecc71",warning:"#f1c40f",text:"rgb(255,255,255)",textFaded:"rgb(170,170,170)",backgroundDark:"rgb(20,20,20)",backgroundMedium:"rgba(32,32,32)",backgroundThird:"rgba(38,38,38)",backgroundMediumLight:"rgba(45,45,45)",backgroundMediumDark:"rgba(25,25,25)",backgroundLight:"rgba(90,90,90)",backgroundLightest:"rgba(90,90,90, .3)"}),ve=n.p+"static/media/imgbeam_btc_address.259a802c.png";function Ee(e){return c.a.createElement("div",{className:"",style:{}},c.a.createElement("a",{href:"/login",className:"px-3 w-full text-center py-1 text-sm inline-flex justify-center items-center flex-row",style:{backgroundColor:"".concat(xe.success),color:"white",borderRadius:"8px"}},c.a.createElement("div",{className:"font-bold px-8"},"Sign In")))}function ye(e){return c.a.createElement("div",{className:"my-2"},e.children)}function we(e){return c.a.createElement(K.b,{to:e.link,className:"flex list-item flex-row items-center outline-none focus:outline-none",style:{minHeight:"42px"}},c.a.createElement(ke,{active:e.active},c.a.createElement("div",{active:e.active,className:"mr-3 ml-1 flex flex-col items-center justify-center",style:{minWidth:"40px",height:"24px"}},c.a.createElement(Oe,{active:e.active,className:"".concat(e.icon," icon"),style:{opacity:"".concat(e.active?1:.5)}})),c.a.createElement("div",{className:"text-sm font-bold item-string"},e.string)))}function je(e){return c.a.createElement("a",{href:e.link,className:"flex list-item flex-row items-center outline-none focus:outline-none  ".concat(e.active?"bg-white bg-opacity-25":""),style:{minHeight:"42px"}},c.a.createElement(ke,{active:e.active},c.a.createElement("div",{active:e.active,className:"mr-3 ml-1 flex flex-col items-center justify-center",style:{minWidth:"40px",height:"24px"}},c.a.createElement("i",{className:"".concat(e.icon," icon"),style:{opacity:"".concat(e.active?1:.5)}})),c.a.createElement("div",{className:"text-sm font-bold item-string"},e.string)))}var Oe=f.b.i(ue||(ue=Object(i.a)(["\n  color: ",";\n"])),(function(e){return e.active?e.theme.success:e.theme.icons})),ke=f.b.div(de||(de=Object(i.a)(["\n  color: ",";\n  .item-string {\n    transition: all 0.1s linear;\n  }\n  display: flex;\n  flex-direction: row;\n  padding: 6px 4px;\n  border-radius: 8px;\n  flex-grow: 1;\n  align-items: center;\n  justify-content: start;\n  margin: 0 8px;\n  .icon {\n    transition: all 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n    transform: ",";\n  }\n  :hover {\n    background: ",";\n    .icon {\n      color: ",";\n    }\n    .item-string {\n      transform: translateX(6px);\n    }\n  }\n"])),(function(e){return e.active?e.theme.success:e.theme.icons}),(function(e){return e.active?"scale(1.2)":"none"}),(function(e){return e.theme.background_3}),(function(e){return e.theme.success}));function Ne(e){return c.a.createElement(_e,{className:"mx-4",style:{}})}var _e=f.b.hr(pe||(pe=Object(i.a)(["\n  border-color: ",";\n"])),(function(e){return e.theme.border}));function Se(e){return c.a.createElement("div",null)}function Ce(e){var t=Object(V.g)();function n(e){e.preventDefault(),e.stopPropagation()}Object(r.useEffect)((function(){return window.addEventListener("drop",n),window.addEventListener("dragover",n),function(){window.removeEventListener("drop",n),window.removeEventListener("dragover",n)}}),[]);var a=J()((function(e){e.preventDefault(),e.stopPropagation()}),50);function o(n){n.preventDefault(),n.stopPropagation(),function(e){if("file"==e.dataTransfer.items[0].kind&&e.dataTransfer.items[0].type.includes("image"))return console.log(e.dataTransfer.items[0]),!0;return!1}(n)&&(console.log("valid"),function(t){var n=new FileReader;n.onload=function(n){t.typeString=function(e){if(e.includes("video"))return"video";return"image"}(t.type),t.url=n.target.result,e.addFile(t)},n.readAsDataURL(t)}(n.dataTransfer.files[0]),t.push("/new"))}return c.a.createElement(Te,{onDragOver:function(e){return a(e)},onDrop:function(e){return o(e)},className:"flex flex-col justify-center items-start",style:{minHeight:"120px"}},c.a.createElement(Ae,{className:"ml-8"},c.a.createElement("div",{className:"mx-8 my-6 flex flex-col items-center "},c.a.createElement("div",null,c.a.createElement("i",{className:"fab fa-dropbox fa-lg opacity-50 mb-3 icon"})),c.a.createElement("div",{className:"text-xs opacity-50"},"Drop Media Here"))))}var Te=f.b.div(fe||(fe=Object(i.a)(["\n  margin: 12px 0;\n  transition: all 0.2s linear;\n  /* background-color: ","; */\n"])),(function(e){return e.theme.background_1})),Ae=f.b.div(be||(be=Object(i.a)(["\n  transition: all 0.2s linear;\n  border: ",";\n  border-radius: 8px;\n  cursor: pointer;\n  .icon {\n    transition: all 0.2s linear;\n  }\n  :hover {\n    border-color: ",";\n    .icon {\n      transform: scale(1.2);\n      color: ",";\n    }\n  }\n"])),(function(e){return"2px dashed ".concat(e.theme.border)}),(function(e){return e.theme.secondary}),(function(e){return e.theme.secondary}));function Ie(e){return c.a.createElement("div",{className:"w-full"},c.a.createElement("div",{className:" text-xs flex flex-col justify-center items-start z-50  w-full",style:{}},c.a.createElement("div",{id:"home-copy",className:"text-xs opacity-50"},"\xa9 2021 Imgbeam")))}function De(e){return c.a.createElement("div",{className:"px-6 py-4"},c.a.createElement("div",{className:"text-sm mb-2"},"Sign in to post, vote, and share."),c.a.createElement(Ee,null))}var ze=f.b.div(ge||(ge=Object(i.a)(["\n  transition: all 0.2s linear;\n  left: ",";\n  overflow-y: hidden;\n  overflow-x: visible;\n  background-color: ",";\n .panel{\n   border-radius: 8px;\n   box-shadow: 4px 4px 8px rgba(0,0,0,.3);\n   background: ",";\n }\n  :hover {\n    overflow-y: scroll;\n  }\n  ::-webkit-scrollbar {\n    position: absolute;\n  }\n"])),(function(e){return e.sidebar?0:"-225px"}),(function(e){return e.theme.background_2}),(function(e){return e.theme.background_3}));var Fe,Pe,Re,Ue,Le,Be,Me={toggleCreatePanel:b,toggleSidebar:g,addFile:E,setFiles:v};Object(A.b)((function(e){return{createPanel:e.app_state_reducer.createPanel,sidebar:e.app_state_reducer.sidebar,signedIn:e.app_state_reducer.signedIn}}),Me)((function(e){var t=Object(V.h)();return c.a.createElement(ze,{sidebar:e.sidebar,className:"fixed left-0 top-0 bottom-0 text-left ",style:{width:"240px",marginTop:"56px",zIndex:997}},c.a.createElement(ye,null,c.a.createElement(Ce,{addFile:e.addFile}),c.a.createElement(je,{active:"/create"==t.pathname,string:"New Post",link:"/new",icon:"fas fa-plus"})),c.a.createElement(Ne,null),c.a.createElement(ye,null,c.a.createElement(we,{active:"/uploads"==t.pathname,link:"/uploads",string:"My Uploads",icon:"fas fa-images"})),c.a.createElement(Ne,null),c.a.createElement(ye,{className:!0},c.a.createElement(we,{active:"/"==t.pathname,link:"/",string:"Home",icon:"fas fa-home"})),c.a.createElement(Ne,null),!e.signedIn&&c.a.createElement("div",null,c.a.createElement(ye,null,c.a.createElement(De,null)),c.a.createElement(Ne,null)),c.a.createElement(ye,null,c.a.createElement(we,{active:"/following"==t.pathname,link:"/following",string:"Following",icon:"fas fa-list"}),c.a.createElement(we,{active:"/favorites"==t.pathname,link:"/favorites",string:"Favorites",icon:"fas fa-heart"}),c.a.createElement(we,{active:"/history"==t.pathname,link:"/history",string:"History",icon:"fas fa-history"})),c.a.createElement(Ne,null),c.a.createElement(ye,null,c.a.createElement(Se,null)),c.a.createElement(ye,null,c.a.createElement(we,{active:"/settings"==t.pathname,link:"/settings",string:"Settings",icon:"fas fa-cog"}),c.a.createElement(we,{active:"/support"==t.pathname,link:"/support",string:"Help",icon:"fas fa-question-circle"}),c.a.createElement(we,{active:"/feedback"==t.pathname,link:"/feedback",string:"Feedback",icon:"fas fa-comments"}),c.a.createElement(we,{active:"/donate"==t.pathname,link:"/donate",string:"Donate",icon:"fas fa-dollar-sign"})),e.signedIn&&c.a.createElement(Ne,null),e.signedIn&&c.a.createElement(ye,null,c.a.createElement(je,{active:"/logout"==t.pathname,link:"/logout",string:"Sign Out",icon:"fas fa-sign-out-alt"})),c.a.createElement(Ne,null),c.a.createElement(ye,null,c.a.createElement(Ie,null)))}));var He=f.b.div(Fe||(Fe=Object(i.a)([""])));function Ge(e){return c.a.createElement("div",{className:"w-full text-left p-4"},c.a.createElement("div",{className:"flex flex-row"},c.a.createElement("div",{className:"mr-4"},c.a.createElement("div",{style:{width:"42px",height:"42px",borderRadius:"100%",overflow:"hidden"}},c.a.createElement("img",{src:e.account.avatar,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}))),c.a.createElement("div",null,c.a.createElement("div",{className:"font-bold text-lg leading-6 username"},e.account.username),c.a.createElement("div",{className:"text-sm leading-5 email"},e.account.email))))}function We(e){return c.a.createElement("div",null,c.a.createElement(Ve,null,c.a.createElement(Je,{icon:"fa-arrow-left",string:"Theme",action:function(t){return e.toggleThemeMenu(!1)}})),c.a.createElement(Ne,null),c.a.createElement(Ve,null,c.a.createElement(Je,{color:"#f1c40f",icon:"fa-sun",string:"Light Theme",action:function(t){return e.toggleTheme("theme_light")}},c.a.createElement("div",null,"theme_light"===e.theme&&c.a.createElement("i",{className:"fas fa-check-circle check"}))),c.a.createElement(Je,{color:"#9b59b6",icon:"fa-moon",string:"Dark Theme",action:function(t){return e.toggleTheme("theme_dark")}},c.a.createElement("div",null,"theme_dark"===e.theme&&c.a.createElement("i",{className:"fas fa-check-circle"})))))}function Ve(e){return c.a.createElement(Ke,null,e.children)}var Ke=f.b.div(Pe||(Pe=Object(i.a)(["\n  /* border-bottom-width: 1px; */\n  width: 100%;\n  padding: 8px 0;\n  /* border-color: ","; */\n  .email {\n    color: ",";\n  }\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.text_light})),Ye=Object(f.c)(Re||(Re=Object(i.a)(["\n    from{\n        height: 0;\n        opacity: 1;\n        transform: translateY(-100px);\n    }\n    to{\n        height: auto;\n        opacity:1;\n        transform: translateY(0);\n    }\n"])));function Je(e){return c.a.createElement(Qe,{color:e.color,onClick:function(t){return e.action(t)},className:"px-3"},c.a.createElement("div",{className:"flex item-content flex-row items-center justify-start"},c.a.createElement("div",{className:"icon-holder flex flex-col items-center justify-center mr-4",style:{width:"32px"}},c.a.createElement("i",{className:"icon block fas ".concat(e.icon," "),style:{fontSize:"20px"}})),c.a.createElement("div",{className:"text-sm font-semibold"},e.string),c.a.createElement("div",{className:"ml-auto"},e.children)))}var Qe=f.b.li(Ue||(Ue=Object(i.a)(["\n  :hover {\n    .icon {\n      color: ",";\n    }\n  }\n  .check{\n    color: ",";\n  }\n  .icon {\n    color: ",";\n  }\n  .item-content {\n    padding: 8px 8px;\n    border-radius: 8px;\n    :hover {\n      background-color: ",";\n    }\n  }\n"])),(function(e){return e.color||e.theme.secondary}),(function(e){return e.theme.icons}),(function(e){return e.theme.icons_2}),(function(e){return e.theme.background_3})),Xe=f.b.div(Le||(Le=Object(i.a)(["\n  position: absolute;\n  right: 0;\n  width: 300px;\n  top: 110%;\n  color: ",";\n  /* box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.4); */\n  background: ",";\n  min-width: 180px;\n  animation: "," 0.1s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n  border-radius: 8px;\n  overflow: hidden;\n  border: ",";\n"])),(function(e){return e.theme.text}),(function(e){return e.theme.background_1}),Ye,(function(e){return"1px solid ".concat(e.theme.border)}));f.b.li(Be||(Be=Object(i.a)(["\n  width: 100%;\n  text-align: left;\n  font-weight: bold;\n  display: block;\n  a {\n    padding: 4px 12px;\n    display: block;\n  }\n  :hover {\n    opacity: 0.5;\n  }\n"])));var qe={toggleTheme:j},Ze=Object(A.b)((function(e){return{account:e.account_reducer.account,theme:e.app_state_reducer.theme}}),qe)((function(e){var t=Object(V.g)(),n=Object(r.useState)(!1),a=Object(d.a)(n,2),o=a[0],l=a[1];return Object(r.useEffect)((function(){console.log(e)}),[]),c.a.createElement(Xe,{id:"account-menu",className:"relative",style:{zIndex:999}},c.a.createElement("div",{className:"overlay fixed top-0 left-0 w-screen h-screen",onClick:function(t){return e.toggleAccountMenu(!1)}}),c.a.createElement(He,{className:"relative shadow-md "},o?c.a.createElement(We,{toggleTheme:e.toggleTheme,theme:e.theme,toggleThemeMenu:l}):c.a.createElement("ul",{className:"flex flex-col items-start w-full"},c.a.createElement(Ve,null,c.a.createElement(Ge,{account:e.account})),c.a.createElement(Ve,null,c.a.createElement(Ne,null)),c.a.createElement(Ve,null,c.a.createElement(Je,{action:function(){return t.push("/user/".concat(e.account.username))},icon:"fa-user",string:"Profile"}),c.a.createElement(Je,{icon:"fa-envelope",string:"Messages"})),c.a.createElement(Ve,null,c.a.createElement(Ne,null)),c.a.createElement(Ve,null,c.a.createElement(Je,{icon:"".concat("theme_light"===e.theme?"fa-sun":"fa-moon"),string:"Theme",action:function(){return l(!0)}},c.a.createElement("button",{className:"flex flex-col items-center justify-center mr-2"},c.a.createElement("i",{className:"fas fa-chevron-right"}))),c.a.createElement(Je,{action:function(){return t.push("/settings")},icon:"fa-cog",string:"Settings"})),c.a.createElement(Ve,null,c.a.createElement(Ne,null)),c.a.createElement(Ve,null,c.a.createElement(Je,{action:function(){return window.location.href="/logout"},icon:"fa-sign-out-alt",string:"Sign Out"})))))}));function $e(){return Object(r.useEffect)((function(){console.log("drop")}),[]),c.a.createElement("div",{className:"absolute left-0 right-0 bg-pink-300"},"dropdown")}var et,tt=n.p+"static/media/avatar.b078c2bf.png";function nt(e){return console.log(e),c.a.createElement(at,{className:"flex flex-row items-center relative justify-center text-white",onClick:function(t){return e.toggleAccountMenu((function(e){return!e}))}},c.a.createElement("div",{id:"avatar-image-container",className:"overflow-hidden relative",style:{borderRadius:"100%",width:"36px",height:"36px",backgroundImage:"url(".concat(e.account.avatar||tt,")"),backgroundSize:"cover",backgroundPosition:"center",transition:"all .3s cubic-bezier(0.68, -0.6, 0.32, 1.6)"}},c.a.createElement("div",{className:"chevron-container flex items-center justify-center absolute top-0 bottom-0 left-0 right-0 opacity-0",style:{background:"rgba(255,255,255,.3)"}},c.a.createElement("i",{className:"fas block fa-chevron-down"}))))}var at=f.b.div(et||(et=Object(i.a)(["\n  padding: 6px 16px;\n  transition: all .1s linear;\n  border: 1px solid transparent;\n  :hover{\n    /* box-shadow: 1px 1px 3px rgba(0,0,0,.3); */\n      /* border: 1px solid  rgba(100,100,100,.1); */\n      .chevron-container{\n      opacity: 1;\n\n    }\n  }\n\n"])));function rt(e){return c.a.createElement("div",{className:"absolute text-left",style:{top:"100%",right:"-50%"}},c.a.createElement("div",{className:"fixed top-0 bottom-0 left-0 right-0 z-0",onClick:function(t){return e.toggleAppMenu(!1)}}),c.a.createElement("div",{className:"panel z-10 bg-black",style:{color:"white",borderRadius:"16px",background:"".concat(xe.backgroundLight)}},c.a.createElement("ul",null,c.a.createElement("li",{className:"py-4 px-6"},c.a.createElement("a",{href:"/"},"Imgbeam")),c.a.createElement("li",{className:"py-4 px-6"},c.a.createElement("a",{href:"/BeamStash"},"BeamStash")))))}function ct(e){return c.a.createElement("a",{href:"/signup".concat(e.redirect),tabIndex:3,className:"px-4 py-1 mx-2 border-box text-sm font-extrabold  border-transparent hover:opacity-75 flex flex-col items-center justify-center",style:{width:"120px"}},c.a.createElement("div",null,"Sign Up"))}var ot,lt,it=n.p+"static/media/icon_full_res.b5311ad1.png";function st(e){return c.a.createElement(gt,{className:"absolute tooltip-container",style:{bottom:"-50px"}},c.a.createElement("div",{className:"px-3 py-2 tooltip text-sm font-semibold",style:{whiteSpace:"nowrap",borderRadius:"3px"}},e.string))}var mt,ut,dt,pt,ft,bt=Object(f.c)(ot||(ot=Object(i.a)(["\n    from{\n        transform: translateY(-10px);\n        opacity: 0;\n    }\n    to{\n        transform: translateY(0px);\n        opacity: 1;\n    }\n"]))),gt=f.b.div(lt||(lt=Object(i.a)(["\ncolor: ",";\n    .tooltip{\n        opacity: 0;\n        animation: "," .1s linear forwards;\n        display:none;\n        background: ",";\n        border: ",";\n    }\n    .tooltip-active{\n        display: block;\n    }\n"])),(function(e){return e.theme.text}),bt,(function(e){return e.theme.background_1}),(function(e){return"1px solid ".concat(e.theme.border)}));function ht(e){var t=Object(V.h)().pathname,n="?redirect="+window.location.pathname;return console.log(t),c.a.createElement("div",{id:"sign-in-sign-up-container",className:" flex flex-row items-center justify-end",style:{height:"50px"}},c.a.createElement("div",null,c.a.createElement(Ee,null)),c.a.createElement("div",null,c.a.createElement(ct,{redirect:n})))}function xt(e){var t=Object(V.g)(),n=Object(r.useState)(!1),a=Object(d.a)(n,2),o=a[0],l=a[1],i=Object(r.useState)(!1),s=Object(d.a)(i,2);s[0],s[1];return c.a.createElement("div",{className:"flex flex-row items-center justify-end"},c.a.createElement("div",{id:"notifications-and-alerts",className:""},c.a.createElement(vt,{disabled:e.createPanel,string:"New Post",background:!0,icon:"fa-plus",action:function(){return t.push("/new")}}),c.a.createElement(vt,{string:"Messages",icon:"fa-envelope"}),c.a.createElement(vt,{string:"Notifications",icon:"fa-bell"},c.a.createElement(le,{value:e.notifications.length,background:"red"}))),c.a.createElement("div",{id:"avatar-container",className:"relative"},c.a.createElement(nt,{notifications:e.notifications,toggleAccountMenu:l,account:e.account}),o&&c.a.createElement(Ze,{toggleAccountMenu:l,account:e.account})))}function vt(e){return c.a.createElement(Et,{background:e.background,disabled:e.disabled,onMouseEnter:function(e){return function(e){e.currentTarget.querySelector(".tooltip").classList.add("tooltip-active")}(e)},onMouseLeave:function(e){return function(e){e.currentTarget.querySelector(".tooltip").classList.remove("tooltip-active")}(e)},onClick:function(t){return e.action()}},c.a.createElement("div",null,c.a.createElement("i",{className:"fas ".concat(e.icon)})),e.children,c.a.createElement(st,{string:e.string}))}var Et=f.b.button(mt||(mt=Object(i.a)(["\n  transition: all 0.1s linear;\n  margin-right: 12px;\n  position: relative;\n  width: 48px;\n  height: 32px;\n  background: ",";\n  border-radius: 8px;\n  box-shadow: 0 2px 4px -2px rgba(0,0,0,.4);\n  border: ",";\n  color: ",";\n  opacity: ",";\n  :hover {\n    background-color: ",";\n  }\n"])),(function(e){return e.background?"linear-gradient(to top right, ".concat(e.theme.success,", ").concat(e.theme.tertiary,")"):"transparent"}),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.background?"white":e.theme.icons}),(function(e){return e.disabled?.3:1}),(function(e){return e.theme.background_3}));var yt=f.b.div(ut||(ut=Object(i.a)(["\n  height: 64px;\n  border-color: ",";\n  border-bottom-width: 1px;\n  transition: all .2s linear;\n  background-color: ",";\n  @media(min-width: 600px){\n    min-width: 225px;\n  }\n"])),(function(e){return e.theme.border}),(function(e){return e.theme.background_1})),wt=f.b.button(dt||(dt=Object(i.a)(["\n  /* background: ","; */\n  .logo {\n    transition: all 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n  }\n  .icon {\n    transition: all 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n  }\n  :hover {\n    background: rgba(170, 170, 170, 0);\n    .icon {\n      transform: scale(0.8);\n      filter: drop-shadow(0 0 4px rgba(0, 0, 0, 0.3));\n      /* text-shadow: 0 0 4px rgba(0,0,0,.4); */\n    }\n    .logo {\n      transform: scale(1.1);\n    }\n  }\n"])),xe.backgroundLightest),jt=Object(f.c)(pt||(pt=Object(i.a)(["\n  from{\n    opacity: 0;\n    transform: scale(.3);\n  }\n  to{\n\n    opacity: 1;\n    transform: scale(1);\n  }\n"])));f.b.button(ft||(ft=Object(i.a)(["\n  position: relative;\n  transition: all .2s linear;\n  width: 32px;\n  height: 32px;\n  color: ",";\n  border-radius: 8px;\n  background-color: ",";\n  :hover{\n  background-color: ",';\n\n  }\n  .animate {\n    :after {\n      content: "";\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      opacity: 0;\n      bottom: 0;\n      background: rgba(255, 255, 255, 0.3);\n      border-radius: 100%;\n      animation: '," 0.2s linear forwards;\n    }\n  }\n"])),(function(e){return e.theme.icons}),(function(e){return e.theme.background_2}),(function(e){return e.theme.background_3}),jt);var Ot,kt={toggleCreatePanel:b,toggleSidebar:g},Nt=Object(A.b)((function(e){return{createPanel:e.app_state_reducer.createPanel,sidebar:e.app_state_reducer.sidebar,account:e.account_reducer.account,signedIn:e.app_state_reducer.signedIn,checkedIn:e.app_state_reducer.checkedIn,theme:e.app_state_reducer.theme,notifications:e.app_state_reducer.notifications}}),kt)((function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0];function o(e){console.log("keys")}n[1],Object(r.useEffect)((function(){a?window.addEventListener("keydown",o):window.removeEventListener("keydown",o)}),[a]);var l=c.a.createElement(K.b,{to:"/",id:"brand-image-link",className:"hidden pr-3 ml-3 relative outline-none focus:outline-none py-1 sm:flex flex-row rounded-lg"},c.a.createElement("div",{className:"flex flex-row  logo relative items-center justify-center",style:{height:"24px",borderRadius:"26px"}},c.a.createElement("div",{className:"mr-2"},c.a.createElement("img",{src:it,alt:"",srcset:"",width:"24",style:{}})),c.a.createElement("img",{src:W,style:{filter:"".concat("theme_light"===e.theme?"invert()":"none")},alt:"imgbeam | share your world.",className:"h-6 mt-1"})),e.appMenu&&c.a.createElement(rt,{toggleAppMenu:e.toggleAppMenu}));return c.a.createElement(yt,{className:" px-6 flex  w-full flex-col items-center justify-center fixed",style:{zIndex:999,top:"0px"}},c.a.createElement("div",{id:"nav-content-wrap",className:"w-full  relative mx-auto"},c.a.createElement("div",{id:"nav-content-top",className:"flex flex-row relative justify-between mx-auto"},c.a.createElement("div",{className:"flex brand-container flex-row py-1 items-center"},c.a.createElement(wt,{id:"nav-apps-button",className:"flex flex-row pr-2 items-center justify-center",style:{}},c.a.createElement("div",null,l))),c.a.createElement(oe,null),c.a.createElement("div",{id:"nav-or-signup",className:"flex flex-row items-center cursor-pointer",style:{transition:"all .4s cubic-bezier(0.68, -0.6, 0.32, 1.6)",minWidth:"300px"}},e.checkedIn&&c.a.createElement("div",{className:"w-full",style:{}},e.signedIn?c.a.createElement(xt,{toggleCreatePanel:e.toggleCreatePanel,createPanel:e.createPanel,notifications:e.notifications,account:e.account}):c.a.createElement(ht,null))),a&&c.a.createElement($e,null))))}));function _t(e){return c.a.createElement(St,{className:"pt-32 text-center flex flex-col items-center"},c.a.createElement("div",null,c.a.createElement("i",{className:"".concat(e.icon," fa-4x opacity-50")})),c.a.createElement("div",{className:"container mx-auto text-2xl font-bold pt-12 pb-3"},e.header),c.a.createElement("div",{className:"signin-box text-sm"},e.subheader),c.a.createElement("div",{className:"mt-8 "},c.a.createElement(Ee,null)))}var St=f.b.div(Ot||(Ot=Object(i.a)(["\n  color: ",";\n"])),(function(e){return e.theme.text}));function Ct(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2);n[0],n[1];return e.signedIn?c.a.createElement("div",null):c.a.createElement("div",{className:"text-white"},c.a.createElement(_t,{header:"Don't miss what your friends are posting",icon:"fas fa-list",subheader:"Sign in to see new content from your favorite posters."}))}var Tt,At,It=n(9),Dt=n.p+"static/media/404Gorilla_alt.86d88bf2.svg";var zt=f.b.div(Tt||(Tt=Object(i.a)(["\nborder-radius: 8px;\n  .image-info{\n    background-color: ",";\n  }\n"])),(function(e){return e.theme.background_3})),Ft=f.b.div(At||(At=Object(i.a)(["\n  display: ",";\n"])),(function(e){return e.shown?"block":"none"}));var Pt,Rt={toggleFocusView:w,setFocusPath:function(e){return{type:"SET_FOCUS_PATH",payload:e}}},Ut=Object(A.b)((function(e){return{focusPath:e.app_state_reducer.focusPath}}),Rt)((function(e){return c.a.createElement(zt,{onClick:function(t){return e.setFocusPath({focusPath:e.string,focusGallery:e.gallery}),void e.toggleFocusView()},className:"image-panel overflow-hidden w-full mb-6 relative shadow-xl",style:{cursor:"zoom-in"}},c.a.createElement("div",{className:"image-vessel bg-black relative",style:{width:"100%"}},c.a.createElement("img",{className:"gallery-image mx-auto object-contain",onError:function(e){e.target.src=Dt,e.target.alt="404 Image By Beebsmon",e.target.style.width="200px"},src:e.string,alt:"",style:{maxWidth:"100%"}})),e.image.width>0&&c.a.createElement("div",{className:"image-info opacity-25 p-4"},e.image.width," x ",e.image.height),c.a.createElement(Ft,{className:"",shown:e.description},c.a.createElement("div",{className:"image-description-container text-white p-6"},e.description)))}));n(94);function Lt(e){return c.a.createElement(Mt,{className:"mb-2 w-full video-wrapper relative bg-black",style:{maxHeight:"calc(100vh - 200px)",width:"100%"}},c.a.createElement("video",{src:e.string,controls:!0,muted:!0,autoPlay:!0,loop:!0,style:{width:"100%",height:"100%",objectFit:"contain"}}))}var Bt,Mt=f.b.div(Pt||(Pt=Object(i.a)(["\n    overflow: hidden;\n    border-radius: 8px;\n    box-shadow: 0 4px 14px -4px rgba(0,0,0,.5);\n    .react-player{\n        outline:none !important;\n        ::active,:focus{\n            outline: none !important;\n            border: none !important;\n        }\n    }\n    .react-player video{\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n        ::active,:focus{\n            outline: none !important;\n            border: none !important;\n        }\n    }\n    .no-outline{\n        outline:none !important;\n        border: none !important;\n        ::active,:focus{\n            outline: none !important;\n            border: none !important;\n        }\n    }\n"]))),Ht=n(51),Gt=n.n(Ht);function Wt(e){Object(r.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]);var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1];function l(){return(l=Object(u.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.gallery_id,"/tags"),t.prev=1,t.next=4,fetch(n);case 4:return a=t.sent,t.next=7,a.json();case 7:r=t.sent,200===a.status&&o(r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}return c.a.createElement("div",{id:"tag-list",className:"flex mt-6 mb-4 flex-row justify-start flex-wrap"},a.map((function(e,t){return c.a.createElement(K.b,{key:"gallery-tags-key-".concat(t),to:"/tag/".concat(e.name.replace(/ /g,"_")),className:""},c.a.createElement(qt,{className:"text-xs bg-opacity-50",color:"".concat(Gt()(e.name),"44")},"#",e.name))})))}var Vt,Kt,Yt,Jt,Qt,Xt,qt=f.b.div(Bt||(Bt=Object(i.a)(["\n  cursor: pointer;\n  margin-bottom: 10px;\n  padding: 8px 16px;\n  margin-right: 1rem;\n  display: inline-block;\n  position: relative;\n  border-radius: 8px;\n  white-space: nowrap;\n  background: ",";\n  text-transform: uppercase;\n  font-weight: bolder;\n  transition: all 0.2s ease-in;\n  :hover {\n    background: ",";\n  }\n"])),(function(e){return e.color}),(function(e){return e.theme.background_3})),Zt=n(15),$t=n.n(Zt),en=n.p+"static/media/triangle_icon.72a6ac80.png";function tn(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(""),i=Object(d.a)(l,2),s=i[0],p=i[1];function f(e){o(!1),p("")}function b(t){e.signedIn?function(){if(window.innerWidth<800)return console.log("mobile reply"),e.setReplyActive(!0),console.log("setting active comment"),console.log(e.commentObj),void e.setActiveComment(e.commentObj);o(!0)}():e.toggleSignUpOverlay(!0)}Object(r.useEffect)((function(){j()}));var g=Object(r.useState)(!1),h=Object(d.a)(g,2),x=h[0],v=h[1];function E(){return(E=Object(u.a)(m.a.mark((function t(){var n,a,r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commentObj.comment_id,a=s,r="/api/beam/".concat(e.commentObj.gallery_id,"/comment/add?reply_id=").concat(n),t.prev=3,t.next=6,fetch(r,{body:JSON.stringify({comment:a}),mode:"cors",credentials:"include",method:"post",headers:{"Content-Type":"application/json"}});case 6:return c=t.sent,t.next=9,c.json();case 9:o=t.sent,console.log(o),o.success&&(f(),e.refresh()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,14]])})))).apply(this,arguments)}function y(){return(y=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.commentObj.gallery_id,"/comment/like?comment_id=").concat(e.commentObj.comment_id),t.prev=1,t.next=4,fetch(n,{method:"POST"});case 4:200==(a=t.sent).status&&(v(!0),j()),401==a.status?e.toggleSignUpOverlay(!0):j(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}function w(){return(w=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.commentObj.gallery_id,"/comment/unlike?comment_id=").concat(e.commentObj.comment_id),t.prev=1,t.next=4,fetch(n,{method:"POST"});case 4:a=t.sent,console.log(a),200==a.status?(v(!1),j()):j(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}function j(){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.commentObj.gallery_id,"/comment/like?comment_id=").concat(e.commentObj.comment_id),t.prev=1,t.next=4,fetch(n);case 4:if(500==(a=t.sent).status&&console.log("error"),console.log("getlike response"),200!=a.status){t.next=13;break}return t.next=10,a.json();case 10:(r=t.sent).liked&&v(!0),r.liked||v(!1);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}function k(){return(k=Object(u.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.commentObj.gallery_id,"/comment/delete?comment_id=").concat(e.commentObj.comment_id),t.prev=1,t.next=4,fetch(n,{method:"DELETE",credentials:"include"});case 4:200==t.sent.status?console.log("comment deleted"):console.log("comment not deleted"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return null==e.commentObj.username?c.a.createElement(un,{className:"pt-6",id:"gallery-comment-id-".concat(e.commentObj.comment_id)},c.a.createElement("div",{className:"comment-user-info-row flex flex-row text-xs font-bold"},"comment deleted by user",c.a.createElement("span",{className:"ml-1"},$t()(e.commentObj.comment_date).fromNow())),c.a.createElement("div",{className:"",style:{}},c.a.createElement("div",{className:"comment-replies ml-6 "},Object.keys(e.commentObj.replies).map((function(t,n){return c.a.createElement(tn,{reply:!0,key:"comment-reply-".concat(n),owner:e.owner,refresh:e.refresh,commentObj:e.commentObj.replies[t]})})))),c.a.createElement(mn,{className:"horizontal-bar"})):c.a.createElement(un,{className:"pt-6",id:"gallery-comment-id-".concat(e.commentObj.comment_id)},c.a.createElement("div",{className:"comment-user-info-row flex flex-row"},c.a.createElement("div",{className:"comment-avatar mr-2",style:{borderRadius:"100%",overflow:"hidden"}},c.a.createElement("img",{src:e.commentObj.avatar_lq,style:{width:"100%",height:"100%",objectFit:"cover"},alt:""})),c.a.createElement("div",{className:"comment-header flex flex-row justify-between"},c.a.createElement("div",{className:"flex flex-row items-center"},c.a.createElement("span",{className:"text-xs font-bold pl-2"},null==e.commentObj.username?c.a.createElement("div",null,"comment deleted"):c.a.createElement(K.b,{className:"text-blue-300",to:"/user/".concat(e.commentObj.username)},c.a.createElement(sn,{owner:e.owner,user:e.commentObj.username},e.commentObj.username,c.a.createElement("span",null,e.commentObj.username==e.owner&&c.a.createElement("img",{src:en,alt:"",className:"w-2 ml-1 inline-block"}))))),c.a.createElement("span",{className:"text-xs ml-4 font-bold opacity-75"},e.commentObj.likes.length+1," points"),c.a.createElement("span",{className:"ml-2 text-xs font-bold opacity-75"},"\u2022 ",$t()(e.commentObj.comment_date).fromNow())),c.a.createElement("div",null,c.a.createElement("span",{className:"opacity-75 hover:opacity-100 ml-6"},e.commentObj.owner?c.a.createElement("button",{onClick:function(e){return function(){return k.apply(this,arguments)}()}},c.a.createElement("i",{className:"fas fa-trash"})):c.a.createElement("button",null,c.a.createElement("i",{className:"fas fa-flag fa-sm"})))))),c.a.createElement("div",{className:"",style:{}},c.a.createElement(cn,{owner:e.commentObj.owner,className:"",reply:e.reply},c.a.createElement("div",{className:"text-sm my-4"},e.commentObj.message),c.a.createElement("div",{className:"comment-interactions mt-2 flex items-center flex-row"},c.a.createElement("div",{className:"like-comment-container",title:"like this comment"},x?c.a.createElement("button",{onClick:function(e){return function(){return w.apply(this,arguments)}()}},c.a.createElement("i",{className:"fas fa-heart"})):c.a.createElement("button",{onClick:function(e){return function(){return y.apply(this,arguments)}()}},c.a.createElement("i",{className:"far fa-heart"}))),c.a.createElement("div",{className:"comment-reply-button ml-4"},c.a.createElement("button",{onClick:function(e){return b()}},c.a.createElement("i",{className:"fas fa-reply "}))))),c.a.createElement(ln,{active:a,className:"reply-container ml-6 pl-4 border-l-2 border-blue-700"},c.a.createElement("div",{className:"reply-control flex flex-row justify-between"},c.a.createElement("div",null,c.a.createElement("span",{className:"text-xs opacity-75 font-bold"},"Replying to ",e.commentObj.username)),c.a.createElement("div",null,c.a.createElement("span",null,c.a.createElement("button",{onClick:function(e){return f()}},c.a.createElement("i",{className:"fas fa-times"}))))),c.a.createElement("div",{className:" flex flex-col sm:flex-row justify-between text-white mt-3"},c.a.createElement("input",{value:s,onChange:function(e){return p(e.target.value)},type:"text",placeholder:"Reply to this comment....",className:"self-stretch inline-block"}),c.a.createElement("button",{className:"rounded-md text-black font-bold bg-green-400 py-1 px-2 text-xs sm:text-sm sm:px-4 sm:py-2 self-end",onClick:function(e){return function(){return E.apply(this,arguments)}()}},"Reply"))),c.a.createElement("div",{className:"comment-replies ml-6 "},Object.keys(e.commentObj.replies).map((function(t,n){return c.a.createElement(tn,{reply:!0,key:"comment-reply-".concat(n),owner:e.owner,refresh:e.refresh,commentObj:e.commentObj.replies[t],setActiveComment:e.setActiveComment,setReplyActive:e.setReplyActive,signedIn:e.signedIn,toggleSignUpOverlay:e.toggleSignUpOverlay})})))),c.a.createElement(mn,{className:"horizontal-bar"}))}var nn,an,rn,cn=f.b.div(Vt||(Vt=Object(i.a)(["\n  margin-bottom: 1.4rem;\n  \n"]))),on=Object(f.c)(Kt||(Kt=Object(i.a)(["\n  from{\n    opacity:0;\n    height: 0;\n    transform: translateY(-30px);\n  }\n  to{\n    opacity:1;\n    height: auto;\n    transform: translateY(0);\n  }\n"]))),ln=f.b.div(Yt||(Yt=Object(i.a)(["\n  margin-top: 12px;\n  margin-bottom: 24px;\n  background: rgba(0, 0, 0, 0.4);\n  border-radius: 12px;\n  padding: 12px 16px;\n  animation: "," 0.3s forwards;\n  display: ",";\n\n  input {\n    background: transparent;\n    outline: none;\n    border: none;\n  }\n"])),on,(function(e){return e.active?"block":"none"})),sn=f.b.div(Jt||(Jt=Object(i.a)(["\n  color: ",";\n"])),(function(e){return e.owner==e.user?e.theme.success:e.theme.secondary})),mn=f.b.div(Qt||(Qt=Object(i.a)(["\n  width: 100%;\n  height: 1px;\n  background: #373737;\n"]))),un=f.b.div(Xt||(Xt=Object(i.a)(["\n  .comment-avatar{\n    width: 32px;\n    height:32px;\n    box-shadow: 2px 2px 4px rgba(0,0,0,.4);\n  }\n\n"])));function dn(e){return Object(r.useEffect)((function(){console.log(e)}),[]),e?c.a.createElement(xn,{active:e.active,className:"fixed top-0 bottom-0 right-0 left-0 block md:hidden"},c.a.createElement("div",{className:"overlay fixed top-0 bottom-0 left-0 right-0 bg-black opacity-50"}),c.a.createElement(hn,{active:e.active,className:"bg-black"},c.a.createElement("div",null,c.a.createElement("div",{className:"top-control"},c.a.createElement("button",{onClick:function(t){return e.setReplyActive(!1)}},"close")),c.a.createElement("h3",{className:"text-white"},e.comment.message)))):c.a.createElement("div",null)}var pn,fn,bn,gn=Object(f.c)(nn||(nn=Object(i.a)(["\n    from{\n        bottom: -100vh;\n    }\n    to{\n        bottom: 0%\n    }\n"]))),hn=f.b.div(an||(an=Object(i.a)(["\n  position: fixed;\n  height: 90vh;\n  width: 100%;\n  left: 0;\n  z-index: 9999;\n  border-top-left-radius: 20px;\n  border-top-right-radius: 20px;\n  /* bottom: ","; */\n  transition: all 1s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n  animation: "," .3s cubic-bezier(0.68, -0.6, 0.32, 1.6) forwards;\n"])),(function(e){return e.active?"0%":"-100vh"}),gn),xn=f.b.div(rn||(rn=Object(i.a)(["\n  display: ",";\n"])),(function(e){return e.active?"block":"none"}));function vn(e){return c.a.createElement("div",{className:"absolute text-left right-0"},c.a.createElement("div",{className:"overlay fixed top-0 bottom-0 left-0 right-0 opacity-0 z-0",onClick:function(t){return e.toggleMenu(!1)}}),c.a.createElement("ul",{className:"relative z-20",style:{minWidth:"140px",top:"100%"}},e.sorts.map((function(t){return c.a.createElement("li",{className:"px-4 py-3 w-full hover:bg-gray-400 text-left",style:{color:"".concat(e.sortBy===t?"green":"black")}},c.a.createElement("button",{onClick:function(n){e.setSortBy(t),e.toggleMenu(!1)},className:"w-full font-extrabold text-sm text-left"},t))}))))}var En,yn=Object(A.b)((function(e){}))((function(e){var t=Object(r.useState)({}),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(0),i=Object(d.a)(l,2),s=i[0],p=i[1],f=Object(r.useState)(!1),b=Object(d.a)(f,2),g=b[0],h=b[1],x=Object(r.useState)({}),v=Object(d.a)(x,2),E=v[0],y=v[1];function w(e){y(e)}function j(e){h(e)}function O(){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="/api/beam/".concat(e.gallery_id,"/comments"),t.next=4,fetch(n);case 4:return a=t.sent,t.next=7,a.json();case 7:(r=t.sent).success&&(o(r.comments),p(r.count)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}Object(r.useEffect)((function(){O()}),[]),new $t.a;var N=Object(r.useState)(""),_=Object(d.a)(N,2),S=_[0],C=_[1];function T(){return(T=Object(u.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a="/api/beam/".concat(e.gallery_id,"/comment/add"),t.prev=2,t.next=5,fetch(a,{body:JSON.stringify({comment:S}),mode:"cors",credentials:"include",method:"post",headers:{"Content-Type":"application/json"}});case 5:return r=t.sent,t.next=8,r.json();case 8:t.sent.success&&(A(),O()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function A(){C("")}var I=Object(r.useState)(!1),D=Object(d.a)(I,2),z=D[0],F=D[1],P=Object(r.useState)("new"),R=Object(d.a)(P,2),U=R[0],L=R[1],B=Object(r.useState)([]),M=Object(d.a)(B,2),H=M[0],G=M[1];return Object(r.useEffect)((function(){console.log("RUNNING SORT"),0!=a.length&&("new"==U&&function(e){var t=Object.values(e).sort((function(e,t){return new Date(t.comment_date)-new Date(e.comment_date)}));console.log(t),G(t)}(a),"old"==U&&function(e){var t=Object.values(e).sort((function(e,t){return new Date(e.comment_date)-new Date(t.comment_date)}));console.log(t),G(t)}(a),"top"==U&&function(e){var t=Object.values(e).sort((function(e,t){return t.score-e.score}));console.log(t),G(t)}(a))}),[a,U]),c.a.createElement("div",{className:"mt-8 text-left mb-24",id:"comments"},c.a.createElement("div",{id:"add-comment-container"},c.a.createElement(wn,{onSubmit:function(e){return function(e){return T.apply(this,arguments)}(e)},className:"flex flex-col mb-4 relative",style:{borderRadius:"8px"}},e.signedIn?c.a.createElement("div",{className:"flex flex-col relative"},c.a.createElement("label",{htmlFor:"comment-input",className:"text-sm font-bold opacity-50"},"Add Comment"),c.a.createElement(jn,{onChange:function(e){return function(e){S.length<240&&C(e.target.value)}(e)},value:S,name:"new-comment",id:"comment-input",rows:"4",className:""}),c.a.createElement(Ne,null),c.a.createElement("span",{className:"text-xs mt-2 font-bold opacity-25"},S.length," / 240"),c.a.createElement("br",null),c.a.createElement("div",{id:"comment-fairness",className:"text-xs py-2 px-4 opacity-50 absolute bottom-0 left-0"},"Keep it fun and fair!"),c.a.createElement(On,{active:S.replace(/\.[^/.]+$/,"").length>0,disabled:0==S.replace(/\.[^/.]+$/,"").length,type:"submit",value:"Post",className:"font-bold"})):c.a.createElement("div",null,c.a.createElement("a",{className:"font-bold hover:text-green-400",href:"/login"},"Log in")," ","or"," ",c.a.createElement("a",{className:"font-bold hover:text-green-400",href:"/signup"},"sign up")," ","to leave a comment."))),c.a.createElement("div",{id:"comment-list",className:""},s>0&&c.a.createElement("div",{className:"flex flex-row justify-between"},c.a.createElement("div",{className:"my-4 font-bold"},s," comments"),c.a.createElement("div",{id:"comments-sort-by",className:"my-4 flex flex-row"},c.a.createElement("div",{className:"ml-3 relative"},c.a.createElement("button",{className:"outline-none focus:outline-none",onClick:function(e){return F(!z)}},c.a.createElement("div",{className:"inline-block font-bold mr-2"},U),c.a.createElement("i",{className:"fas fa-sort-down"})),z&&c.a.createElement(vn,{setSortBy:L,sortBy:U,sorts:["top","new","old"],toggleMenu:F})))),c.a.createElement(Ne,null),H.map((function(t,n){if(null==t.reply_id)return c.a.createElement(tn,{setActiveComment:w,setReplyActive:j,key:"root-comment-".concat(n),owner:e.owner,refresh:O,commentObj:t,signedIn:e.signedIn,toggleSignUpOverlay:e.toggleSignUpOverlay})})),0===H.length&&c.a.createElement("div",{className:"text-center text-2xl py-6 opacity-75 font-bold"},"Be the first to comment!")),c.a.createElement(dn,{setReplyActive:j,active:g,comment:E}))})),wn=f.b.form(pn||(pn=Object(i.a)(["\n  /* background: #373737; */\n  background: ",";\n  padding: 1.4rem 1rem;\n  border: 1px solid rgba(100, 100, 100, 0.3);\n"])),(function(e){return e.theme.background_3})),jn=f.b.textarea(fn||(fn=Object(i.a)(["\n  padding-top: 1rem;\n  resize: none;\n  background: transparent;\n  outline: none;\n  border: none;\n  width: 100%;\n"]))),On=f.b.input(bn||(bn=Object(i.a)(["\n  background: ",";\n  padding: 8px 16px;\n  color: white;\n  align-self: flex-end;\n  border-radius: 8px;\n"])),(function(e){return e.active?xe.success:xe.backgroundLight})),kn=n(19),Nn=n.n(kn);function _n(e){return c.a.createElement(An,{onClick:function(t){return e.action()},background:e.background,className:"px-6"},c.a.createElement("div",{className:"mr-3"},c.a.createElement("i",{className:"fab ".concat(e.icon)})),c.a.createElement("div",null,e.string),c.a.createElement("div",null))}var Sn,Cn,Tn,An=f.b.button(En||(En=Object(i.a)(["\n    display: flex;\n    flex-direction: row;\n    background-color: ",";\n    color: white;\n    padding: 6px 16px;\n    border-radius: 8px;\n    margin-right: 12px;\n    \n"])),(function(e){return e.background}));function In(e){return Object(r.useEffect)((function(){return document.body.classList.add("noscroll"),function(){document.body.classList.remove("noscroll")}}),[]),console.log(e),c.a.createElement(Pn,{id:"share-section",className:"fixed flex flex-col items-center justify-center top-0 bottom-0 left-0 right-0",style:{zIndex:1e3}},c.a.createElement("div",{className:"overlay cursor-pointer fixed top-0 left-0 right-0 bottom-0 z-10",onClick:function(t){return e.toggleShare(!1)}}),c.a.createElement("div",{className:"overlay cursor-pointer pointer-events-none fixed top-0 left-0 right-0 bottom-0 z-0"}),c.a.createElement(Rn,null,c.a.createElement(_n,{action:function(){var t="https://twitter.com/share?text=".concat(e.gallery.title,"&url=").concat(window.location.href);window.open(t,"TwitterWindow","width=600,height=900")},background:"rgb(29, 161, 242)",string:"twitter",icon:"fa-twitter"}),c.a.createElement(_n,{action:function(){var e="https://www.reddit.com/submit?url=".concat(window.location.href);window.open(e,"__blank")},background:"#FF5700",string:"reddit",icon:"fa-reddit"}),c.a.createElement(_n,{action:function(){var e="https://www.facebook.com/sharer/sharer.php?u=".concat(window.location.href);window.open(e,"_blank")},background:"#3b5998",string:"facebook",icon:"fa-facebook"})))}var Dn,zn,Fn=Object(f.c)(Sn||(Sn=Object(i.a)(["\n  from {\n    opacity:0;\n  }\n  to{\n    opacity: 1;\n  }\n"]))),Pn=f.b.div(Cn||(Cn=Object(i.a)(["\n  opacity: 0;\n  transition: all .2s linear;\n  animation: "," .2s linear forwards;\n  .overlay {\n    background: rgba(0, 0, 0, 0.6);\n  }\n"])),Fn),Rn=f.b.div(Tn||(Tn=Object(i.a)(["\n  background-color: ",";\n  z-index: 99;\n  position: relative;\n  color: ",";\n  border-radius: 8px;\n"])),(function(e){return e.theme.background_1}),(function(e){return e.theme.text}));function Un(e){return c.a.createElement(Mn,{id:"unfollow-alert",className:"fixed top-0 h-screen w-full right-0 left-0 flex flex-col justify-center items-center",style:{zIndex:9999}},c.a.createElement("div",{onClick:function(t){return e.cancel(!1)},className:"overlay fixed w-full top-0 bottom-0 right-0 left-0",style:{background:"rgba(0,0,0,.8)"}}),c.a.createElement("div",{className:"relative text-white",style:{width:"250px",background:"#373737"}},c.a.createElement("div",{className:"mx-6 my-5 text-sm opacity-75"},"You are about to unfollow ",e.username),c.a.createElement("hr",{className:"opacity-25"}),c.a.createElement("div",{className:"my-4 text-sm"},c.a.createElement("button",{className:"text-gray-500 mr-12 font-bold",onClick:function(t){return e.cancel(!1)}},"Cancel"),c.a.createElement("button",{className:"text-red-600 font-bold",onClick:function(t){return e.unfollow()}},"Unfollow"))))}var Ln,Bn=Object(f.c)(Dn||(Dn=Object(i.a)(["\n    from{\n        opacity:0\n    }\n    to{\n        opacity: 1\n    }\n"]))),Mn=f.b.div(zn||(zn=Object(i.a)(["\n    opacity: 0;\n    animation: "," .1s linear forwards;\n"])),Bn),Hn=n(30);function Gn(e){function t(){return(t=Object(u.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/beam/".concat(t,"/report"),e.prev=1,e.next=4,fetch(n,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:o})});case 4:a=e.sent,console.log(a.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var n=Object(r.useState)(""),a=Object(d.a)(n,2),o=a[0],l=a[1];return c.a.createElement("div",{className:"fixed top-0 bottom-0 left-0 right-0 flex flex-col items-center justify-center",style:{zIndex:999}},c.a.createElement("div",{className:"overlay fixed bg-black top-0 left-0 right-0 bottom-0 z-0",style:{opacity:.75}}),c.a.createElement("div",{className:"panel text-white z-50",style:{background:"rgba(60,60,60,1)",borderRadius:"26px"}},c.a.createElement("div",{className:"py-2",style:{borderTopLeftRadius:"26px",borderTopRightRadius:"26px",background:"".concat(xe.backgroundLight)}},c.a.createElement("h3",{className:"text-lg font-bold"},"Report Post"),c.a.createElement("p",{className:"text-sm "},'"',e.gallery.title,'"')),c.a.createElement("div",{id:"report-content",className:"px-6 py-8 flex flex-col "},c.a.createElement($n,{defaultValue:"",name:"report-reason-select",id:"report-reason",onChange:function(e){return l(e.target.value)},value:o,className:"outline-none focus:outline-none px-8"},c.a.createElement("option",{value:"Adult/Pornographic Content"},"Adult/Pornographic Content"),c.a.createElement("option",{value:"Spam, Scam, Advertising"},"Spam, Scam, Advertising"),c.a.createElement("option",{value:"Hate Speech, Discrimination, Illegal Content"},"Hate Speech, Discrimination, Illegal Content"),c.a.createElement("option",{value:"Other"},"Other"),"Other"===o&&c.a.createElement("div",{id:"report-other-reason"},c.a.createElement("textarea",{name:"",id:"",cols:"30",rows:"10"}))),c.a.createElement("button",{onClick:function(n){return function(e){return t.apply(this,arguments)}(e.gallery.gallery_id)},className:"py-4 px-8 mt-8  text-xs font-bold text-white",style:{background:"".concat(xe.error),borderRadius:"26px",whiteSpace:"nowrap"}},"Send Report"))))}var Wn,Vn,Kn,Yn,Jn,Qn,Xn,qn,Zn,$n=f.b.select(Ln||(Ln=Object(i.a)(["\n    background: ",";\n    padding: 6px 10px;\n"])),xe.backgroundLight);n(206),n(207);var ea=f.b.div(Wn||(Wn=Object(i.a)(["\n  margin-top: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.navbar_height}),(function(e){return e.theme.background_2}));f.b.div(Vn||(Vn=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  height: 60px;\n  /* background: ","; */\n"])),xe.backgroundMediumDark);function ta(e){var t=Object(V.g)();return c.a.createElement("div",{className:"sticky flex flex-col",style:{top:"64px",padding:"24px 10px"}},c.a.createElement(na,{action:function(){return document.getElementById("comments").scrollIntoView()},string:"leave a comment",icon:"fas fa-comment-alt"},c.a.createElement(le,{value:e.data.comment_count})),c.a.createElement(na,{action:e.toggleShare,string:"share gallery",icon:"fas fa-share"}),c.a.createElement(na,{action:"",string:"copy link",icon:"fas fa-link"}),c.a.createElement(na,{action:"",string:"download",icon:"fas fa-download"}),c.a.createElement(na,{action:"",string:"report",icon:"fas fa-flag"}),c.a.createElement(Ne,null),c.a.createElement("div",{className:"mb-4"}),e.data.owner&&c.a.createElement(na,{action:function(n){return t.push("/edit/beam/".concat(e.data.gallery_id))},string:"edit",icon:"fas fa-edit"}))}function na(e){return c.a.createElement(aa,{active:e.active,hoverColor:e.hoverColor,"aria-label":e.string,name:e.string,title:e.string,onClick:e.action},c.a.createElement("div",null,c.a.createElement("i",{className:"".concat(e.icon," icon"),style:{fontSize:"16px"}})),e.children)}var aa=f.b.button(Kn||(Kn=Object(i.a)(["\n  display: flex;\n  border-radius: 8px;\n  position: relative;\n  margin-bottom: 16px;\n  border: ",";\n  height: 42px;\n  width: 42px;\n  .icon {\n    color: ",";\n  }\n  background: ",";\n  color: ",";\n  /* border: 1px solid #0a0606; */\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.theme.icons}),(function(e){return e.theme.background_3}),(function(e){return e.active?e.theme.secondary:e.theme.text})),ra=f.b.div(Yn||(Yn=Object(i.a)(["\n  /* background: linear-gradient(to top right, #212121, #333) */\n  padding: 0 64px;\n  .date {\n    color: ",";\n    opacity: 0.5;\n    font-weight: bold;\n    font-size: 14px;\n  }\n  .count {\n    margin-right: 16px;\n    font-size: 14px;\n    color: ",";\n    opacity: 0.5;\n    font-weight: bold;\n  }\n  .title {\n    font-size: 28px;\n    font-weight: 600;\n    color: ",";\n  }\n  .views-and-time {\n    font-size: 12px;\n    color: ",";\n  }\n  .username{\n    font-weight:900;\n    letter-spacing: -1px;\n    color: ",";\n  }\n"])),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.text}),(function(e){return e.theme.textFaded}),(function(e){return e.theme.tertiary})),ca=f.b.div(Jn||(Jn=Object(i.a)(["\n  color: ",";\n  cursor: pointer;\n  background: ",";\n  border-radius: 8px;\n  font-size: 12px;\n  position: relative;\n  font-weight: bold;\n  padding: 6px 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: ",";\n  flex-grow: 1;\n"])),(function(e){return e.followed?e.theme.textFaded:"white"}),(function(e){return e.followed?"transparent":"linear-gradient(to top right, ".concat(e.theme.tertiary,", ").concat(e.theme.success,")")}),(function(e){return"1px solid ".concat(e.theme.border)})),oa=f.b.button(Qn||(Qn=Object(i.a)(["\n  border-radius: 3px;\n  height: 32px;\n  padding: 8px 12px;\n  color: ",";\n  i {\n    /* opacity: 0.5; */\n  }\n  :hover {\n    opacity: 0.5;\n  }\n"])),(function(e){return e.theme.secondary})),la=(Object(f.b)(oa)(Xn||(Xn=Object(i.a)(["\n  color: ",";\n"])),(function(e){return e.theme.icons})),f.b.button(qn||(qn=Object(i.a)(["\n  transition: all 0.2s linear;\n  color: ",";\n  background: ",";\n  border-radius: 8px;\n  padding: 8px 12px;\n  height: 42px;\n  .text {\n    font-size: 14px;\n    font-weight: 900;\n  }\n  :hover {\n    background: ",";\n  }\n  i {\n    font-size: 12px;\n  }\n  .fav-text {\n    font-size: 12px;\n    font-weight: bold;\n  }\n"])),(function(e){return e.active?e.theme.secondary:e.theme.text}),(function(e){return e.theme.background_3}),(function(e){return e.theme.background_4}))),ia=Object(f.b)(la)(Zn||(Zn=Object(i.a)(["\n  color: ",";\n"])),(function(e){return e.active?e.theme.error:e.theme.text}));var sa,ma,ua={toggleSignUpOverlay:O},da=Object(A.b)((function(e){return{signUpOverlay:e.app_state_reducer.signUpOverlay}}),ua)((function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(null),i=Object(d.a)(l,2),s=i[0],f=i[1],b=Object(r.useState)(!1),g=Object(d.a)(b,2),h=g[0],x=g[1],v=Object(r.useState)(null),E=Object(d.a)(v,2),y=(E[0],E[1]),w=Object(r.useState)(!1),j=Object(d.a)(w,2),O=j[0],k=(j[1],Object(r.useState)(0)),N=Object(d.a)(k,2),_=N[0],S=N[1],C=Object(r.useState)(!1),T=Object(d.a)(C,2),A=T[0],I=T[1];function D(){X.a.set(e.match.params.gallery_id,"",{expires:.5});var t=X.a.get("recent"),n=[];if(t&&(n=Object(It.a)(JSON.parse(t)),console.log(n)),n.includes(e.match.params.gallery_id)||n.push(e.match.params.gallery_id),n.length>100){for(var a=n.length-100,r=0;r<a;r++)n.shift();n.slice()}X.a.set("recent",JSON.stringify(n))}function z(){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("requesting gallery"),t.prev=1,t.next=4,fetch("/api/beam/".concat(e.match.params.gallery_id),{credentials:"include"});case 4:if(200!=(n=t.sent).status){t.next=17;break}return t.next=8,n.json();case 8:a=t.sent,console.log(a),o(!1),U(a),x(!0),L(a.username),D(),t.next=19;break;case 17:console.log(n.status),o(!0);case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(1),console.log(t.t0),o(!0);case 25:case"end":return t.stop()}}),t,null,[[1,21]])})))).apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.match.params.gallery_id,"/favoritescount"),t.prev=1,t.next=4,fetch(n);case 4:if(200!=(a=t.sent).status){t.next=11;break}return t.next=8,a.json();case 8:r=t.sent,console.log(r),S(r);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function U(e){f(e)}function L(e){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/user/".concat(t),e.prev=1,e.next=4,fetch(n);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,y(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}Object(r.useEffect)((function(){z(),De(),Z(),P()}),[]),Object(r.useEffect)((function(){(null===s||void 0===s?void 0:s.username)&&L(s.username)}),[s]);var M=Object(r.useState)(!1),H=Object(d.a)(M,2),W=H[0],V=H[1],Y=Object(r.useState)(!1),J=Object(d.a)(Y,2),Q=J[0],q=J[1];function Z(){return $.apply(this,arguments)}function $(){return($=Object(u.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.match.params.gallery_id,"/vote"),t.prev=1,t.next=4,fetch(n,{credentials:"include",method:"get"});case 4:if(500!=(a=t.sent).status){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,a.json();case 9:(r=t.sent).voted?(console.log(r),V(!0),q(r.type),z()):(V(!1),z()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function ee(){return(ee=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Q||!W){t.next=3;break}return ne(),t.abrupt("return");case 3:return n="/api/beam/".concat(e.match.params.gallery_id,"/upvote"),t.prev=4,t.next=7,fetch(n,{credentials:"include",method:"post"});case 7:a=t.sent,console.log(a.status),401==a.status&&e.toggleSignUpOverlay(!0),Z(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})))).apply(this,arguments)}function te(){return(te=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Q||!W){t.next=3;break}return ne(),t.abrupt("return");case 3:return n="/api/beam/".concat(e.match.params.gallery_id,"/downvote"),t.prev=4,t.next=7,fetch(n,{credentials:"include",method:"post"});case 7:a=t.sent,console.log(a.status),401==a.status&&e.toggleSignUpOverlay(!0),Z(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})))).apply(this,arguments)}function ne(){return ae.apply(this,arguments)}function ae(){return(ae=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.match.params.gallery_id,"/vote"),t.prev=1,t.next=4,fetch(n,{credentials:"include",method:"delete"});case 4:a=t.sent,console.log(a.status),401==a.status&&e.toggleSignUpOverlay(!0),Z(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}var re=Object(r.useState)(!1),ce=Object(d.a)(re,2),oe=ce[0],le=ce[1],ie=Object(r.useState)(!1),se=Object(d.a)(ie,2),me=se[0],ue=se[1];function de(e){window.innerWidth>600&&(le(e),ue(!0))}var pe=Object(r.useState)(!1),fe=Object(d.a)(pe,2),be=(fe[0],fe[1],Object(r.useState)(!1)),ge=Object(d.a)(be,2),he=ge[0],xe=ge[1],ve=Object(r.useState)(!1),Ee=Object(d.a)(ve,2),ye=Ee[0],we=Ee[1];function je(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(u.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return we(!1),n="/api/user/".concat(s.username,"/follow"),t.prev=2,t.next=5,fetch(n,{method:"post",credentials:"include"});case 5:if(401!=(a=t.sent).status){t.next=10;break}return console.log("Unauthorized"),e.toggleSignUpOverlay(),t.abrupt("return");case 10:if(200!=a.status){t.next=16;break}return t.next=13,a.json();case 13:r=t.sent,console.log(r),xe(r);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),console.log(t.t0);case 21:case"end":return t.stop()}}),t,null,[[2,18]])})))).apply(this,arguments)}function ke(){return(ke=Object(u.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching follow status"),e.prev=1,t="/api/user/".concat(s.username,"/following"),e.next=5,fetch(t,{credentials:"include"});case 5:if(200!=(n=e.sent).status){e.next=11;break}return e.next=9,n.json();case 9:a=e.sent,xe(a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}Object(r.useEffect)((function(){s&&function(){ke.apply(this,arguments)}()}),[s]);var Ne=Object(r.useState)(!1),_e=Object(d.a)(Ne,2);_e[0],_e[1];var Se=Object(r.useState)(!1),Ce=Object(d.a)(Se,2),Te=Ce[0],Ae=Ce[1];function Ie(){return(Ie=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("favoriting"),n="/api/beam/".concat(e.match.params.gallery_id,"/favorite"),t.prev=2,t.next=5,fetch(n,{method:"POST"});case 5:200==(a=t.sent).status&&Object(p.b)("".concat(Te?"Removed from favorites":"Added to favorites!"),{position:"bottom-right",hideProgressBar:!0,autoClose:1e3}),401==a.status&&e.toggleSignUpOverlay(),De(),P(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function De(){return ze.apply(this,arguments)}function ze(){return(ze=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.match.params.gallery_id,"/favorite"),t.prev=1,t.next=4,fetch(n);case 4:if(200!=(a=t.sent).status){t.next=8;break}return Ae(!0),t.abrupt("return");case 8:401==a.status&&Ae(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}return a?c.a.createElement("div",{className:"text-white font-bold mt-24"},"error"):s?c.a.createElement(ea,{className:"relative  pt-12",id:"gallery-page",style:{zIndex:99}},c.a.createElement(Hn.a,null,c.a.createElement("meta",{charset:"utf-8"}),c.a.createElement("title",null,"".concat(s.title," - ImgBeam, Capital of Memeland")),c.a.createElement("meta",{name:"description",content:"".concat(s.description)}),c.a.createElement("meta",{name:"image",content:s.images[0].path}),c.a.createElement("meta",{itemprop:"name",content:"".concat(s.title," - ImgBeam, Capital of Memeland")}),c.a.createElement("meta",{itemprop:"description",content:"".concat(s.description)}),c.a.createElement("meta",{itemprop:"image",content:s.images[0].path}),c.a.createElement("meta",{name:"twitter:card",content:"summary"}),c.a.createElement("meta",{name:"twitter:title",content:"".concat(s.title," - ImgBeam, Capital of Memeland")}),c.a.createElement("meta",{name:"twitter:description",content:"".concat(s.description)}),c.a.createElement("meta",{name:"twitter:image:src",content:s.images[0].path}),c.a.createElement("meta",{name:"og:title",content:"".concat(s.title," - ImgBeam, Capital of Memeland")}),c.a.createElement("meta",{name:"og:description",content:"".concat(s.description)}),c.a.createElement("meta",{name:"og:image",content:s.images[0].path}),c.a.createElement("meta",{name:"og:type",content:"website"})),c.a.createElement(p.a,null),ye&&c.a.createElement(Un,{username:s.username,cancel:we,unfollow:je}),c.a.createElement("div",{className:"absolute h-full z-50  top-0",style:{paddingTop:"64px",right:"32px"}},c.a.createElement(ta,{toggleShare:I,data:s})),c.a.createElement(ra,{id:"app-gallery",className:"container mx-auto text-left  justify-center  flex flex-col relative"},me&&c.a.createElement(G,{image:oe,gallery_id:e.match.params.gallery_id,closeFocus:function(){console.log("closing focus"),ue(!1)}}),c.a.createElement("div",{id:"content-wrap",className:"relative flex flex-1 mx-auto container flex-col ",style:{maxWidth:"780px"}},c.a.createElement("div",{id:"info-wrap",className:"mx-auto",style:{width:"100%"}},c.a.createElement("div",{className:"title-wrap mb-4"},c.a.createElement("div",{className:" title",style:{}},s.title)),c.a.createElement("div",{className:"flex flex-row",style:{height:"48px"}},c.a.createElement("div",{className:"left flex flex-row flex-1 items-center"},c.a.createElement("div",{className:"avatar-wrap h-full mr-2",style:{borderRadius:"100%",overflow:"hidden",width:"38px",height:"38px",boxShadow:"2px 2px 4px -2px rgba(0,0,0,.6)"}},c.a.createElement(K.b,{to:"/user/".concat(s.username)},c.a.createElement("img",{src:s.avatar_lq,style:{width:"100%",height:"100%",objectFit:"cover"},alt:""}))),c.a.createElement("div",null,c.a.createElement("div",{className:"flex flex-row items-center text-sm"},c.a.createElement(K.b,{to:"/user/".concat(s.username)},c.a.createElement("div",{className:"mr-2 username"},s.username))),c.a.createElement("div",{className:"views-and-time"},s.views," views")),c.a.createElement("div",{className:"ml-4"},c.a.createElement(ca,{id:"follow-button",followed:he,onClick:function(e){return je()}},he?"Following":"Follow"))),c.a.createElement("div",{className:"right flex flex-row items-center"},c.a.createElement("div",{className:"mr-4"},c.a.createElement(la,{active:Te,onClick:function(e){return function(){return Ie.apply(this,arguments)}()},className:"flex flex-row items-center"},c.a.createElement("i",{className:"".concat(Te?"fas":"far"," fa-heart block")}),c.a.createElement("div",{className:"fav-text ml-2"},Te?_:"Favorite"))),c.a.createElement("div",{className:"flex flex-row justify-end",style:{}},(!W||W&&Q)&&c.a.createElement(la,{active:W&&Q,onClick:function(e){return function(){return ee.apply(this,arguments)}()},className:"flex flex-row items-center mr-2"},c.a.createElement("i",{className:"".concat(W&&Q?"fas":"far"," fa-thumbs-up block")}),W&&Q&&c.a.createElement("div",{className:"text ml-2"},s.upvotes-s.downvotes+1)),(!W||W&&!Q)&&c.a.createElement(ia,{active:W&&!Q,onClick:function(e){return function(){return te.apply(this,arguments)}()},className:"flex flex-row items-center"},c.a.createElement("i",{className:"".concat(W&&!Q?"fas":"far"," fa-thumbs-down block")}),W&&!Q&&c.a.createElement("div",{className:"text ml-2"},s.upvotes-s.downvotes+1)))))),c.a.createElement("div",{className:"flex flex-col  relative w-full mt-4",style:{}},h&&"video"===s.images[0].media_type&&c.a.createElement(Lt,{string:s.images[0].path,key:"gallery-image-0",image:s.images[0],description:s.images[0].description,focusImage:de}),h&&"image"===s.images[0].media_type&&c.a.createElement(Ut,{string:s.images[0].path,image:s.images[0],gallery:s.images[0].gallery_id,focusImage:de,description:s.images[0].description,key:"gallery-image-0"}),c.a.createElement("div",{className:"description"},s.description&&c.a.createElement("div",{className:"text-lg font-semibold"},s.description),c.a.createElement("div",{className:"flex flex-row mt-6"},c.a.createElement("div",{className:"count"},s.images.length," items"),c.a.createElement("div",{className:"date"},"- Posted ",$t()(s.date_created).fromNow()))),c.a.createElement("div",{id:"tags-wrapper"},c.a.createElement(Wt,{gallery_id:e.match.params.gallery_id})),h&&s.images.map((function(e,t){return 0==t?null:"video"===e.media_type?c.a.createElement(Lt,{string:e.path,key:"gallery-image-".concat(t),image:e,description:e.description,focusImage:de}):c.a.createElement(Ut,{string:e.path,image:e,gallery:e.gallery_id,focusImage:de,description:e.description,key:"gallery-image-".concat(t)})}))),A&&c.a.createElement(In,{gallery:s,toggleShare:I}),c.a.createElement("div",{id:"comments-wrapper"},s.comments_enabled&&c.a.createElement(yn,{owner:s.username,toggleSignUpOverlay:e.toggleSignUpOverlay,signedIn:e.signedIn,gallery_id:e.match.params.gallery_id})),c.a.createElement("div",{id:"more-like-this"}))),O&&c.a.createElement(Gn,{gallery:s})):c.a.createElement("div",{className:"w-full pt-24 flex flex-col justify-center items-center mx-auto",style:{zIndex:99}},c.a.createElement(Nn.a,{size:20,color:"white"}))})),pa=n.p+"static/media/avatar.b078c2bf.png",fa=n.p+"static/media/user_bg.41fa57bd.jpg";n(208);f.b.div(sa||(sa=Object(i.a)(["\n  height: 200px;\n  overflow: hidden;\n  /* background: black; */\n\n  .overlay {\n    opacity: 0;\n    background: rgba(255,255,255,.3);\n  }\n  .image {\n    /* transform: scale(1.01); */\n    transition: all 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n  }\n  .video {\n    /* border-radius: 8px; */\n    transition: all 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n  }\n\n  :hover {\n    box-shadow: 0 0 12px #6134da;\n    .overlay{\n      opacity: .2\n    }\n    .image {\n      transform: scale(1.2);\n    }\n    .video {\n      transform: scale(1.2);\n    }\n  }\n\n  .react-player {\n    height: 100%;\n  }\n  .react-player video {\n    position: relative;\n    left: 0;\n    top: 0;\n    transform: none;\n    object-fit: cover;\n  }\n"]))),f.b.div(ma||(ma=Object(i.a)(['\n  position: relative;\n  /* border-radius: 8px; */\n  /* background: #353535; */\n  /* box-shadow: 0 0 6px rgba(0,0,0,.4); */\n  z-index: 2;\n  ::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 99;\n    background: white;\n    opacity: 0;\n    pointer-events: none;\n    transition: all 0.1s linear;\n  }\n\n  .title {\n    padding-left: 0px;\n    transition: all 0.2s linear;\n  }\n  /* @media (max-width: 640px) {\n    width: 100%;\n    height: 460px;\n  }\n  @media (min-width: 640px) {\n    height: 260px;\n  } */\n  :hover {\n    .title {\n      padding-left: 8px;\n    }\n    :after {\n      /* opacity: 0.1; */\n    }\n    .favorites-wrapper {\n      opacity: 1;\n    }\n  }\n  .favorites-wrapper {\n    opacity: 0;\n    transition: all 0.1s linear;\n  }\n'])));var ba,ga,ha=n(152);function xa(e){var t=e.gallery.images[0].width,n=e.gallery.images[0].height,a=Object(ha.a)({threshold:.5}),r=a.ref,o=a.inView;a.entry;return c.a.createElement(ja,{className:"relative mb-4 "},c.a.createElement("div",{onDragStart:function(t){return e.setDragged?e.setDragged(t.currentTarget.id):null},draggable:e.draggable,onDrop:function(e){return console.log("beign dropped")},id:"brick-".concat(e.gallery.gallery_id),className:"bg-white relative",style:{overflow:"hidden",paddingTop:"".concat(n/t*100||100,"%")}},c.a.createElement(K.b,{to:"/beam/".concat(e.gallery.gallery_id),className:"h-full block absolute  top-0 right-0 left-0 bottom-0",style:{}},c.a.createElement("div",{className:"absolute overlay top-0 left-0 right-0 bottom-0 z-10 flex flex-col justify-end"},c.a.createElement("div",{className:"p-4",style:{background:"linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,.4))"}},c.a.createElement("div",{className:"content w-full flex flex-row"},c.a.createElement("div",{className:"mr-3",style:{width:"28px",height:"28px",borderRadius:"100%",overflow:"hidden"}},c.a.createElement("img",{src:e.gallery.avatar_lq,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})),c.a.createElement("div",{className:"text-sm font-extrabold"},e.gallery.username)))),"image"==e.gallery.images[0].media_type?c.a.createElement("div",{className:"media-container media absolute top-0 bottom-0 left-0 right-0",style:{}},c.a.createElement("img",{src:e.gallery.images[0].path_lq,className:"absolute block object-cover top-0 left-0 right-0 bottom-0",style:{width:"100%",height:"100%"},alt:""}),c.a.createElement("div",{className:"absolute bottom-0 right-0 z-50 p-3"},e.gallery.singleton?c.a.createElement("div",null):c.a.createElement("div",{className:"px-2 py-1 text-white text-xs rounded-md",style:{background:"rgba(0,0,0,.5)"}},e.gallery.images.length))):c.a.createElement("div",{className:"absolute media-container media object-cover top-0 left-0 right-0 bottom-0"},c.a.createElement("video",{ref:r,id:"video-".concat(e.gallery.gallery_id),src:e.gallery.images[0].path_lq,preload:"none",muted:!0,loop:!0,autoPlay:o,onError:function(t){return document.getElementById("video-".concat(e.gallery.gallery_id)).parentElement.remove()},className:"absolute object-cover top-0 left-0 right-0 bottom-0",style:{width:"100%",height:"100%"}}),c.a.createElement("div",{className:"absolute bottom-0 right-0 pr-3 pb-2 opacity-50"},c.a.createElement("i",{className:"fas fa-video"}))),e.favoriteMode&&c.a.createElement(va,null))),c.a.createElement(K.b,{to:"/beam/".concat(e.gallery.gallery_id)},c.a.createElement("div",{className:"brick-info items-start flex-col",style:{display:"".concat(e.favoriteMode?"none":"flex")}},c.a.createElement("div",{className:"title text-left mt-2"},e.gallery.title),c.a.createElement("div",{className:"brick-stats mt-1 flex flex-row"},c.a.createElement("div",{className:"flex flex-row items-center mr-3"},c.a.createElement("i",{class:"fas fa-caret-square-up mr-1 fa-sm"}),c.a.createElement("div",{className:"text-xs font-extrabold"},e.gallery.upvotes-e.gallery.downvotes+1||0)),c.a.createElement("div",{className:"flex flex-row items-center"},c.a.createElement("i",{class:"fas fa-eye mr-1 fa-sm"}),c.a.createElement("div",{className:"text-xs font-extrabold"},e.gallery.views))))))}function va(e){return c.a.createElement(wa,{className:"absolute  z-50 left-0 top-0 bottom-0 right-0"},c.a.createElement("div",{className:"top-0 left-0 right-0 favorite-controls flex flex-row justify-between"},c.a.createElement("div",null,c.a.createElement("button",{className:"p-3",onClick:function(e){return e.preventDefault()}},c.a.createElement("i",{className:"far fa-square text-white"}))),c.a.createElement("div",null,c.a.createElement("button",{className:"p-3",onClick:function(e){return e.preventDefault()}},c.a.createElement("i",{className:"fas fa-trash text-white"})))))}var Ea,ya,wa=f.b.div(ba||(ba=Object(i.a)(["\n  background-color: rgba(0, 0, 0, 0);\n  .favorite-controls {\n    visibility: hidden;\n  }\n  :hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    .favorite-controls {\n      visibility: visible;\n    }\n  }\n"]))),ja=f.b.div(ga||(ga=Object(i.a)(["\n  /* max-height: 600px; */\n  /* box-shadow: 0 0 8px rgba(0,0,0,.3); */\n  /* border: ","; */\n  box-shadow: 0 4px 8px -4px rgba(0,0,0,.6);\n  box-sizing: border-box;\n  overflow: hidden;\n  border-radius: 8px;\n  .overlay {\n    color: white;\n    transition: all 0.3s linear;\n    font-weight: bold;\n    opacity: 0;\n    pointer-events: none;\n    transform: translateY(20px);\n    background: linear-gradient(\n      to bottom,\n      rgba(0, 0, 0, 0) 60%,\n      rgba(0, 0, 0, 0.7) 100%\n    );\n  }\n  .media-container {\n    /* border-radius: 8px; */\n    overflow: hidden;\n  }\n  .media {\n    transition: all 0.2s cubic-bezier(0.68, -0.3, 0.32, 1.3);\n  }\n  .brick-info {\n    transition: all 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n    height: 64px;\n    overflow: hidden;\n    background: ",";\n    padding: 2px 12px;\n    /* border-bottom-left-radius: 8px; */\n    /* border-bottom-right-radius: 8px; */\n  }\n  .brick-stats {\n    color: ",";\n  }\n  .title {\n    font-size: 14px;\n    font-weight: 600;\n    color: ",";\n  }\n  :hover {\n    .overlay {\n      opacity: 1;\n      transform: translateY(0);\n    }\n    /* .brick-info {\n      height: 42px;\n      margin-top: 8px;\n      padding: 4px 12px;\n    } */\n    .media {\n      transform: scale(1.1);\n    }\n  }\n"])),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.theme.background_3}),(function(e){return e.theme.icons_2}),(function(e){return e.theme.text}));var Oa,ka=f.b.div(Ea||(Ea=Object(i.a)(["\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  padding: 10px;\n"]))),Na=f.b.button(ya||(ya=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 3px;\n  padding: 8px;\n  color: black;\n  background: white;\n"]))),_a={toggleSidebar:g},Sa=Object(A.b)((function(e){return{sidebar:e.app_state_reducer.sidebar}}),_a)((function(e){var t=Object(r.useState)(!0),n=Object(d.a)(t,2),a=n[0],o=n[1],l=J()(s,200);function i(){window.scrollY<50&&o(!0),window.scrollY>50&&o(!1)}function s(){window.innerWidth<600&&(console.log("window"),e.toggleSidebar(!1)),b!==p&&f(b)}Object(r.useEffect)((function(){return window.addEventListener("resize",l),document.addEventListener("scroll",i),function(){document.removeEventListener("scroll",i),window.removeEventListener("resize",l)}}),[]),Object(r.useEffect)((function(){s()}),[e.sidebar]);var m=Object(r.useState)(b()),u=Object(d.a)(m,2),p=u[0],f=u[1];function b(){var t=window.innerWidth-(e.sidebar?225:0)-64,n=parseInt((t/300).toFixed(0));return t<640&&(console.log("mobile"),n=1),n}var g=Object(r.useState)([]),h=Object(d.a)(g,2),x=h[0],v=h[1];function E(e){for(var t=p,n=[],a=0;a<t;a++)n[a]=new Array;e.forEach((function(e,t){var a,r,c=(null===(a=e.images[0])||void 0===a?void 0:a.height)/(null===(r=e.images[0])||void 0===r?void 0:r.width);isNaN(c)&&(c=1);var o=c,l=[];n.forEach((function(e){var t=function(e){var t=0;return e.forEach((function(e){t+=e.height})),t}(e);l.push(t)}));var i=0;l.forEach((function(e,t){0!==t&&e<l[i]&&(i=t)})),e.height=o,n[i].push(e)})),v(n)}return Object(r.useEffect)((function(){E(e.galleries)}),[p]),Object(r.useEffect)((function(){E(e.galleries)}),[e.galleries]),c.a.createElement("div",{className:"relative mt-6 w-full flex flex-row justify-center",id:"super-grid",style:{paddingTop:"".concat(e.title?"48px":"0")}},c.a.createElement("div",{id:"grid-title",className:"absolute top-0 mx-auto text-xl font-bold flex flex-row justify-between",style:{width:1==p?"calc(100% - 16px)":"".concat(256*p,"px")}},c.a.createElement("div",{className:"font-extrabold"},e.title)),x===[]?x.map((function(e,t){return c.a.createElement("div",{id:"grid-column-container",key:"home-grid-column-".concat(t),className:"mx-2 sm:mx-0 ",style:{float:"left",width:1==p?"calc(100% - 16px)":"240px",marginLeft:"".concat(0!==t?"16px":0)}})})):x.map((function(t,n){return c.a.createElement("div",{id:"grid-column-container",key:"home-grid-column-".concat(n),className:"mx-2 sm:mx-0 mt-4 md:mt-0 flex-0",style:{float:"left",width:1==p?"calc(100% - 16px)":"240px",marginLeft:"".concat(0!==n?"16px":0)}},t.map((function(t,a){return c.a.createElement(xa,{favoriteMode:e.favoritesMode,setDragged:e.setDragged,draggable:e.draggable,usernames:e.usernames,avatars:e.avatars,tile:"tile-id-".concat(n,"-").concat(a),key:"home-grid-gallery-tile-".concat(t.gallery_id),gallery:t})})))})),c.a.createElement(ka,{id:"top-button",className:"relative z-50 ".concat(a?"hidden":"block"),top:a},c.a.createElement(Na,{onClick:function(e){window.scrollTo(0,0)}},c.a.createElement("i",{className:"fas fa-angle-double-up mx-3"}))))}));function Ca(e){Object(r.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]);var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1];function l(){return(l=Object(u.a)(m.a.mark((function t(){var n,r,c,l,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length,r=n+100,c="/api/user/".concat(e.username,"/galleries?from=").concat(n,"&to=").concat(r),t.prev=3,t.next=6,fetch(c);case 6:if(200!==(l=t.sent).status){t.next=13;break}return t.next=10,l.json();case 10:i=t.sent,console.log(i),o([].concat(Object(It.a)(a),Object(It.a)(i)));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[3,15]])})))).apply(this,arguments)}return a.length?c.a.createElement("div",{className:"text-white container mx-auto flex items-center justify-center"},c.a.createElement(Sa,{usernames:!1,galleries:a,avatars:!1})):c.a.createElement("div",{className:"text-white font-bold py-24"},c.a.createElement("h2",{className:"text-2xl  opacity-75 "},"Well, this is awkward..."),c.a.createElement("h4",{className:"opacity-50 text-base"},"there are no posts"))}function Ta(e){Object(r.useEffect)((function(){x()}),[]);var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(!1),i=Object(d.a)(l,2),s=i[0],p=i[1],f=Object(r.useState)(!1),b=Object(d.a)(f,2),g=b[0],h=b[1];function x(){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(m.a.mark((function t(){var n,r,c,l,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length,r=n+20,c="/api/user/".concat(e.username,"/comments?from=").concat(n,"&to=").concat(r),t.prev=3,h(!0),t.next=7,fetch(c,{mode:"cors"});case 7:return l=t.sent,t.next=10,l.json();case 10:(i=t.sent).success&&(console.log(i.comments),o([].concat(Object(It.a)(a),Object(It.a)(i.comments))),E(n,r,i.comments),h(!1)),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0),h(!1);case 18:case"end":return t.stop()}}),t,null,[[3,14]])})))).apply(this,arguments)}function E(e,t,n){n<t-e&&p(!0)}return 0==a.length?c.a.createElement("div",{className:"mt-24 font-bold opacity-75  text-2xl"},"User has no comments.",c.a.createElement("p",{className:"text-base opacity-50 "},"It's quiet... Too quiet...")):c.a.createElement(Aa,{className:"text-left"},a.map((function(t,n){return c.a.createElement(K.b,{className:"",to:"/beam/".concat(t.gallery_id,"?comment_id=").concat(t.comment_id)},c.a.createElement("div",{key:"user-page-comments-history-key-".concat(n),className:"mb-3 comment pb-3 hover:border-gray-500 hover:border-opacity-25 border-2 border-transparent",style:{overflow:"hidden",borderRadius:"8px",boxShadow:"2px 2px 3px rgba(0,0,0,.3)"}},c.a.createElement("div",{className:"comment-gallery-info pt-3 ml-3"},c.a.createElement("div",{className:"comment-gallery-info-userinfo text-xs"},c.a.createElement("div",null,c.a.createElement("span",{className:"",style:{}},e.username),t.reply?c.a.createElement("span",{className:"mr-1"}," replied to a comment in"):c.a.createElement("span",{className:"mr-1"}," posted a comment in"),c.a.createElement(K.b,{className:"font-bold mr-1 hover:underline",style:{},to:"/beam/".concat(t.gallery_id)},t.gallery_title),"from u/",t.gallery_username,c.a.createElement("span",{className:"ml-1"},$t()(t.gallery_date_created).fromNow()))),c.a.createElement("div",{className:"comment-gallery-info-title text-xl font-bold"})),c.a.createElement("hr",{className:"mx-4 my-4 opacity-25"}),t.reply&&c.a.createElement("div",{className:"comment-reply-prefix mx-6 p-2 text-sm",style:{background:"rgba(200,200,200,.3)"}},c.a.createElement("div",{className:"comment-prefix-user text-xs font-bold"},c.a.createElement(K.b,{className:"hover:underline",to:"/user/".concat(t.reply.username)},c.a.createElement("span",{className:"opacity-50"},"u/"),c.a.createElement("span",{className:"",style:{color:"rgb(74, 212, 147)"}},t.reply.username)),c.a.createElement("span",{className:"ml-1"},"- ",$t()(t.comment_date).fromNow())),c.a.createElement("div",{className:"comment-prefix-message"},t.reply.message)),c.a.createElement("div",{className:"comment-content mt-3 mx-6 text-sm"},c.a.createElement("div",{className:"comment-content-user font-bold"},t.username),c.a.createElement("div",{className:"comment-content-message"},t.message)),c.a.createElement("div",{className:"user-page-comment-control"},c.a.createElement("ul",null)),c.a.createElement("div",{className:"user-page-comment-controls text-xs ml-6 mt-4 opacity-50 font-bold"},c.a.createElement("span",{className:"hover:underline mr-2"},c.a.createElement("i",{class:"fas fa-reply mr-1"})," reply"),c.a.createElement("span",{className:"hover:underline",onClick:function(e){return function(e,t){e.preventDefault();var n=document.createElement("textarea");document.body.appendChild(n),n.value=t,n.select(),document.execCommand("copy"),document.body.removeChild(n)}(e,"https://www.imgbeam.com/beam/".concat(t.gallery_id,"?comment_id=").concat(t.comment_id))}},"share"))))})),s?c.a.createElement("div",null):c.a.createElement("div",{className:"mt-3 flex flex-row justify-around",style:{borderRadius:"8px",height:"50px"}},c.a.createElement("button",{className:"w-full  p-3 flex flex-row justify-around",onClick:function(e){return x()}},g?c.a.createElement(Nn.a,{size:20}):c.a.createElement("span",null,"more"))))}var Aa=f.b.div(Oa||(Oa=Object(i.a)(["\n  color: ",";\n  .comment{\n    background: ","\n  }\n"])),(function(e){return e.theme.text}),(function(e){return e.theme.background_1}));function Ia(){return c.a.createElement("div",null)}function Da(e){return c.a.createElement("div",{className:"container justify-center mx-auto text-left flex flex-row pt-4"},c.a.createElement("div",{id:"user-about-description",className:"",style:{flex:"2"}},c.a.createElement("h3",{className:"font-bold"},"Description"),c.a.createElement("p",{className:"mt-4"},e.user.description||c.a.createElement("div",{className:"",style:{color:"".concat(xe.textFaded)}},"No Description Yet"))),c.a.createElement("div",{className:"right-stats flex-1",style:{}},c.a.createElement("div",{className:"date"},c.a.createElement("h4",null,"Member Since"),c.a.createElement("p",null,$t()(e.user.member_since).format("MMM D yyyy"))),c.a.createElement("div",{className:"total-views mt-4"},c.a.createElement("h4",null,"Total Views"),c.a.createElement("p",null,"0"))))}var za,Fa=n.p+"static/media/default_background.eb7ed319.jpg",Pa=n(63),Ra=n.n(Pa);function Ua(e){var t=Object(r.useState)(null),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(""),i=Object(d.a)(l,2),s=i[0],p=i[1],f=Object(r.useState)(!1),b=Object(d.a)(f,2),g=b[0],h=b[1];function x(){return(x=Object(u.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),(n=new FormData).append("backdrop",a),t.prev=3,"/api/account/settings/backdrop/update",t.next=7,fetch("/api/account/settings/backdrop/update",{credentials:"include",method:"POST",body:n});case 7:200===t.sent.status&&(e.pulldata(),e.toggleMenu(!1)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),h(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}return g?c.a.createElement("div",{className:"fixed text-white top-0 bottom-0 left-0 right-0 flex flex-col items-center justify-center",style:{zIndex:99}},c.a.createElement("div",{className:"overlay fixed top-0 bottom-0 left-0 right-0 z-0",onClick:function(t){return e.toggleMenu(!1)},style:{background:"rgba(0,0,0,.7)"}}),c.a.createElement("div",{className:"panel z-10 overflow-hidden flex flex-col items-center justify-center",style:{borderRadius:"26px",minWidth:"260px",minHeight:"160px",backgroundColor:"".concat(xe.backgroundMedium)}},c.a.createElement(Ra.a,{color:"white"}))):c.a.createElement("div",{className:"fixed text-white top-0 bottom-0 left-0 right-0 flex flex-col items-center justify-center",style:{zIndex:99}},c.a.createElement("div",{className:"overlay fixed top-0 bottom-0 left-0 right-0 z-0",onClick:function(t){return e.toggleMenu(!1)},style:{background:"rgba(0,0,0,.7)"}}),c.a.createElement("div",{className:"panel z-10 overflow-hidden",style:{borderRadius:"26px",backgroundColor:"".concat(xe.backgroundMedium)}},c.a.createElement("div",{className:"py-2 font-extrabold flex flex-col items-center justify-center",style:{background:"rgba(80,80,80,.1)",borderRadius:"26px",height:"50px"}},c.a.createElement("div",null,"Choose Banner")),c.a.createElement("div",{className:"mx-8",style:{borderRadius:"26px",boxShadow:" 2px 2px 8px rgba(0,0,0,.3)"}},c.a.createElement("div",{id:"banner-preview"},c.a.createElement("div",{className:"mt-4 overflow-hidden",style:{maxWidth:"420px",minWidth:"420px",borderTopLeftRadius:"26px",borderTopRightRadius:"26px"}},c.a.createElement("img",{src:""===s?e.backdrop||Fa:s,alt:"",style:{width:"100%",height:"100%",objectFit:"contain",filter:"".concat(""===s?"grayscale(1)":"grayscale(0)")}}))),c.a.createElement("div",{className:"flex flex-row font-bold text-sm overflow-hidden justify-between",style:{minHeight:"120px",borderBottomLeftRadius:"26px",borderBottomRightRadius:"26px"}},c.a.createElement("div",{className:"flex-grow w-1/2"},c.a.createElement("label",{htmlFor:"backdrop-select",className:"text-white flex-col w-full h-full flex items-center justify-center",style:{backgroundColor:"rgba(70,70,70,.4)"}},"Select"),c.a.createElement("input",{type:"file",name:"backdrop-select",className:"hidden",id:"backdrop-select",onChange:function(e){return function(e){var t=e.target.files[0];console.log(t),o(t);var n=new FileReader;n.readAsDataURL(t),n.onload=function(e){p(e.target.result)}}(e)}})),c.a.createElement("div",{className:"flex-grow w-1/2"},c.a.createElement("label",{htmlFor:"backdrop-select",className:" text-white flex-col w-full h-full flex items-center justify-center",style:{backgroundColor:"rgba(70,70,70,.3)"}},c.a.createElement("div",{className:"px-12 py-8",style:{border:"1px dashed rgba(170,170,170,.4)",borderBottomRightRadius:"16px"}},"Drop Here"))))),c.a.createElement("div",{className:"control-wrap text-white flex-row flex justify-end items-center mr-8 mb-4"},c.a.createElement("button",{onClick:function(t){return e.toggleMenu(!1)},className:"font-extrabold my-3 py-3 px-4 mx-3 opacity-50",style:{color:"".concat(xe.textFaded)}},"cancel"),c.a.createElement("button",{onClick:function(e){return function(){return x.apply(this,arguments)}()},disabled:null==a,className:"font-extrabold px-8 py-2",style:{backgroundColor:"".concat(xe.success),borderRadius:"26px"}},"Confirm"))))}function La(e){var t=Object(r.useState)(null),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(""),i=Object(d.a)(l,2),s=i[0],p=i[1],f=Object(r.useState)(!1),b=Object(d.a)(f,2),g=b[0],h=b[1];function x(){return(x=Object(u.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),(r=new FormData).append("avatar",a),t.prev=3,t.next=6,fetch("/api/account/settings/avatar/update",{method:"POST",credentials:"include",body:r});case 6:200===t.sent.status&&(e.pulldata(),e.toggleMenu(!1)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),h(!1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}return g?c.a.createElement("div",{className:"fixed text-white top-0 bottom-0 left-0 right-0 flex flex-col items-center justify-center",style:{zIndex:99}},c.a.createElement("div",{className:"overlay fixed top-0 bottom-0 left-0 right-0 z-0",onClick:function(t){return e.toggleMenu(!1)},style:{background:"rgba(0,0,0,.7)"}}),c.a.createElement("div",{className:"panel z-10 overflow-hidden flex flex-col items-center justify-center",style:{borderRadius:"26px",minWidth:"260px",minHeight:"160px",backgroundColor:"".concat(xe.backgroundMedium)}},c.a.createElement(Ra.a,{color:"white"}))):c.a.createElement("div",{className:"fixed text-white top-0 bottom-0 left-0 right-0 flex flex-col items-center justify-center",style:{zIndex:99}},c.a.createElement("div",{className:"overlay fixed top-0 bottom-0 left-0 right-0 z-0",onClick:function(t){return e.toggleMenu(!1)},style:{background:"rgba(0,0,0,.7)"}}),c.a.createElement("div",{className:"panel z-10 overflow-hidden",style:{borderRadius:"26px",backgroundColor:"".concat(xe.backgroundMedium)}},c.a.createElement("div",{className:"py-2 font-extrabold flex flex-col items-center justify-center",style:{background:"rgba(80,80,80,.1)",borderRadius:"26px",height:"50px"}},c.a.createElement("div",null,"Choose Avatar")),c.a.createElement("div",{className:"mx-8",style:{borderRadius:"26px"}},c.a.createElement("div",{id:"avatar-preview"},c.a.createElement("div",{className:"mt-4 overflow-hidden relative flex flex-col items-center justify-center",style:{width:"360px",height:"200px",borderTopLeftRadius:"26px",borderTopRightRadius:"26px"}},c.a.createElement("div",{className:"circle absolute overflow-hidden",style:{width:"200px",height:"200px",borderRadius:"100%",zIndex:9,border:"4px solid rgba(255,255,255,.5)"}},c.a.createElement("img",{src:""===s?e.avatar||pa:s,alt:"",style:{height:"100%",objectFit:"cover",filter:"".concat(""===s?"grayscale(1)":"grayscale(0)")}})),c.a.createElement("img",{src:""===s?e.avatar||pa:s,alt:"",style:{width:"100%",height:"100%",boxShadow:"2px 2px 5px rgba(0,0,0,.4)",objectFit:"contain",opacity:.2,filter:"".concat(""===s?"grayscale(1)":"grayscale(0)")}}))),c.a.createElement("div",{className:"flex flex-row mt-5 font-bold text-sm overflow-hidden justify-between",style:{minHeight:"120px",borderRadius:"26px"}},c.a.createElement("div",{className:"flex-grow w-1/2"},c.a.createElement("label",{htmlFor:"backdrop-select",className:"text-white flex-col w-full h-full flex items-center justify-center",style:{backgroundColor:"rgba(70,70,70,.4)"}},"Select"),c.a.createElement("input",{type:"file",name:"backdrop-select",className:"hidden",id:"backdrop-select",onChange:function(e){return function(e){var t=e.target.files[0];console.log(t),o(t);var n=new FileReader;n.readAsDataURL(t),n.onload=function(e){p(e.target.result)}}(e)}})),c.a.createElement("div",{className:"flex-grow w-1/2"},c.a.createElement("label",{htmlFor:"backdrop-select",className:" text-white flex-col w-full h-full flex items-center justify-center",style:{backgroundColor:"rgba(70,70,70,.3)"}},c.a.createElement("div",{className:"px-12 py-8",style:{border:"1px dashed rgba(170,170,170,.4)",borderRadius:"16px"}},"Drop Here"))))),c.a.createElement("div",{className:"control-wrap text-white flex-row flex justify-end items-center mr-8 mb-4"},c.a.createElement("button",{onClick:function(t){return e.toggleMenu(!1)},className:"font-extrabold my-3 py-3 px-4 mx-3 opacity-50",style:{color:"".concat(xe.textFaded)}},"cancel"),c.a.createElement(Ya,{onClick:function(e){return function(e){return x.apply(this,arguments)}()},disabled:null==a,className:"font-extrabold px-8 py-2",style:{borderRadius:"26px"}},"Confirm"))))}var Ba,Ma,Ha,Ga,Wa,Va,Ka,Ya=f.b.button(za||(za=Object(i.a)(["\n  background: ",";\n  color: ",";\n"])),(function(e){return e.disabled?"#69696966":xe.success}),(function(e){return e.disabled?"#030101":"white"}));function Ja(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(!1),i=Object(d.a)(l,2),s=i[0],p=i[1],f=Object(r.useState)(!1),b=Object(d.a)(f,2),g=b[0],h=b[1],x=Object(r.useState)({title:"",galleries:[],total_points:0}),v=Object(d.a)(x,2),E=v[0],y=v[1],w=Object(r.useState)(!1),j=Object(d.a)(w,2),O=j[0],k=j[1],N="/api/user";function _(){return(_=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="/api/user/".concat(e.match.params.username,"/following"),t.next=4,fetch(n,{credentials:"include"});case 4:if(200!=(a=t.sent).status){t.next=11;break}return t.t0=D,t.next=9,a.json();case 9:t.t1=t.sent,(0,t.t0)(t.t1);case 11:t.next=16;break;case 13:t.prev=13,t.t2=t.catch(0),console.log(t.t2);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function S(){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("".concat(N).concat(e.match.params.username)),t.prev=1,t.next=4,fetch("".concat(N,"/").concat(e.match.params.username),{credentials:"include",mode:"cors"});case 4:return n=t.sent,console.log(n),t.next=8,n.json();case 8:a=t.sent,console.log(a),h(!1),y(a),k(!0),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0),h(!0),k(!0);case 20:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}Object(r.useEffect)((function(){S(),function(){_.apply(this,arguments)}()}),[]);var T=Object(r.useState)(!1),A=Object(d.a)(T,2),I=A[0],D=A[1];function z(){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/user/".concat(e.match.params.username,"/follow"),t.prev=1,t.next=4,fetch(n,{method:"post",credentials:"include"});case 4:if(401!=(a=t.sent).status){t.next=9;break}return console.log("Unauthorized"),alert("Please log in or register to do that."),t.abrupt("return");case 9:if(200!=a.status){t.next=15;break}return t.next=12,a.json();case 12:r=t.sent,console.log(r),D(r);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})))).apply(this,arguments)}return O?O&&g?c.a.createElement("div",{className:"h-screen w-full flex flex-col justify-center items-center"},c.a.createElement("div",{className:"404-cont rounded-full bg-green-400 px-24 py-24"},c.a.createElement("img",{className:"ml-8",src:Dt,alt:"",width:"300"}),c.a.createElement("h2",{className:"font-bold text-5xl  mt-6"},"404"),c.a.createElement("div",{className:"text-xl"},"Something seems to have gone wrong..."))):c.a.createElement(Za,{style:{minHeight:"calc(100vh)"}},c.a.createElement(Hn.a,null,c.a.createElement("meta",{charset:"utf-8"}),c.a.createElement("title",null,"".concat(E.username," - Imgbeam, Capital of Memeland")),c.a.createElement("meta",{name:"description",content:"".concat(E.description)}),c.a.createElement("meta",{name:"image",content:E.avatar}),c.a.createElement("meta",{itemprop:"name",content:"".concat(E.username," - Imgbeam, Capital of Memeland")}),c.a.createElement("meta",{itemprop:"description",content:"".concat(E.description)}),c.a.createElement("meta",{itemprop:"image",content:E.avatar}),c.a.createElement("meta",{name:"twitter:card",content:"summary"}),c.a.createElement("meta",{name:"twitter:title",content:"".concat(E.username," - Imgbeam, Capital of Memeland")}),c.a.createElement("meta",{name:"twitter:description",content:"".concat(E.description)}),c.a.createElement("meta",{name:"twitter:image:src",content:E.avatar}),c.a.createElement("meta",{name:"og:title",content:"".concat(E.username," - Imgbeam, Capital of Memeland")}),c.a.createElement("meta",{name:"og:description",content:"".concat(E.description)}),c.a.createElement("meta",{name:"og:image",content:E.avatar}),c.a.createElement("meta",{name:"og:type",content:"website"})),c.a.createElement("div",{id:"user-header-wrap",style:{}},E.owner?c.a.createElement(nr,{onClick:function(e){return o(!0)},className:"backdrop-image relative block  z-10",style:{height:"calc(100vw / 5)",width:"100%",backgroundImage:"url(".concat(E.backdrop||fa,")"),backgroundPosition:"center",backgroundSize:"cover"}},c.a.createElement("div",{className:"absolute overlay top-0 right-0 left-0 bottom-0 flex flex-col items-center justify-center",style:{background:"linear-gradient(to top, rgba(170,170,170,.3), rgba(170,170,170,0)"}},c.a.createElement(er,{className:"flex flex-col items-center justify-center"},c.a.createElement("div",{className:"font-extrabold text-white"},"Change Banner")))):c.a.createElement("div",{className:"backdrop-image block  z-10",style:{height:"calc(100vw / 5)",width:"100%",background:"url(".concat(E.backdrop||fa,")"),backgroundSize:"cover",backgroundPosition:"center"}}),c.a.createElement("div",{id:"user-page-avatar-info",className:"container mx-auto py-3",style:{}},c.a.createElement("div",{className:"flex flex-row pt-4 px-32"},c.a.createElement("div",{className:"flex flex-row justify-between items-center"},c.a.createElement("div",{className:"avatar-left mr-4",style:{}},E.owner?c.a.createElement(tr,{onClick:function(e){return p(!0)},className:" flex-row hidden overflow-hidden relative z-10 sm:flex items-start pt-2 justify-between ",style:{backgroundImage:"url(".concat(E.avatar||pa,")"),backgroundPosition:"center",backgroundSize:"cover",height:"100px",width:"100px",borderRadius:"100%"}},c.a.createElement("div",{className:"overlay absolute top-0 bottom-0 left-0 right-0 z-20 ",style:{background:"linear-gradient(to top, rgba(255,255,255,.4), rgba(255,255,255,0)"}},c.a.createElement("div",{className:"absolute right-0 left-0 bottom-0 font-bold text-xs ",style:{height:"30px"}},"Choose"))):c.a.createElement("div",{className:" flex-row hidden overflow-hidden relative z-10 sm:flex items-start pt-2 justify-between ",style:{background:"url(".concat(E.avatar||pa,")"),backgroundPosition:"center",backgroundSize:"cover",height:"100px",width:"100px",borderRadius:"100%"}}))),c.a.createElement("div",{className:"flex flex-grow flex-row justify-between items-center"},c.a.createElement("div",{className:"username-right text-left"},c.a.createElement("div",null,c.a.createElement("h2",{className:"text-3xl font-bold"},E.username)),c.a.createElement("div",{className:"name-sub flex flex-col ",style:{color:"".concat(xe.textFaded),fontSize:"14px"}},c.a.createElement("div",{className:"mr-2"},E.followers.length||0," ",(E.followers&&E.followers.length)>1?"followers":"follower"))),c.a.createElement("div",{className:"",style:{}},!E.owner&&c.a.createElement("div",{className:"px-6 interactions-right  flex flex-row items-center"},c.a.createElement("div",{className:"message-wrap mr-3"},c.a.createElement(K.b,{to:"/messages/".concat(E.username),className:" flex items-center justify-center",style:{width:"40px",height:"40px",background:"".concat(xe.backgroundLightest),borderRadius:"100%"}},c.a.createElement("i",{className:"fas fa-envelope block"}))),c.a.createElement("div",null,I?c.a.createElement("button",{className:"px-8  py-2 font-bold",onClick:function(e){return z(e)},style:{height:"40px",borderRadius:"26px",background:"".concat(xe.backgroundLightest)}},"Unfollow"):c.a.createElement("button",{className:"px-8 py-2 font-bold",onClick:function(e){return z(e)},style:{background:"".concat(xe.success),height:"40px",borderRadius:"26px"}},"Follow")))))))),c.a.createElement(qa,{id:"user-page-nav",className:"z-50 relative nav md:sticky py-2",style:{}},c.a.createElement("div",{className:"container mx-auto ",id:"user-page-nav",style:{}},c.a.createElement("ul",{className:"flex flex-row  mx-auto justify-center"},c.a.createElement(K.b,{to:"/user/".concat(e.match.params.username)},c.a.createElement($a,{className:"px-4 py-2 font-extrabold",active:window.location.pathname=="/user/".concat(e.match.params.username)},"Galleries")),c.a.createElement(K.b,{to:"/user/".concat(e.match.params.username,"/comments")},c.a.createElement($a,{className:"px-4 py-2 font-extrabold",active:window.location.href.includes("comments")},"Comments")),c.a.createElement(K.b,{to:"/user/".concat(e.match.params.username,"/following")},c.a.createElement($a,{className:"px-4 py-2 font-extrabold",active:window.location.href.includes("following")},"Following")),c.a.createElement(K.b,{to:"/user/".concat(e.match.params.username,"/about")},c.a.createElement($a,{className:"px-4 py-2 font-extrabold",active:window.location.href.includes("about")},"About"))))),c.a.createElement("div",{id:"user-page-content-wrapper",className:"flex flex-col relative z-20 container mx-auto py-6 "},c.a.createElement("div",{id:"user-activity-column",className:"relative container",style:{minHeight:"calc(80vh - 200px)"}},c.a.createElement(V.b,{path:"/user/".concat(e.match.params.username),exact:!0,render:function(){return c.a.createElement(Ca,{username:e.match.params.username})}}),c.a.createElement(V.b,{path:"/user/".concat(e.match.params.username,"/comments"),render:function(){return c.a.createElement(Ta,{username:e.match.params.username})}}),c.a.createElement(V.b,{path:"/user/".concat(e.match.params.username,"/following"),render:function(){return c.a.createElement(Ia,{username:e.match.params.username})}}),c.a.createElement(V.b,{path:"/user/".concat(e.match.params.username,"/about"),render:function(){return c.a.createElement(Da,{user:E,username:e.match.params.username})}}))),a&&c.a.createElement(Ua,{pulldata:S,backdrop:E.backdrop,avatar:E.avatar,toggleMenu:o}),s&&c.a.createElement(La,{pulldata:S,backdrop:E.backdrop,avatar:E.avatar,toggleMenu:p})):c.a.createElement("div",{className:"fixed top-0 left-0 w-screen h-screen flex flex-col justify-center items-center"},c.a.createElement(Nn.a,{color:"white"}))}var Qa,Xa,qa=f.b.div(Ba||(Ba=Object(i.a)(["\n  top: ",";\n"])),(function(e){return e.theme.navbar_height})),Za=f.b.div(Ma||(Ma=Object(i.a)(["\n  .nav{\n    background: ","\n  }\n"])),(function(e){return e.theme.background_2})),$a=(f.b.li(Ha||(Ha=Object(i.a)(["\n  display: inline-block;\n  margin: 0 12px;\n  border-radius: 8px;\n  padding: 10px 16px;\n  background: ",";\n  transform: ",";\n  font-size: ",";\n  overflow: visible;\n  transition: all 0.3s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n  cursor: pointer;\n  :hover {\n    background: #555;\n    opacity: 0.2;\n  }\n"])),(function(e){return e.active?"#555":"#232323"}),(function(e){return e.active?"scale(1.1)":"scale(1)"}),(function(e){return e.active?"24px":"22px"})),f.b.li(Ga||(Ga=Object(i.a)(["\n  color: ",";\nborder-radius: 8px;\n  background-color: ",";\n  :hover {\n    opacity: .7;\n  }\n"])),(function(e){return e.active?e.theme.success:xe.textFaded}),(function(e){return e.active?e.theme.background_3:"none"}))),er=f.b.div(Wa||(Wa=Object(i.a)(["\n  border: ",";\n  padding: 32px;\n  position: absolute;\n  border-radius: 12px;\n  top: 10px;\n  right: 10px;\n  bottom: 10px;\n  left: 10px;\n"])),(function(e){return"2px dashed ".concat(e.theme.border)})),tr=f.b.button(Va||(Va=Object(i.a)(["\n  .overlay {\n    transition: all .2s ease-in-out;\n    opacity: 0;\n  }\n  :hover {\n    .overlay {\n      opacity: 1;\n    }\n  }\n"]))),nr=f.b.button(Ka||(Ka=Object(i.a)(["\n  .overlay {\n    opacity: 0;\n    transition: all 0.3s ease-in-out;\n  }\n  :hover {\n    .overlay {\n      opacity: 1;\n    }\n  }\n"]))),ar=n(46);function rr(e){var t=Object(r.useRef)();function n(n){n.target!==t.current&&n.target.parentNode!==t.current&&e.toggleMenu(!1)}return Object(r.useEffect)((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}})),c.a.createElement(lr,{className:"absolute text-left right-0 text-sm bg-gray-900",ref:t},c.a.createElement("ul",null,c.a.createElement(ir,null,c.a.createElement("a",{target:"_blank"},"Make First")),c.a.createElement(ir,null,c.a.createElement("a",{href:"".concat(e.path),target:"_blank"},"View Full Resolution")),c.a.createElement(ir,null,c.a.createElement("a",{href:"".concat(e.path),download:!0},"Download Full Resolution")),c.a.createElement(ir,{className:""},"Share"),c.a.createElement(ir,{className:"text-red-600",onClick:function(t){return e.deleteImage(e.image_id,e.image_name)}},"Delete")))}var cr,or,lr=f.b.div(Qa||(Qa=Object(i.a)(["\n  border-radius: 12px;\n  padding: 0.8rem 1.4rem;\n  top: 100%;\n  font-family: inherit;\n"]))),ir=f.b.li(Xa||(Xa=Object(i.a)(["\n    margin: 12px 0;\n    white-space: nowrap;\n    opacity: .7;\n    :hover{\n        opacity: 1\n    }\n"])));function sr(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useRef)(),i=Object(r.useState)(""),s=Object(d.a)(i,2),p=s[0],f=s[1],b=Object(r.useState)(!1),g=Object(d.a)(b,2),h=g[0],x=g[1];function v(e){x(!1),function(){E.apply(this,arguments)}()}function E(){return(E=Object(u.a)(m.a.mark((function t(){var n,a,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p,a="/beam/api/edit/".concat(e.gallery_id,"/description?description=").concat(n,"&image_id=").concat(e.image_id),t.prev=2,t.next=5,fetch(a,{method:"post",credentials:"include",mode:"cors"});case 5:return r=t.sent,t.next=8,r.json();case 8:c=t.sent,console.log(c),c.success&&(console.log("Description updated."),e.updateGallery()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){h&&l.current.focus()}),[h]),c.a.createElement(pr,{className:"mb-4 relative"},c.a.createElement("div",{className:"overlay absolute opacity-0 top-0 left-0 right-0 bottom-0"},c.a.createElement("div",{className:"image-delete-button absolute top-0 right-0"},c.a.createElement("button",{className:"p-4",onClick:function(t){return e.deleteImage(e.image_id,e.image_name)}},c.a.createElement("i",{className:"fas fa-times text-white fa-2x"})))),c.a.createElement("div",{className:"image-wrapper"},c.a.createElement("img",{src:e.path,alt:e.description||e.path}),c.a.createElement("div",{className:"menu-button",onClick:function(e){o((function(e){return!e}))}},c.a.createElement("i",{className:"fas fa-ellipsis-h"}),a&&c.a.createElement(rr,{path:e.path,toggleMenu:o,deleteImage:e.deleteImage,image_name:e.image_name,image_id:e.image_id}))),c.a.createElement("div",{onClick:function(t){return f(e.description),void x(!0)},className:"description-edit py-8 text-left px-4 overflow-x-hidden",style:{cursor:"pointer"}},h?c.a.createElement(fr,{onKeyDown:function(e){return function(e){13==e.keyCode&&l.current.blur()}(e)},onChange:function(e){return f(e.target.value)},value:p,onBlur:function(e){return v()},ref:l,type:"text"}):e.description||c.a.createElement("div",{className:"w-full flex flex-col justify-center items-center"},c.a.createElement("i",{className:"fas fa-pencil-alt"}))))}var mr,ur,dr,pr=f.b.div(cr||(cr=Object(i.a)(["\n  position: relative;\n  overflow: hidden;\n  border-radius: 4px;\n  box-shadow: 0 0 24px rgba(0,0,0,.3);\n  .overlay{\n    z-index:99;\n  }\n  :hover{\n    .overlay{\n      opacity: 1;\n    }\n  }\n  div.image-wrapper {\n    position: relative;\n\n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: fill;\n    }\n    div.menu-button {\n      transition: all 0.1s linear;\n      border-radius: 100%;\n      width: 40px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n      z-index: 99;\n      height: 40px;\n      margin-right: 10px;\n      margin-bottom: 10px;\n      opacity: 0.6;\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      font-weight: 900;\n      :hover {\n        opacity: 1;\n        background: rgba(255, 255, 255, 0.3);\n      }\n    }\n  }\n"]))),fr=f.b.input(or||(or=Object(i.a)(["\n    outline: none;\n    border: none;\n    width: 100%;\n    margin-right: 1rem;\n    background: transparent;\n"])));var br=f.b.div(mr||(mr=Object(i.a)(["\n  cursor: grab;\n  .dragging {\n    cursor: grabbing;\n  }\n  .image-holder {\n    border: ",";\n      border-radius:4px;\n      overflow:hidden;\n    /* border-color: ","; */\n    border-width: 2px;\n    :after{\n      content: '';\n      position: absolute;\n      top:0;\n      bottom:0;\n      left:0;\n      right:0;\n      background: ",";\n      z-index: 9;\n\n    }\n  }\n  .button-wrap {\n    opacity: 0;\n    transition: all 0.05s linear;\n  }\n  :hover {\n    .button-wrap {\n      opacity: 1;\n    }\n  }\n"])),(function(e){return e.activeForDrop?"2px solid rgba(255,255,255,.4)":"2px solid transparent"}),(function(e){return e.cover?xe.success:"transparent"}),(function(e){return e.activeForDrop?"rgba(255,255,255,.1)":"transparent"})),gr=Object(f.c)(ur||(ur=Object(i.a)(["\n  from{\n    opacity: 0;\n    transform: scale(.5);\n  }\n  to{\n    opacity: 1;\n    transform: scale(1);\n  }\n"]))),hr=f.b.div(dr||(dr=Object(i.a)(["\n  opacity: 0;\n  transform: scale(0.5);\n  animation: "," 0.1s linear forwards;\n"])),gr);var xr,vr,Er,yr,wr,jr,Or,kr,Nr,_r,Sr,Cr=Object(A.b)((function(e){return{sidebar:e.app_state_reducer.sidebar}}))((function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(null),i=Object(d.a)(l,2),s=i[0],p=i[1],f=Object(r.useState)(null),b=Object(d.a)(f,2),g=b[0],h=b[1];function x(e){e.preventDefault(),function(e,t){console.log("need to move "+e+" to "+t);var n=a[e],r=Object(It.a)(a);r.splice(e,1),r.splice(t,0,n),o(r)}(g,s)}function v(){return(v=Object(u.a)(m.a.mark((function t(){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/edit/".concat(e.gallery_id,"/arrangement"),t.prev=1,t.next=4,fetch(n,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});case 4:200===(r=t.sent).status&&(e.refreshData(),e.toggle(!1)),console.log(r.status),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){o(e.images)}),[]),Object(r.useEffect)((function(){g||p(null)}),[g]),Object(r.useEffect)((function(){console.log(s)}),[s]),Object(r.useEffect)((function(){console.log(a)}),[a]),c.a.createElement("div",{className:"fixed top-0 bottom-0 left-0 right-0 flex flex-col justify-center items-center  p-32",style:{zIndex:9999,marginLeft:"".concat(e.sidebar?"240px":0)}},c.a.createElement("div",{className:"fixed top-0 bottom-0 left-0 right-0",onClick:function(t){return e.toggle(!1)},style:{zIndex:"0",background:"rgba(0,0,0,.6)"}}),c.a.createElement(hr,{onDrop:function(e){return e.preventDefault()},id:"arrangement-panel",className:"my-24 mx-24 py-6 px-16 w-full h-full flex flex-col",style:{zIndex:99,backgroundColor:"".concat(xe.backgroundDark),borderRadius:"3px",boxShadow:"0 0 14px rgba(0,0,0,.5)"}},c.a.createElement("div",{className:"arrangement-title mb-4"},c.a.createElement("h3",{className:"font-bold text-lg"},"Drag to rearrange")),c.a.createElement("div",{className:"tile-container flex flex-row flex-wrap flex-grow"},a.map((function(e,t){return c.a.createElement("div",{className:"position py-4 px-4",id:"arrangement-position-".concat(t),onDragOver:function(e){return function(e,t){e.preventDefault(),p(t)}(e,t)},key:"arrangement-preview-".concat(e.file_name)},c.a.createElement(br,{draggable:!0,activeForDrop:s===t,cover:0===t,onDragStart:function(e){return function(e,t){e.currentTarget.classList.add("dragging"),h(t)}(e,t)},onDragEnd:function(e){return function(e){e.currentTarget.classList.remove("dragging"),h(null)}(e)},onDrop:function(e){return x(e)},id:"arrangement-tile-".concat(t),className:" flex flex-col draggable-tile"},c.a.createElement("div",{className:"image-holder w-32 h-24 bg-black relative",style:{boxShadow:"0 0 8px rgba(0,0,0,.6)"}},c.a.createElement("img",{src:e.path_lq,alt:"",style:{objectFit:"contain",width:"100%",height:"100%"}}))),0===t&&c.a.createElement("div",{className:"text-sm font-extrabold mt-3"},"cover"))}))),c.a.createElement("div",{id:"arrangement-control",className:"flex flex-row justify-end"},c.a.createElement("button",{onClick:function(t){return e.toggle(!1)},className:"px-6 py-1 font-bold mr-8",style:{borderRadius:"3px",color:"".concat(xe.backgroundLight)}},"Cancel"),c.a.createElement("button",{onClick:function(e){return function(){return v.apply(this,arguments)}()},className:"px-6 py-1 font-bold",style:{borderRadius:"3px",background:"".concat(xe.success)}},"Confirm"))))}));function Tr(e){var t,n=Object(r.useState)(!1),a=Object(d.a)(n,2),o=a[0],l=a[1],i=Object(r.useState)({title:"",images:[],username:""}),s=Object(d.a)(i,2),p=s[0],f=s[1],b=Object(V.g)(),g=Object(r.useState)([]),h=Object(d.a)(g,2),x=h[0],v=h[1],E=Object(r.useState)(!1),y=Object(d.a)(E,2),w=y[0],j=y[1],O="production"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MODE?"":"http://localhost:8888";function k(){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("requesting gallery"),t.prev=1,t.next=4,fetch("/api/beam/".concat(e.match.params.gallery_id),{credentials:"include"});case 4:return n=t.sent,t.next=7,n.json();case 7:a=t.sent,console.log(a),l(!1),f(a),j(!0),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0),l(!0),j(!0);case 19:case"end":return t.stop()}}),t,null,[[1,14]])})))).apply(this,arguments)}Object(r.useEffect)((function(){k(),R(),function(){ue.apply(this,arguments)}(),function(){H.apply(this,arguments)}()}),[]);var _=Object(r.useState)(!1),S=Object(d.a)(_,2),C=S[0],T=S[1],A=Object(r.useState)(""),I=Object(d.a)(A,2),D=I[0],z=I[1];function F(){return(F=Object(u.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(T(!1),!(n.target.value.replace(/\.[^/.]+$/,"").length>0)){t.next=16;break}return a="/api/beam/edit/".concat(e.match.params.gallery_id,"/tags/add?tag=").concat(D),z(""),t.prev=4,t.next=7,fetch(a,{method:"post",mode:"cors",credentials:"include"});case 7:r=t.sent,console.log(r.status),r.status,R(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})))).apply(this,arguments)}function P(){return(P=Object(u.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("request to delete "+n),a="/api/beam/edit/".concat(e.match.params.gallery_id,"/tags/remove?tag=").concat(n),t.prev=2,t.next=5,fetch(a,{method:"DELETE",mode:"cors",credentials:"include"});case 5:200==t.sent.status&&R(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}function R(){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("getting tags"),t.prev=1,t.next=4,fetch("/api/beam/".concat(e.match.params.gallery_id,"/tags"),{credentials:"include",mode:"cors",method:"get"});case 4:if(200!==(n=t.sent).status){t.next=10;break}return t.next=8,n.json();case 8:a=t.sent,v(a);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}Object(r.useEffect)((function(){console.log(C)}),[C]),Object(r.useEffect)((function(){C&&document.getElementById("new-tag-input").focus()}),[C]),Object(r.useEffect)((function(){console.log(x)}),[x]),Object(r.useEffect)((function(){document.title=p.title+" by ".concat(p.username)}),[p]);var L=Object(r.useState)([]),B=Object(d.a)(L,2),M=(B[0],B[1]);function H(){return(H=Object(u.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/beam/".concat(e.match.params.gallery_id,"/likes"),t.prev=1,t.next=4,fetch(n,{credentials:"include",method:"get",mode:"cors"});case 4:return a=t.sent,t.next=7,a.json();case 7:(r=t.sent).success&&(console.log(r.likes),M(r.likes)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}var G=Object(r.useState)(),W=Object(d.a)(G,2),K=W[0],Y=W[1];function J(){return(J=Object(u.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("file",n),t.prev=2,t.next=5,fetch("/api/beam/edit/".concat(e.match.params.gallery_id,"/images/add"),{method:"POST",mode:"cors",credentials:"include",body:a});case 5:r=t.sent,console.log(r.status),k(),Y(null),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}function Q(e,t){console.log("deleting "+e),window.confirm("Are you sure you want to delete?")?function(e,t){X.apply(this,arguments)}(e,t):console.log("Aborted.")}function X(){return(X=Object(u.a)(m.a.mark((function t(n,a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=p.images.length){t.next=3;break}return alert("Gallery must contain at least one image."),t.abrupt("return");case 3:return r="/api/beam/edit/".concat(e.match.params.gallery_id,"/images/remove?image_id=").concat(n,"&image_name=").concat(a),t.prev=4,t.next=7,fetch(r,{mode:"cors",credentials:"include",method:"post"});case 7:200==t.sent.status&&(console.log("Image removed."),k()),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(o);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))).apply(this,arguments)}function q(){return(q=Object(u.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure you want to delete?")){t.next=2;break}return t.abrupt("return");case 2:return a="/api/beam/edit/".concat(e.match.params.gallery_id,"/delete"),t.prev=3,t.next=6,fetch(a,{method:"DELETE",credentials:"include"});case 6:200===(r=t.sent).status&&b.push("/user/".concat(p.username)),console.log(r.status),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}Object(r.useEffect)((function(){console.log("file loaded"),K&&function(e){J.apply(this,arguments)}(K)}),[K]);var Z=Object(r.useState)(!1),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ne=Object(r.useState)(""),ae=Object(d.a)(ne,2),re=ae[0],ce=ae[1];function oe(e){te(!1),function(e){le.apply(this,arguments)}()}function le(){return(le=Object(u.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=re,r="/api/beam/edit/".concat(e.match.params.gallery_id,"/title?title=").concat(a),t.prev=2,t.next=5,fetch(r,{method:"post",credentials:"include",mode:"cors"});case 5:200===t.sent.status&&k(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}Object(r.useEffect)((function(){ee&&document.getElementById("title-edit").focus()}),[ee]);var ie=Object(r.useState)(0),se=Object(d.a)(ie,2),me=(se[0],se[1]);function ue(){return(ue=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/beam/".concat(e.match.params.gallery_id,"/favoritescount"));case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,me(a.favorites),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}var de=Object(r.useState)(!1),pe=Object(d.a)(de,2),fe=pe[0],be=pe[1];return o?c.a.createElement("div",null,"not found"):w?c.a.createElement(Lr,{className:"pt-24 mx-4 relative",id:"post-edit-page",style:{zIndex:99}},!1===p.owner&&c.a.createElement(V.a,{to:"/beam/".concat(e.match.params.gallery_id)}),c.a.createElement("div",{className:"flex relative flex-col container mx-auto"},c.a.createElement("div",{className:"flex flex-row  relative mx-auto box-border  pb-12 ",style:{}},c.a.createElement("div",{id:"edit-post-info",className:"edit-meta  sm:mr-6 text-left sticky",style:(t={maxWidth:"340px",minWidth:"260px",position:"-webkit-sticky"},Object(ar.a)(t,"position","sticky"),Object(ar.a)(t,"top","90px"),Object(ar.a)(t,"alignSelf","flex-start"),t)},c.a.createElement(Br,{className:"flex flex-row relative "},c.a.createElement("div",{className:"px-4 md:px-0 pb-6 relative z-10"},ee?c.a.createElement(Wr,{id:"title-edit",onKeyDown:function(e){return function(e){13==e.keyCode&&document.getElementById("title-edit").blur()}(e)},onBlur:function(e){return oe()},className:"text-2xl outline-none font-bold bg-transparent",value:re,onChange:function(e){return ce(e.target.value)}}):c.a.createElement(Gr,{onClick:function(e){return ce(p.title),void te(!0)},className:"text-2xl font-bold",style:{cursor:"text"},title:"Click to edit title."},p.title||c.a.createElement("span",{className:"opacity-75"},"add a title")),c.a.createElement("h3",{className:"text-xs opacity-50 font-bold"},$t()(p.date_created).format("MMMM Do YYYY")),c.a.createElement("div",{id:"post-edit-description",className:"mt-6"},p.description))),c.a.createElement(Br,{id:"edit-tags-section",className:"mt-3"},c.a.createElement("div",{id:"tags-section",className:"mb-3"},x&&x.map((function(e,t){return c.a.createElement(Hr,{key:"edit-tag-".concat(t),className:"",style:{}},c.a.createElement("div",{className:"delete-tag-button",onClick:function(t){return function(e){return P.apply(this,arguments)}(e.name)}},c.a.createElement("i",{className:"fas fa-minus-circle fa-lg"})),c.a.createElement("div",{className:"text-xs"},e.name))})),x.length<20&&c.a.createElement(Vr,{style:{},className:"mr-5 ",active:C,onClick:function(e){T(!0)}},C?c.a.createElement(Yr,{id:"new-tag-input",type:"text",name:"new-tag",style:{},onBlur:function(e){return function(e){return F.apply(this,arguments)}(e)},onKeyDown:function(e){return function(e){13==e.keyCode&&document.getElementById("new-tag-input").blur()}(e)},onChange:function(e){return z(e.target.value)},value:D}):c.a.createElement("i",{className:"fas fa-plus",style:{}})))),c.a.createElement("div",{id:"edit-post-controls-list",className:"mt-8 relative"},c.a.createElement("ul",{className:"text-sm"},c.a.createElement("li",{className:"my-1 py-1 flex flex-row items-center "},p.singleton?c.a.createElement("a",{className:"flex flex-row items-center w-full",href:"".concat(O,"/api/beam/").concat(e.match.params.gallery_id,"/download"),download:!0},c.a.createElement(Ar,{icon:"fa-save",string:"Download Gallery"})):c.a.createElement("a",{className:"flex flex-row items-center w-full",href:"".concat(O,"/api/beam/").concat(e.match.params.gallery_id,"/zip"),download:!0},c.a.createElement(Ar,{icon:"fa-save",string:"Download Gallery"}))),c.a.createElement("li",{className:"my-1 py-1 font-bold "},c.a.createElement(Ar,{string:"Rearrange Media",icon:"fa-random",action:be})),c.a.createElement("li",{className:"my-1 py-1 font-bold "},c.a.createElement(Ar,{icon:"fa-trash",string:"Delete Gallery",action:function(e){return q.apply(this,arguments)}})))),c.a.createElement(Ne,{className:""}),c.a.createElement("div",{className:"mt-8 flex flex-row items-center",style:{height:"32px"}},c.a.createElement(Kr,{className:"px-8 self-stretch py-1 w-full text-xs font-extrabold",onClick:function(t){e.history.push("/beam/".concat(e.match.params.gallery_id))},style:{maxWidth:"200px"}},"Finish Editing"),c.a.createElement(Kr,{className:"ml-3 self-stretch px-3"},c.a.createElement("i",{className:"fas fa-chevron-down"})))),c.a.createElement("div",{className:"edit-content mt-12 sm:mt-0  pb-12",style:{maxWidth:"680px"}},c.a.createElement("div",{id:"gallery-columns"},w&&p.images.map((function(t,n){return"image"===t.media_type?c.a.createElement(sr,{image_id:t.image_id,image_name:t.file_name,deleteImage:Q,path:t.path,updateGallery:k,description:t.description,key:"gallery-image-".concat(n),gallery_id:e.match.params.gallery_id}):c.a.createElement(Lt,{image_id:t.image_id,image_name:t.file_name,deleteImage:Q,string:t.path,key:"gallery-image-".concat(n),description:t.description,gallery_id:e.match.params.gallery_id})}))),c.a.createElement("div",{className:"add-content-container"},c.a.createElement(Mr,{className:"float-right px-12 py-1 text-sm font-bold ",onClick:function(e){document.getElementById("new-image-input").click()},title:"Add new media"},c.a.createElement("div",{className:"font-bold text-sm"},"New")),c.a.createElement("input",{type:"file",name:"",onChange:function(e){return Y(e.target.files[0])},id:"new-image-input",className:"hidden"}))))),fe&&c.a.createElement(Cr,{toggle:be,gallery_id:p.gallery_id,toggleArranging:be,refreshData:k,images:p.images})):c.a.createElement("div",{className:"flex h-screen w-full flex-col justify-center items-center"},c.a.createElement(Nn.a,{color:"white"}))}function Ar(e){return c.a.createElement(Ur,{color:e.color,onClick:function(t){return e.action(t)},className:""},c.a.createElement("div",{className:"flex item-content flex-row items-center justify-start"},c.a.createElement("div",{className:"icon-holder flex flex-col items-center justify-center mr-4",style:{width:"32px"}},c.a.createElement("i",{className:"icon block fas ".concat(e.icon," "),style:{fontSize:"20px"}})),c.a.createElement("div",{className:"text-sm font-semibold"},e.string),c.a.createElement("div",{className:"ml-auto"},e.children)))}var Ir,Dr,zr,Fr,Pr,Rr,Ur=f.b.button(xr||(xr=Object(i.a)(["\n  width: 100%;\n  :hover {\n    .icon {\n      color: ",";\n    }\n  }\n  .check {\n    color: ",";\n  }\n  .icon {\n    color: ",";\n  }\n  .item-content {\n    padding: 8px 8px;\n    border-radius: 8px;\n    :hover {\n      background-color: ",";\n    }\n  }\n"])),(function(e){return e.color||e.theme.secondary}),(function(e){return e.theme.icons}),(function(e){return e.theme.icons_2}),(function(e){return e.theme.background_3})),Lr=f.b.div(vr||(vr=Object(i.a)(["\n  color: ",";\n"])),(function(e){return e.theme.text})),Br=f.b.div(Er||(Er=Object(i.a)([""]))),Mr=f.b.button(yr||(yr=Object(i.a)(["\n  position: relative;\n  color: white;\n  overflow: hidden;\n  border-radius: 3px;\n  /* border-radius: 26px; */\n  background: ",";\n"])),xe.success),Hr=f.b.div(wr||(wr=Object(i.a)(["\n  cursor: pointer;\n  margin-bottom: 10px;\n  margin-right: 1rem;\n  display: inline-block;\n  position: relative;\n  padding: 10px 18px;\n  font-weight: bolder;\n  border-radius: 8px;\n  box-shadow: ",";\n  border: ",";\n  transition: all 0.2s ease-in;\n  :hover {\n    div.delete-tag-button {\n      display: block;\n      right: -10px;\n      top: 0;\n    }\n  }\n  .delete-tag-button {\n    display: ",";\n    position: absolute;\n  }\n"])),(function(e){return"4px 4px 18px ".concat(e.theme.background_4)}),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.active?"block":"none"})),Gr=f.b.h1(jr||(jr=Object(i.a)(["\n  &:hover {\n    opacity: 0.75;\n  }\n"]))),Wr=f.b.input(Or||(Or=Object(i.a)(["\n  overflow: visible;\n  width: 100%;\n"]))),Vr=f.b.button(kr||(kr=Object(i.a)(["\n  padding: 10px 24px;\n  opacity: 0.3;\n  display: inline-block;\n  border-radius: 26px;\n  transition: all 0.2s ease-in;\n\n  input {\n    border: none;\n    outline: none;\n    width: auto;\n  }\n"]))),Kr=f.b.button(Nr||(Nr=Object(i.a)(["\n  border-radius: 8px;\n  background: ",";\n  color: white;\n"])),xe.success),Yr=f.b.input(_r||(_r=Object(i.a)(["\n  background: ",";\n  padding: 3px;\n"])),(function(e){return e.theme.background_4}));f.b.div(Sr||(Sr=Object(i.a)(["\n  width: 24px;\n  display: flex;\n  margin-right: 16px;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])));function Jr(){return c.a.createElement("div",null)}function Qr(e){var t=Object(V.g)(),n=Object(r.useState)(!1),a=Object(d.a)(n,2),o=a[0],l=a[1],i=Object(r.useState)([]),s=Object(d.a)(i,2),f=s[0],b=s[1],g=Object(r.useState)(!1),h=Object(d.a)(g,2),x=h[0],v=h[1],E=Object(r.useState)([]),y=Object(d.a)(E,2),w=y[0],j=y[1],O=Object(r.useState)(""),k=Object(d.a)(O,2),N=k[0],_=k[1],S=Object(r.useState)(""),C=Object(d.a)(S,2),T=C[0],A=C[1];function I(){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(m.a.mark((function e(){var n,a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.b.dismiss(),p.b.clearWaitingQueue(),0!=f.length){e.next=5;break}return Object(p.b)("No files to upload.",{position:"bottom-center"}),e.abrupt("return");case 5:if(n=0,f.forEach((function(e){n+=e.size})),console.log(n),!(n/1e6>50)){e.next=11;break}return Object(p.b)("Uploads can not be larger than 50mb.",{position:"bottom-center"}),e.abrupt("return");case 11:if(""!=N){e.next=14;break}return Object(p.b)("A title is required.",{position:"bottom-center"}),e.abrupt("return");case 14:return a=new FormData,f.forEach((function(e,t){a.append("file_".concat(t),e)})),a.append("title",N),a.append("description",T),e.prev=18,v(!0),e.next=22,fetch("/api/upload/create",{method:"POST",mode:"cors",credentials:"include",body:a});case 22:if(r=e.sent,console.log(r.status),500!=r.status){e.next=28;break}return v(!1),l(!0),e.abrupt("return");case 28:if(400==r.status&&(Object(p.b)("Select a file to upload.",{position:"bottom-center"}),v(!1)),200!=r.status){e.next=36;break}return l(!1),v(!1),e.next=34,r.json();case 34:c=e.sent,t.push("/beam/".concat(c.gallery_id));case 36:e.next=43;break;case 38:e.prev=38,e.t0=e.catch(18),v(!1),console.log(e.t0),console.log("Error during upload.");case 43:case"end":return e.stop()}}),e,null,[[18,38]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){console.log(f)}),[f]),x?c.a.createElement("div",{className:"flex flex-col px-8 py-8 justify-center items-center"},c.a.createElement("h3",{className:"font-extrabold py-3"},"Processing"),c.a.createElement(Nn.a,{size:20})):o?c.a.createElement("div",{className:"my-8 text-white flex flex-col justify-center items-center"},c.a.createElement("h2",{className:"text-3xl font-extrabold text-white"},"Error during file upload."),c.a.createElement("div",{className:"mt-8"},c.a.createElement("button",{className:"text-xl font-bold py-3 px-5 bg-green-400",onClick:function(e){return I()}},"Try Again"),c.a.createElement("button",{className:"font-extrabold text-sm py-3 block  px-5 opacity-50",onClick:function(t){return e.cancelUpload()}},"Cancel Upload"))):c.a.createElement("div",{className:" mx-auto ",style:{}},c.a.createElement(qr,{className:"px-6 text-white py-2 mx-auto max-w-2xl  flex flex-col"},c.a.createElement("section",{id:"new-post-form",className:"flex flex-col text-white"},c.a.createElement("div",{className:"w-full mb-4 flex flex-row",style:{background:"rgba(255,255,255,.3)",borderRadius:"26px"}},c.a.createElement(ec,{className:"px-4 py-3 flex-grow outline-none placeholder-gray-900 focus:outline-none w-full",type:"text",autoFocus:!0,maxLength:128,placeholder:"Title",value:N,onChange:function(e){return _(e.target.value)}}),c.a.createElement("div",{className:"close-icon flex flex-col items-center justify-center w-12"},N.length>0&&c.a.createElement("button",{className:"w-full h-full opacity-75",onClick:function(e){return _("")}},c.a.createElement("i",{className:"fas fa-times"})))),c.a.createElement("textarea",{className:"px-4 py-3 mb-4 outline-none placeholder-gray-900 focus:outline-none w-full",type:"text",maxLength:1024,placeholder:"Description",value:T,onChange:function(e){return A(e.target.value)},style:{background:"rgba(255,255,255,.3)",borderRadius:"26px"}})),c.a.createElement("section",{id:"upload-things"},c.a.createElement(Zr,{className:" p-2  w-full flex-col flex items-center justify-center",style:{}},c.a.createElement("label",{htmlFor:"file-input",className:"items-center  justify-center cursor-pointer w-full h-full flex flex-col py-4",style:{borderRadius:"26px",background:"rgba(255,255,255,.1)"}},c.a.createElement("div",{className:"flex flex-row justify-start w-full"},c.a.createElement("div",{className:"px-6"},c.a.createElement("i",{class:"fas fa-file-image fa-3x"})),c.a.createElement("div",{className:"text-left"},c.a.createElement("h4",{className:"text-xl font-bold"},"Explore Files"),c.a.createElement("div",{className:"tet-sm"},"Select one or multiple image/video files.")))),c.a.createElement("input",{type:"file",className:"absolute hidden",style:{zIndex:-1},name:"file-upload",onChange:function(e){return function(e){var t=Object(It.a)(f);t.push(e.target.files[0]),b(t);var n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(e){var t=Object(It.a)(w);t.push(e.target.result),j(t)}}(e)},id:"file-input",accept:".jpg,.jpeg,.png,.gif,.apng,.tiff,.tif,.bmp,.xcf,.webp,.mp4,.mov,.avi,.webm,.mpeg,.flv,.mkv,.mpv,.wmv"})),c.a.createElement("section",{id:"submit-control"},c.a.createElement($r,{className:"w-full font-extrabold py-3 mt-4  ",onClick:function(e){return I()}},"Post")),c.a.createElement("div",{className:"w-full mt-6 flex flex-row flex-wrap "},f.length>0&&c.a.createElement("h2",{className:"font-extrabold text-xl text-center w-full"},f.length," files selected"),f&&w.map((function(e,t){return c.a.createElement(rc,{key:"file-upload-".concat(t)},c.a.createElement("div",{key:"media-upload-image-preview-".concat(t),className:"m-2 relative object-cover ",style:{width:"180px",height:"100px",boxShadow:"2px 2px 12px rgba(0,0,0,.5)"}},c.a.createElement("div",{className:"absolute top-0 right-0 z-50 hidden remove-button",style:{top:"-20px",right:"-20px"}},c.a.createElement("button",{className:"p-2 remove-circle",onClick:function(e){return function(e){var t=Object(It.a)(f),n=Object(It.a)(w);t.splice(e,1),n.splice(e,1),b(t),j(n)}(t)},style:{borderRadius:"100%",width:"40px",height:"40px",background:"rgba(255,255,255,.5)"}},c.a.createElement("i",{className:"fas fa-times"}))),c.a.createElement("div",{className:"overlay absolute top-0 bottom-0 left-0 right-0 hover:bg-white opacity-25 z-10",style:{}}),f[t].type.includes("image")?c.a.createElement("img",{className:"object-cover",style:{width:"100%",height:"100%"},src:e,alt:""}):c.a.createElement("div",{className:"absolute top-0 bottom-0 right-0 left-0 flex items-center justify-center"},c.a.createElement("i",{className:"fas fa-film block fa-2x"}))),c.a.createElement("div",{className:"file-info flex flex-col"},c.a.createElement("h4",{className:"font-bold",style:{fontSize:"14px"}},f[t].name),c.a.createElement("h6",{className:" opacity-50 font-bold",style:{fontSize:"10px"}},function(e){var t=e.toString(),n="Bytes";t.length>3&&(n="KB",e/=1e3);t.length>6&&(n="MB",e/=1e3);return e.toFixed(1).toString()+" "+n}(f[t].size))))}))))),c.a.createElement(p.a,{limit:1}))}var Xr=Object(f.c)(Ir||(Ir=Object(i.a)(["\n  from{\n    transform: scale(.4);\n    opacity:0;\n  }\n  to{\n    transform: scale(1);\n    opacity:1;\n  }\n"]))),qr=f.b.div(Dr||(Dr=Object(i.a)(["\n  animation: "," 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6) forwards;\n  #drop-target-container {\n  }\n  #drop-zone {\n  }\n  #drop-target-image {\n  }\n"])),Xr),Zr=f.b.div(zr||(zr=Object(i.a)(["\n  border: 1px dashed rgba(255, 255, 255, 0.5);\n  border-radius: 26px;\n"]))),$r=f.b.button(Fr||(Fr=Object(i.a)(["\n  background: #38cc77;\n  /* box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.4); */\n  border-radius: 26px;\n"]))),ec=f.b.input(Pr||(Pr=Object(i.a)(["\n  position: relative;\n  background: transparent;\n  height: 50px;\n"])));var tc,nc,ac,rc=f.b.div(Rr||(Rr=Object(i.a)(["\n  :hover{\n    .remove-button{\n      display: block;\n    }\n  }\n  .remove-circle{\n    :hover{\n      background: rgba(255,255,255,1)\n    }\n  }\n"])));function cc(e){return console.log(e),c.a.createElement("div",{className:"fixed top-0 left-0 w-screen h-screen flex flex-col justify-center items-center",style:{zIndex:999}},c.a.createElement("div",{className:"overlay absolute top-0 left-0 right-0 bottom-0",onClick:function(t){return e.toggleOverlayOff()},style:{zIndex:1,background:"rgba(0,0,0,.7)"}}),c.a.createElement("div",{className:"relative p-2 pb-4 text-white ",style:{zIndex:2,minWidth:"300px",background:"rgba(60,60,60,1)",borderRadius:"26px",boxShadow:"2px 2px 4px rgba(0,0,0,.3)"}},c.a.createElement("div",{className:"px-4 font-bold py-6"},"Discard your new post?"),c.a.createElement("hr",{className:"opacity-25 mx-6"}),c.a.createElement("div",{className:"pt-6"},c.a.createElement("button",{className:"mx-3  py-2 text-sm font-extrabold hover:opacity-75  w-32 focus:outline-none",onClick:function(t){return e.toggleOverlayOff()},style:{color:"#2ecc71",borderRadius:"26px",height:"50px",background:"rgba(255,255,255,.2)"}},"finish post"),c.a.createElement("button",{className:"mx-3 font-extrabold py-2 hover:opacity-75 w-32 focus:outline-none",onClick:function(t){return e.goback()},style:{background:"#e74c3c",borderRadius:"26px",height:"50px",boxShadow:"2px 2px 4px rgba(0,0,0,.3)"}},"discard"))))}function oc(e){var t=Object(V.g)();function n(){return(n=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/loggedin",e.prev=1,e.next=4,fetch("/api/loggedin");case 4:401==e.sent.status&&(window.location.href="/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){n.apply(this,arguments)}(),document.title="New Upload"}),[]);var a=Object(r.useState)(!1),o=Object(d.a)(a,2),l=o[0],i=o[1];function s(){i(!0)}function p(){t.goBack()}return c.a.createElement("div",{className:"top-0 bottom-0 left-0 right-0 fixed flex flex-col justify-center items-center ",style:{zIndex:1e3,background:"rgba(0,0,0,.8)"}},l&&c.a.createElement(cc,{goback:p,toggleOverlayOff:function(){i(!1)}}),c.a.createElement("div",{className:"overlay z-0 fixed top-0 bottom-0 left-0 right-0",onClick:function(e){return s()}}),c.a.createElement(uc,{id:"new-post-panel",className:" relative py-2  z-50 px-2"},c.a.createElement("div",{className:"cancel-container p-6 absolute top-0 right-0"},c.a.createElement("button",{onClick:function(e){return s()},className:" outline-none text-white ",style:{width:"50px",height:"50px",borderRadius:"100%",backgroundColor:"rgba(255,255,255,.2)"}},c.a.createElement("i",{className:"fas fa-times fa-lg"}))),c.a.createElement("div",{id:"upload-intro",className:" p-2"},c.a.createElement("h1",{className:"text-xl text-white font-extrabold"},"New Post"),c.a.createElement("p",{className:"text-white text-sm"},"Upload your media to imgbeam for free, and share it with the world.")),c.a.createElement(Qr,{cancelUpload:p}),c.a.createElement(mc,null,c.a.createElement("div",{className:"supported text-white mt-6 max-w-md"},c.a.createElement("h4",{className:"opacity-50"},"supported formats"),c.a.createElement("div",{className:"text-xs opacity-25"},".jpg, .jpeg, .png, .gif, .apng, .tiff, .tif, .bmp, .xcf, .webp, .mp4, .mov, .avi, .webm, .mpeg, .flv, .mkv, .mpv, .wmv")))),c.a.createElement("div",{id:"agreement",className:"mt-6 text-xs absolute left-0 right-0 bottom-0 text-white pb-4"},"By uploading to imgbeam, you agree to abide by imgbeams's",c.a.createElement("a",{href:"/termsofuse",target:"_blank",rel:"noopener",className:"text-green-400 font-bold pl-1"},"terms of service")))}var lc,ic,sc=Object(f.c)(tc||(tc=Object(i.a)(["\n    from{\n        transform: translateY(300px);\n        opacity: 0;\n    }\n    to{\n        transform: translateY(0px);\n        opacity: 1;\n    }\n"]))),mc=f.b.div(nc||(nc=Object(i.a)(["\n  animation-delay: 0.5s;\n  animation: "," 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n"])),sc),uc=f.b.div(ac||(ac=Object(i.a)(["\n  background: ",";\n  border-radius: 26px;\n  /* max-height: calc(100vh - 200px); */\n"])),xe.backgroundMedium);function dc(e){return c.a.createElement("div",null,c.a.createElement(bc,null,c.a.createElement(pc,{title:"Account"}),c.a.createElement(fc,{string:"Signed in as ".concat(e.user.username," (").concat(e.user.email,")")})),c.a.createElement(bc,null,c.a.createElement(pc,{title:"Member Since"}),c.a.createElement(fc,{string:"".concat($t()(e.user.member_since).format("MMM D YYYY"))})))}function pc(e){return c.a.createElement("div",{className:"font-bold pt-4 pb-2"},e.title)}function fc(e){return c.a.createElement("div",{className:"text-sm"},e.string)}function bc(e){return c.a.createElement("div",{className:"mb-3"},e.children)}function gc(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1];function l(){return(l=Object(u.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/account/history",e.prev=1,e.next=4,fetch("/api/account/history",{credentials:"include"});case 4:if(200!==(t=e.sent).status){e.next=11;break}return e.next=8,t.json();case 8:n=e.sent,console.log(n),o(n);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]),c.a.createElement("div",{className:"container mx-auto pl-3  flex flex-row"},c.a.createElement("div",{className:"flex-grow",id:"history-list"},c.a.createElement(pc,{title:"Viewing History"}),c.a.createElement("ul",{className:"mt-8 pb-6"},a&&a.map((function(e,t){return c.a.createElement(hc,{key:"history-item-".concat(e.gallery_id),gallery:e})})))),c.a.createElement(Ec,{id:"history-permissions",className:"sticky pl-4 hidden md:block",style:{width:"320px",top:"64px",height:"calc(100vh - 64px)"}},c.a.createElement(pc,{title:"History Permissions"})))}function hc(e){return c.a.createElement(vc,{className:""},c.a.createElement("div",{className:"h-full mr-4",style:{width:"220px"}},c.a.createElement(K.b,{to:"/beam/".concat(e.gallery.gallery_id)},"image"==e.gallery.images[0].media_type?c.a.createElement("img",{className:"",src:e.gallery.images[0].path_lq,alt:"",style:{objectFit:"cover",width:"100%",height:"100%"}}):c.a.createElement("video",{src:e.gallery.images[0].path_lq,style:{objectFit:"cover",width:"100%",height:"100%"}}))),c.a.createElement(K.b,{to:"/beam/".concat(e.gallery.gallery_id)},c.a.createElement("div",{className:"flex flex-col"},c.a.createElement("div",{className:"history-item-title font-bold text-lg"},e.gallery.title),c.a.createElement("div",{className:"history-item-poster text-sm flex flex-row",style:{}},c.a.createElement("div",{className:"mr-4"},e.gallery.username),c.a.createElement("div",null,e.gallery.views," views")),c.a.createElement("div",{className:"history-item-description mt-8 text-sm ",style:{}},e.gallery.description))))}var xc,vc=f.b.li(lc||(lc=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  height: 140px;\n  margin-bottom: 16px;\n"]))),Ec=f.b.div(ic||(ic=Object(i.a)(["\n  background-color: ",";\n"])),(function(e){return e.theme.background_3}));function yc(e){return c.a.createElement("div",null,c.a.createElement("h2",{className:"font-bold text-2xl"},"Email"),c.a.createElement("p",{className:"text-green-500 font-bold"},e.user.email),c.a.createElement("h2",{className:"font-bold text-2xl mt-8"},"Change Password"),c.a.createElement("form",{action:"/api/account/password/update",id:"password-change",className:"flex flex-col mt-6 max-w-lg",method:"POST"},c.a.createElement("label",{className:"font-bold text-sm",htmlFor:"password-old"},"Current Password"),c.a.createElement(Nc,{id:"password-old",name:"password-old",type:"password"}),c.a.createElement("label",{className:"font-bold text-sm mt-6",htmlFor:"password-new-1"},"New Password"),c.a.createElement(Nc,{id:"password-new-1",name:"password-new-1",type:"password"}),c.a.createElement("label",{className:"font-bold text-sm",htmlFor:"password-new-2"},"Confirm New Password"),c.a.createElement(Nc,{id:"password-new-2",name:"password-new-2",type:"password"}),c.a.createElement("p",{className:"text-xs opacity-50 mt-2"},"New password must contain at least one letter and one number, and be alphanumeric. Special characters and spaces are not allowed."),c.a.createElement("input",{type:"submit",className:"bg-green-400 mt-6 py-2 font-bold hover:opacity-50",value:"Change Password"})))}var wc,jc,Oc,kc,Nc=f.b.input(xc||(xc=Object(i.a)(["\n  background: rgba(0, 0, 0, 0.3);\n  padding: 0.5rem 0.5rem;\n  outline: none;\n  border: none;\n  margin: 0.5rem 0;\n"])));function _c(e){var t=Object(r.useState)(null),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(""),i=Object(d.a)(l,2),s=i[0],p=i[1];function f(){return(f=Object(u.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("avatar",a),t.prev=2,t.next=5,fetch("/api/account/settings/avatar/update",{method:"POST",credentials:"include",body:r});case 5:200==t.sent.status&&e.toggleAvatarSelect(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}return c.a.createElement("div",{className:"fixed top-0  left-0 w-screen h-screen flex flex-col justify-center items-center",style:{background:"rgba(0,0,0,.7)"}},c.a.createElement("div",{onClick:function(t){return e.toggleAvatarSelect(!1)},className:"overlay fixed top-0 left-0 w-screen h-screen z-10",style:{}}),c.a.createElement(Ic,{className:"bg-gray-700 p-4 z-20",style:{borderRadius:"4px",width:"300px"}},c.a.createElement("div",{id:"avatar-file-explorer",className:"border-dashed relative  w-full"},c.a.createElement(Cc,{htmlFor:"avatar-file",className:" w-full block p-3"},"Choose from your device."),c.a.createElement("input",{className:"absolute hidden",type:"file",name:"avatar-file",onChange:function(e){return function(e){var t=e.target.files[0];console.log(t),o(t);var n=new FileReader;n.readAsDataURL(t),n.onload=function(e){p(e.target.result)}}(e)},accept:".jpg,.jpeg,.png,.gif,.apng,.tiff,.tif,.bmp",id:"avatar-file"})),c.a.createElement("div",{id:"avatar-select-preview",className:"w-full"},a&&c.a.createElement("img",{src:s,alt:"",width:"100%",style:{borderRadius:"4px"}})),c.a.createElement("div",{className:"avatar-grid grid grid-cols-3",style:{width:"300px"}}),c.a.createElement(Tc,{disabled:!a,onClick:function(e){return function(e){return f.apply(this,arguments)}(e)},className:"py-3 px-8 mt-3 w-full shadow-lg font-extrabold"},"Save")))}var Sc,Cc=f.b.label(wc||(wc=Object(i.a)(["\n  background: rgba(255,255,255,.1);\n\n"]))),Tc=f.b.button(jc||(jc=Object(i.a)(["\n  border-radius: 4px;\n  background: "," ;\n  opacity: "," ;\n\n\n"])),(function(e){return e.disabled?"gray":"rgb(52, 124, 218)"}),(function(e){return e.disabled?.4:1})),Ac=Object(f.c)(Oc||(Oc=Object(i.a)(["\n  from{\n    transform: scale(1.4);\n    opacity: 0;\n  }\n  to{\n    transform: scale(1);\n    opacity: 1;\n  }\n"]))),Ic=f.b.div(kc||(kc=Object(i.a)(["\n  opacity: 0;\n  animation: .1s "," linear forwards;\n"])),Ac);function Dc(e){return c.a.createElement("div",null,c.a.createElement("div",{className:"account-status-controls mt-8"},c.a.createElement("h2",{className:"font-bold text-lg"},"Delete Account"),c.a.createElement("button",{className:"bg-gray-800 mt-8 hover:bg-red-600 hover:text-white text-red-600 text-xs font-bold py-4 px-6"},"DELETE ACCOUNT")))}function zc(e){Object(r.useEffect)((function(){!function(){f.apply(this,arguments)}(),document.title="Your Account"}),[]);var t=Object(r.useState)(null),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(!1),i=Object(d.a)(l,2),s=i[0],p=i[1];function f(){return(f=Object(u.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/account",e.prev=1,e.next=4,fetch("/api/account",{credentials:"include"});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,o(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return null==a?c.a.createElement("div",null):c.a.createElement("div",{className:"text-left relative"},s&&c.a.createElement(_c,{toggleAvatarSelect:p}),c.a.createElement("div",{className:"container mx-auto max-w-5xl my-8 flex  px-6 lg:px-0 flex-row"},c.a.createElement("div",{id:"account-left-nav",style:{width:"200px"}},c.a.createElement("ul",{className:"text-sm"},c.a.createElement(Pc,{active:"/account"==e.location.pathname},c.a.createElement(K.b,{to:"/account"},"Your Account")),c.a.createElement(Pc,{active:e.location.pathname.includes("emailpassword")},c.a.createElement(K.b,{to:"/account/emailpassword"},"Email and Password")),c.a.createElement(Pc,{active:e.location.pathname.includes("deactivate")},c.a.createElement(K.b,{to:"/account/deactivate"},"Deactivate Account")))),c.a.createElement("div",{id:"account-right-settings",className:"flex-1 ml-12"},c.a.createElement(V.b,{exact:!0,path:"/account",render:function(e){return c.a.createElement(dc,Object.assign({},e,{user:a,toggleAvatarSelect:p}))}}),c.a.createElement(V.b,{exact:!0,path:"/account/emailpassword",render:function(e){return c.a.createElement(yc,Object.assign({},e,{user:a}))}}),c.a.createElement(V.b,{esact:!0,path:"/account/deactivate",render:function(){return c.a.createElement(Dc,{username:e.match.params.username})}}))))}var Fc,Pc=f.b.li(Sc||(Sc=Object(i.a)(["\n  color: ",";\n  margin-bottom: 0.6rem;\n"])),(function(e){return e.active?e.theme.success:e.theme.text}));function Rc(e){return c.a.createElement(Mc,{disable:e.disable,onClick:e.action,className:"py-1 px-8"},e.string)}var Uc,Lc,Bc,Mc=f.b.button(Fc||(Fc=Object(i.a)(["\n    background: ",";\n    border: ",";\n    font-size: 14px;\n    font-weight: bold;\n    border-radius: 3px;\n    color: ",";\n"])),(function(e){return e.theme.background_1}),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.disabled?e.theme.textFaded:e.theme.text}));var Hc=f.b.header(Uc||(Uc=Object(i.a)(["\nwidth: 100%;\n  .breakdown {\n    font-size: 16px;\n    font-weight: 600;\n    color: ",";\n  }\n  .search-title {\n    margin-top: 24px;\n    font-size: 32px;\n    font-weight: bold;\n  }\n"])),(function(e){return e.theme.textFaded}));function Gc(e){return c.a.createElement(Wc,{onClick:function(e){return document.getElementById("search-page-input").focus()}},c.a.createElement("div",{className:"mx-3"},c.a.createElement("i",{class:"fas fa-search icon"})),c.a.createElement("input",{onKeyDown:function(t){"Enter"===t.key&&e.search()},id:"search-page-input",type:"text",className:"flex-1",value:e.searchString,onChange:function(t){return e.updateSearchString(t.target.value)}}),c.a.createElement("div",{className:"h-full"},c.a.createElement(Vc,null,"Search")))}var Wc=f.b.div(Lc||(Lc=Object(i.a)(["\n  border-radius: 8px;\n  overflow: hidden;\n  display: flex;\n  padding: 10px 14px;\n  cursor: text;\n  height: 56px;\n  font-size: 16px;\n  width: 100%;\n  flex-direction: row;\n  align-items: center;\n  background: ",";\n  box-shadow: 3px 3px 18px rgba(0, 0, 0, 0.07);\n  /* border: ","; */\n  .icon {\n    color: ",";\n    opacity: 0.6;\n    font-size: 16px;\n    padding: 4px;\n  }\n  input {\n    background: transparent;\n    font-size: 16px;\n    font-weight: 500;\n    :focus,\n    :active {\n      outline: none;\n    }\n  }\n"])),(function(e){return e.theme.background_1}),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.theme.icons})),Vc=f.b.button(Bc||(Bc=Object(i.a)(["\n  background: ",";\n  border: ",";\n  color: ",";\n  font-size: 14px;\n  font-weight: 500;\n  border-radius: 8px;\n  height: 100%;\n  width: 80px;\n  :hover{\n    background: ","\n  }\n"])),(function(e){return e.theme.background_1}),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.theme.text}),(function(e){return e.theme.background_3}));var Kc={setSearch:k};var Yc,Jc=Object(A.b)((function(e){return{}}),Kc)((function(e){var t=Object(V.g)();Object(r.useEffect)((function(){!function(){v.apply(this,arguments)}(),l(e.match.params.searchString),e.setSearch(e.match.params.searchString)}),[]);var n=Object(r.useState)(""),a=Object(d.a)(n,2),o=a[0],l=a[1],i=Object(r.useState)([]),s=Object(d.a)(i,2),p=s[0],f=s[1],b=Object(r.useState)(!0),g=Object(d.a)(b,2),h=g[0],x=g[1];function v(){return(v=Object(u.a)(m.a.mark((function t(){var n,a,r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.length,n+40,a=e.match.params.searchString,console.log("searching "+a),r="/api/search/results/".concat(a),t.prev=5,t.next=8,fetch(r);case 8:return c=t.sent,t.next=11,c.json();case 11:o=t.sent,console.log(o),200==c.status&&(f(o),x(!1)),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(5),console.timeLog(t.t0),x(!1);case 20:case"end":return t.stop()}}),t,null,[[5,16]])})))).apply(this,arguments)}var E=Object(r.useState)("top"),y=Object(d.a)(E,2),w=(y[0],y[1],Object(r.useState)("newest")),j=Object(d.a)(w,2),O=j[0],k=j[1],N=Object(r.useState)(!1),_=Object(d.a)(N,2),S=(_[0],_[1],Object(r.useState)(!1)),C=Object(d.a)(S,2);return C[0],C[1],Object(r.useEffect)((function(){console.log(p)}),[p]),h?c.a.createElement("div",{className:"flex flex-col min-h-screen items-center pt-32"},c.a.createElement(Hn.b,null,c.a.createElement("meta",{charset:"utf-8"}),c.a.createElement("title",null,"".concat(e.match.params.searchString," - Search Imgbeam")),c.a.createElement("meta",{name:"description",content:"Search Imgbeam for pictures and videos about anything and everything."}),c.a.createElement("meta",{name:"image",content:"https://www.imgbeam.com/splash.png"}),c.a.createElement("meta",{itemprop:"name",content:"Search Imgbeam"}),c.a.createElement("meta",{itemprop:"description",content:"Search Imgbeam for pictures and videos about anything and everything."}),c.a.createElement("meta",{itemprop:"image",content:"https://www.imgbeam.com/splash.png"}),c.a.createElement("meta",{name:"twitter:card",content:"summary"}),c.a.createElement("meta",{name:"twitter:title",content:"".concat(e.match.params.searchString," - Search Imgbeam")}),c.a.createElement("meta",{name:"twitter:description",content:"Search Imgbeam for pictures and videos about anything and everything."}),c.a.createElement("meta",{name:"twitter:image:src",content:"https://www.imgbeam.com/splash.png"}),c.a.createElement("meta",{name:"og:title",content:"".concat(e.match.params.searchString," - Search Imgbeam")}),c.a.createElement("meta",{name:"og:description",content:"Search Imgbeam for pictures and videos about anything and everything."}),c.a.createElement("meta",{name:"og:image",content:"https://www.imgbeam.com/splash.png"}),c.a.createElement("meta",{name:"og:type",content:"website"})),c.a.createElement(Nn.a,{size:20,color:"white"})):c.a.createElement("div",{className:" w-full ",style:{}},c.a.createElement(Hn.b,null,c.a.createElement("meta",{charset:"utf-8"}),c.a.createElement("title",null,"".concat(e.match.params.searchString," - Search Imgbeam")),c.a.createElement("meta",{name:"description",content:"Search Imgbeam for pictures and videos about anything and everything."}),c.a.createElement("meta",{name:"image",content:"https://www.imgbeam.com/splash.png"}),c.a.createElement("meta",{itemprop:"name",content:"".concat(e.match.params.searchString," - Search Imgbeam")}),c.a.createElement("meta",{itemprop:"description",content:"Search Imgbeam for pictures and videos about anything and everything."}),c.a.createElement("meta",{itemprop:"image",content:"https://www.imgbeam.com/splash.png"}),c.a.createElement("meta",{name:"twitter:card",content:"summary"}),c.a.createElement("meta",{name:"twitter:title",content:"".concat(e.match.params.searchString," - Search Imgbeam")}),c.a.createElement("meta",{name:"twitter:description",content:"Search Imgbeam for pictures and videos about anything and everything."}),c.a.createElement("meta",{name:"twitter:image:src",content:"https://www.imgbeam.com/splash.png"}),c.a.createElement("meta",{name:"og:title",content:"".concat(e.match.params.searchString," - Search Imgbeam")}),c.a.createElement("meta",{name:"og:description",content:"Search Imgbeam for pictures and videos about anything and everything."}),c.a.createElement("meta",{name:"og:image",content:"https://www.imgbeam.com/splash.png"}),c.a.createElement("meta",{name:"og:type",content:"website"})),c.a.createElement("div",{className:"text-xl flex flex-col justify-center items-center text-center"},c.a.createElement(Hc,null,c.a.createElement("div",{className:"container mx-auto"},c.a.createElement("div",{id:"search-page-bar",className:"mx-auto flex pt-12 flex-col items-center",style:{maxWidth:"720px",width:"100%"}},c.a.createElement(Gc,{search:function(){t.push("/search/".concat(o))},updateSearchString:l,searchString:o})),c.a.createElement("div",null,c.a.createElement("h1",{className:"search-title"},e.match.params.searchString.charAt(0).toUpperCase()+e.match.params.searchString.slice(1)),c.a.createElement("h2",{className:"breakdown"},"Browse ",p.length," ",e.match.params.searchString," ","results"),c.a.createElement("div",{className:"text-sm mt-6"},c.a.createElement("div",null,"Sorting by date"),c.a.createElement("div",{className:"flex flex-row mt-2"},c.a.createElement(Rc,{disable:"oldest"===O,action:function(e){return f(Object(It.a)(p).sort((function(e,t){return new Date(t.date_created)-new Date(e.date_created)}))),void k("newest")},string:"Newest"}),c.a.createElement("div",{className:"mr-4"}),c.a.createElement(Rc,{disable:"newest"===O,action:function(e){return f(Object(It.a)(p).sort((function(e,t){return new Date(e.date_created)-new Date(t.date_created)}))),void k("oldest")},string:"Oldest"})))))),(null===p||void 0===p?void 0:p.length)>0&&c.a.createElement(Sa,{galleries:p})))}));function Qc(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1];Object(r.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]);var l=Object(r.useState)(!0),i=Object(d.a)(l,2),s=i[0],p=i[1];function f(){return(f=Object(u.a)(m.a.mark((function t(){var n,a,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),n=e.match.params.tagstring,a="/api/search/tags?tag=".concat(n),t.prev=3,t.next=6,fetch(a);case 6:return r=t.sent,t.next=9,r.json();case 9:c=t.sent,console.log(c),c&&o(c),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0);case 17:return t.prev=17,p(!1),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[3,14,17,20]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){document.title="#"+e.match.params.tagstring+" - imgbeam"})),s?c.a.createElement("div",{className:"flex flex-col items-center justify-center",style:{width:"100%",height:"400px"}},c.a.createElement("div",{className:"text-white font-bold text-sm"},"Searching for tag.")):c.a.createElement("div",{className:"text-white"},c.a.createElement("div",{id:"tag-results-header",className:"py-12",style:{background:"linear-gradient(to bottom, ".concat(Gt()(e.match.params.tagstring),"55, ").concat(Gt()(e.match.params.tagstring),"00")}},c.a.createElement("h2",{className:"font-bold text-5xl"},c.a.createElement("span",{className:"opacity-50"},"#"),e.match.params.tagstring.replace("_"," ")),c.a.createElement("h4",null,a.length," galleries.")),c.a.createElement(Sa,{usernames:!0,avatars:!0,galleries:a}))}var Xc;f.b.div(Yc||(Yc=Object(i.a)(["\n  video {\n    object-fit: cover;\n  }\n"])));function qc(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1];function l(){return(l=Object(u.a)(m.a.mark((function t(){var n,a,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.match.params.userstring,a="/search/users?user=".concat(n),t.prev=2,t.next=5,fetch(a);case 5:return r=t.sent,t.next=8,r.json();case 8:c=t.sent,console.log(c),c.success&&o(c.users),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log();case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]),c.a.createElement("div",{className:"text-white container mx-auto max-w-5xl mt-8"},c.a.createElement("h2",{className:"font-bold text-2xl"},"User Search for ",e.match.params.userstring),c.a.createElement("div",{className:"user-list text-left "},c.a.createElement("ul",{className:"mt-8",style:{background:"#373737"}},a.map((function(e,t){return c.a.createElement("li",{className:"",key:"user-result-list-key-".concat(t)},c.a.createElement("a",{href:"/user/".concat(e.username),className:"p-3 hover:opacity-75 block"},c.a.createElement("div",{className:"flex flex-row"},c.a.createElement("div",{className:"avatar-container bg-green-500",style:{width:"60px",height:"60px"}}),c.a.createElement("div",{className:"info-container ml-3"},c.a.createElement("h3",{className:"font-bold "},e.username),c.a.createElement("p",{className:"text-xs opacity-50"},"Member since"," ",$t()(e.date_created).format("MMM d yyyy")),c.a.createElement("div",{className:"rank text-xs opacity-50"},e.rank," - ",e.points||0," pts")))))})))))}function Zc(e){var t=Object(r.useState)(null),n=Object(d.a)(t,2),a=n[0],o=n[1];function l(){return(l=Object(u.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/notifications/api/clear?notification_id=".concat(t),e.prev=1,e.next=4,fetch(n,{method:"DELETE",credentials:"include"});case 4:return a=e.sent,e.next=7,a.json();case 7:e.sent.success?(console.log("cleared"),s(),Object(p.b)("Notification Cleared")):console.log("error clearing notification"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function i(){return(i=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/notifications/api/clear/all",e.prev=1,e.next=4,fetch("/notifications/api/clear/all",{method:"DELETE",credentials:"include"});case 4:return t=e.sent,e.next=7,t.json();case 7:e.sent.success?(console.log("cleared"),s(),Object(p.b)("All Notifications Cleared")):console.log("error clearing notification"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/notifications/api/get/all",e.prev=1,e.next=4,fetch("/notifications/api/get/all");case 4:return n=e.sent,e.next=7,n.json();case 7:(a=e.sent).success&&o(a.notifications),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(r.useState)((function(){s()}),[]),Object(r.useEffect)((function(){console.log(a)}),[a]),e.signedIn?a?c.a.createElement("div",{className:"text-white text-left container mx-auto mt-12 "},null!==a&&c.a.createElement("div",{className:"",style:{maxWidth:"420px"}},c.a.createElement("div",{id:"notification-control",className:"w-full"},c.a.createElement("button",{onClick:function(e){return function(){return i.apply(this,arguments)}()},className:"py-1 px-6 bg-gray-900"},"Clear All Notifications")),a.map((function(e,t){return c.a.createElement("div",{className:"flex flex-row overflow-hidden bg-gray-700 my-2",style:{borderRadius:"4px"}},c.a.createElement(K.b,{to:"/beam/".concat(e.gallery_id),className:"flex-grow hover:opacity-75"},c.a.createElement("div",{className:"post-title-wrapper p-3"},c.a.createElement("h3",{className:"font-bold text-lg"},e.title)),c.a.createElement("div",{key:"notification-".concat(t),className:"p-3 "},c.a.createElement("p",{className:"mt-4 font-bold"},'"',e.message,'"'),c.a.createElement("h6",{className:"text-xl font-extrabold"},c.a.createElement("span",{className:"block leading-6 text-sm"},e.username)),e.reply_id?c.a.createElement("p",{className:"opacity-75 text-xs"},"replied  to your comment."):c.a.createElement("p",{className:"opacity-75 text-xs"},"commented on your post."),c.a.createElement("div",{className:""},c.a.createElement("p",{className:"font-bold text-xs opacity-50"},$t()(e.date_created).fromNow())))),c.a.createElement("button",{className:"self-stretch",onClick:function(t){return function(e){return l.apply(this,arguments)}(e.comment_notification_id)}},c.a.createElement("div",{className:"flex flex-col items-center justify-center bg-gray-900 hover:opacity-75 h-full"},c.a.createElement("i",{class:"fas fa-times block mx-4"}))))})))):c.a.createElement("div",{className:"text-white py-8 font-bold"},c.a.createElement("h2",null,"No New Notifications")):c.a.createElement(_t,{header:"Sign up to get alerts.",icon:"fas fa-bell",subheader:"Sign in or create a new account to start receiving notifications about your favorite posters and artists."})}function $c(e){return c.a.createElement(no,{id:"sort-menu"},c.a.createElement("div",{className:"overlay fixed top-0 bottom-0 left-0 right-0",onClick:function(t){return e.toggleMenu(!1)},style:{zIndex:9999}}),c.a.createElement("ul",null,e.options.map((function(e,t){return c.a.createElement("li",{key:"option-".concat(e)},e)}))))}var eo,to,no=f.b.div(Xc||(Xc=Object(i.a)(["\n    background: ",";\n    border-radius: 8px;\n    text-align: left;\n    position: absolute;\n    top: 100%;\n    left: 0;\n    z-index: 9999;\n    margin-top: 12px;\n    border: ",";\n    box-shadow: 2px 2px 18px rgba(0,0,0,.1);\n"])),(function(e){return e.theme.background_1}),(function(e){return"1px solid ".concat(e.theme.border)}));function ao(e){var t=Object(r.useState)("trending"),n=Object(d.a)(t,2),a=n[0],o=(n[1],Object(r.useState)(!1)),l=Object(d.a)(o,2),i=l[0],s=l[1];function p(){var t=document.body.scrollHeight,n=window.innerHeight,a=window.scrollY;e.setScrollPosition(a),t<a+n+400&&(I||w.current||(z(),console.log("getting more")))}Object(r.useEffect)((function(){return z(),console.log("galleries already present"),document.title="Imgbeam - The Nexus of all things Interweb",document.addEventListener("scroll",p),function(){document.removeEventListener("scroll",p)}}),[]);var f=Object(r.useState)(!1),b=Object(d.a)(f,2),g=b[0],h=b[1],x=Object(r.useState)(!1),v=Object(d.a)(x,2),E=v[0],y=v[1],w=Object(r.useRef)(E);w.current=E;var j=Object(r.useState)([]),O=Object(d.a)(j,2),k=O[0],N=O[1],_=Object(r.useRef)(k);function S(){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(m.a.mark((function e(){var t,n,r,c,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=2;break}return e.abrupt("return");case 2:return console.log("getting galleries from "+a),t=_.current.length,n=t+60,r="/api/trending/".concat(a,"?from=").concat(t,"&to=").concat(n),console.log("fetching "+t+" "+n),e.prev=7,e.next=10,fetch(r);case 10:return c=e.sent,e.next=13,c.json();case 13:if(o=e.sent,200!==c.status){e.next=24;break}if(0!==o.length){e.next=19;break}return y(!0),D(!1),e.abrupt("return");case 19:l=o.filter((function(e){var t=!0;return k.forEach((function(n){n.gallery_id===e.gallery_id&&(t=!1)})),t})),console.log(l),N([].concat(Object(It.a)(k),Object(It.a)(l))),D(!1),g||h(!0);case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(7),console.log(e.t0),D(!1);case 30:case"end":return e.stop()}}),e,null,[[7,26]])})))).apply(this,arguments)}_.current=k,Object(r.useEffect)((function(){D(!1),N([]),y(!1)}),[a]),Object(r.useEffect)((function(){0===k.length&&z()}),[k]);var T=Object(r.useState)(!1),A=Object(d.a)(T,2),I=A[0],D=A[1];function z(){1==I||E||D(!0)}return Object(r.useEffect)((function(){I&&S()}),[I]),c.a.createElement(lo,{id:"app-home",className:"min-h-screen relative px-4",style:{zIndex:1}},c.a.createElement("div",null,c.a.createElement("h1",{className:"text-center font-bold text-4xl mt-4 relative z-10"}),c.a.createElement("h2",{className:"text-center headline relative z-10 opacity-50"},"Avoiding copyright infringement since 2021.")),c.a.createElement("div",{className:"controls w-full flex flex-row justify-between items-center"},c.a.createElement(ro,{modes:["trending","new","alltime"],sortMenu:i,action:s,string:"Trending",icon:"fa-fire"})),c.a.createElement("div",{className:"trending-container z-10  mx-auto relative",style:{}},c.a.createElement("div",{className:"flex flex-row justify-start"},g?c.a.createElement(Sa,{galleries:k,getMore:S}):c.a.createElement(Nn.a,{color:"white",size:30})),c.a.createElement("div",{id:"getting-more",className:"w-full py-16 flex flex-col justify-center items-center"},k.length>0&&I&&c.a.createElement(Nn.a,{color:"white",size:30}))))}function ro(e){return c.a.createElement(co,{onClick:function(t){return e.action(!e.sortMenu)}},c.a.createElement("div",{className:"mr-3"},e.string),c.a.createElement("div",null,c.a.createElement("i",{className:"fas ".concat(e.icon," icon")})),e.sortMenu&&c.a.createElement($c,{options:e.modes,sortMenu:e.sortMenu,toggleMenu:e.action}))}var co=f.b.button(eo||(eo=Object(i.a)(["\n  border: ",";\n  border-radius: 8px;\n  height: 32px;\n  display: flex;\n  position: relative;\n  font-size: 14px;\n  color: ",";\n  padding: 4px 8px;\n  font-weight: 600;\n  flex-direction: row;\n  align-items: center;\n  :hover {\n    background: ",";\n  }\n  .icon {\n    font-size: 16px;\n    color: ",";\n  }\n"])),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.theme.text}),(function(e){return e.theme.background_1}),(function(e){return e.theme.icons}));var oo,lo=f.b.div(to||(to=Object(i.a)(["\n  .headline{\n    font-weight: 900;\n    font-size: 22px;\n    letter-spacing: -1\ud83e\udd16px;\n  }\n"])));function io(){var e=Object(V.g)();return c.a.createElement("div",null,c.a.createElement(so,{onClick:function(t){return e.push("/new")}},c.a.createElement("div",{className:"mr-3"},c.a.createElement("i",{className:"fas fa-plus"})),c.a.createElement("div",null,"New Post")))}var so=f.b.button(oo||(oo=Object(i.a)(["\n  background: ",";\n  border: ",";\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 8px 12px;\n  margin-top: 32px;\n  :hover{\n    color: ",";\n    background: ",";\n  }\n"])),(function(e){return e.theme.background_1}),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.theme.textFaded}),(function(e){return e.theme.background_3}));var mo=Object(A.b)((function(e){return{signedIn:e.app_state_reducer.signedIn,account:e.account_reducer.account}}))((function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1];function l(){return(l=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/account/posts",e.next=4,fetch("/api/account/posts",{credentials:"include"});case 4:if(200!=(t=e.sent).status){e.next=11;break}return e.t0=o,e.next=9,t.json();case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:e.next=16;break;case 13:e.prev=13,e.t2=e.catch(0),console.log(e.t2);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]),e.signedIn?c.a.createElement("div",{className:"mx-4"},c.a.createElement("div",null,c.a.createElement(io,null)),c.a.createElement(Sa,{insert:io,galleries:a})):c.a.createElement("div",{className:"mx-4"},c.a.createElement(_t,{icon:"fas fa-photo-video",subheader:"Sign in to view your contributions.",header:"Uploads"}))}));var uo,po,fo;n(209);function bo(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)([]),i=Object(d.a)(l,2),s=i[0],p=i[1],f=Object(r.useState)(null),b=Object(d.a)(f,2),g=b[0],h=b[1];function x(){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/account/favorites/folders",e.prev=1,e.next=4,fetch("/api/account/favorites/folders",{credentials:"include"});case 4:if(200!=(t=e.sent).status){e.next=11;break}return e.t0=p,e.next=9,t.json();case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:e.next=16;break;case 13:e.prev=13,e.t2=e.catch(1),console.log(e.t2);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/account/favorites/folders/".concat(g),e.prev=1,e.next=4,fetch(t,{credentials:"include"});case 4:if(200!=(n=e.sent).status){e.next=10;break}return e.next=8,n.json();case 8:a=e.sent,o(a);case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}Object(r.useEffect)((function(){x()}),[]),Object(r.useEffect)((function(){E()}),[g]);var w=Object(r.useState)(null),j=Object(d.a)(w,2),O=j[0],k=j[1],N=Object(r.useState)(null),_=Object(d.a)(N,2),S=_[0],C=_[1];function T(){return(T=Object(u.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/account/favorites/move/".concat(t,"/").concat(O),e.prev=1,e.next=4,fetch(n,{credentials:"include",method:"PUT"});case 4:200==e.sent.status&&E(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return e.signedIn?c.a.createElement("div",{className:"mx-4"},c.a.createElement(go,{active:g,onDrop:function(e){e.preventDefault(),e.stopPropagation(),function(e){T.apply(this,arguments)}(S.split("-")[1])},setDropFolder:k,setActive:h,getFolders:x,folders:s}),c.a.createElement(Sa,{favoritesMode:!0,draggable:!0,setDragged:C,galleries:a,title:s[s.map((function(e){return e.folder_id})).indexOf(g)]?s[s.map((function(e){return e.folder_id})).indexOf(g)].name:"Uncategorized"})):c.a.createElement("div",{className:"text-white"},c.a.createElement(_t,{header:"Keep a list of what you like.",icon:"fas fa-heart",subheader:"Sign in save and organize your favorite posts."}))}function go(e){return c.a.createElement("div",{className:"flex flex-row pt-8  overscroll-x-auto"},c.a.createElement(ho,{active:null==e.active,folderObject:e.folderObject||{name:"Uncategorized",folder_id:null},setDropFolder:e.setDropFolder,onDrop:e.onDrop,setActive:e.setActive,getFolders:e.getFolders}),c.a.createElement(xo,{getFolders:e.getFolders}),e.folders.map((function(t){return c.a.createElement("div",null,c.a.createElement(ho,{active:e.active===t.folder_id,onDrop:e.onDrop,key:"favorites-folder-".concat(t.name),setActive:e.setActive,folderObject:t,getFolders:e.getFolders,setDropFolder:e.setDropFolder}))})))}function ho(e){Object(r.useEffect)((function(){o(e.folderObject.name)}),[]);var t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(!1),i=Object(d.a)(l,2),s=i[0],p=i[1];function f(){return(f=Object(u.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p(!1),a!==e.folderObject.name){t.next=3;break}return t.abrupt("return");case 3:return n="/api/account/favorites/folders/".concat(e.folderObject.folder_id,"/").concat(a),t.prev=4,t.next=7,fetch(n,{credentials:"include",method:"PUT"});case 7:200==t.sent.status&&e.getFolders(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))).apply(this,arguments)}var b=Object(r.useState)(0),g=Object(d.a)(b,2),h=g[0],x=g[1];return Object(r.useEffect)((function(){1==h&&document.getElementById("folder-".concat(e.folderObject.folder_id)).classList.add("animate__shakeY"),0==h&&document.getElementById("folder-".concat(e.folderObject.folder_id)).classList.remove("animate__shakeY")}),[h]),Object(r.useEffect)((function(){s&&document.getElementById("favorite-folder-input-".concat(e.folderObject.folder_id))&&document.getElementById("favorite-folder-input-".concat(e.folderObject.folder_id)).focus()}),[s]),c.a.createElement(Eo,{active:e.active,onDrop:function(t){return e.onDrop(t)},onDragLeave:function(e){return x(h-1)},onDragEnter:function(e){return x(h+1)},onDragOver:function(t){return function(t){t.stopPropagation(),t.preventDefault(),e.setDropFolder(e.folderObject.folder_id)}(t)}},c.a.createElement(wo,{active:e.active,id:"folder-".concat(e.folderObject.folder_id),className:"animate__animated ",onClick:function(t){e.setActive(e.folderObject.folder_id)}}),c.a.createElement("div",{className:"folder-info flex flex-row items-center pt-4"},s?c.a.createElement("input",{id:"favorite-folder-input-".concat(e.folderObject.folder_id),type:"text",onKeyDown:function(t){return function(t){13===t.keyCode&&document.getElementById("favorite-folder-input-".concat(e.folderObject.folder_id)).blur()}(t)},onChange:function(e){return function(e){a.length<48&&o(e.target.value)}(e)},value:a,onBlur:function(e){return function(){return f.apply(this,arguments)}(e)}}):c.a.createElement("div",{onClick:function(e){return p(!0)},className:"name w-full text-center font-bold",style:{fontSize:"11px",cursor:"pointer"}},e.folderObject.name)))}function xo(e){function t(){return(t=Object(u.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/account/favorites/folders",t.prev=1,t.next=4,fetch("/api/account/favorites/folders",{credentials:"include",method:"POST"});case 4:200==t.sent.status&&e.getFolders(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return c.a.createElement(Eo,{className:"self-stretch px-4 flex flex-col items-center justify-start"},c.a.createElement(yo,{className:"flex flex-col items-center justify-center",onClick:function(e){return function(e){return t.apply(this,arguments)}(e)}},c.a.createElement("i",{className:"fas fa-plus opacity-50"})))}var vo,Eo=f.b.div(uo||(uo=Object(i.a)(["\n  /* padding: 12px 24px; */\n  width: 120px;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: start;\n  color: ",";\n  input{\n    background: transparent;\n    font-size: 12px;\n    max-width: 160px;\n    outline:none;\n    text-align: center;\n    :focus{\n      outline: none;\n    }\n  }\n"])),(function(e){return e.active?e.theme.text:"rgba(140,140,140,1)"})),yo=f.b.button(po||(po=Object(i.a)(["\n  width: 82px;\n  height: 64px;\n  background: ",";\n  border-radius: 8px;\n"])),(function(e){return e.theme.background_3})),wo=f.b.button(fo||(fo=Object(i.a)(["\n  width: 82px;\n  height: 64px;\n  background: ",";\n  box-shadow: 2px 2px 6px rgba(0,0,0,.4);\n  transform: ",";\n  opacity: ",";\n  border-radius: 8px;\n  :hover{\n    transform: scale(1.09);\n  }\n  .animate__animated.animate__shakeY  {\n  }\n  :after{\n    content: '';\n    position: absolute;\n    top: -6px;\n    left:0;\n    border-radius: 8px;\n    width: 40px;\n    height: 20px;\n    background: ",";\n\n  }\n"])),(function(e){return e.theme.success}),(function(e){return e.active?"scale(1.2)":"scale(1)"}),(function(e){return e.active?1:.5}),(function(e){return e.theme.success}));var jo,Oo,ko,No,_o={signIn:h,signOut:x},So=f.b.div(vo||(vo=Object(i.a)(["\n  transition: all .2s linear; \n  background-color: ",";\n"])),(function(e){return e.theme.background_2})),Co=Object(A.b)((function(e){return{createMenu:e.app_state_reducer.createMenu,sidebar:e.app_state_reducer.sidebar,account:e.account_reducer.account,signedIn:e.app_state_reducer.signedIn}}),_o)((function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1];function l(e){o(e)}var i=Object(r.useState)(0),s=Object(d.a)(i,2),m=s[0],u=s[1];return c.a.createElement(So,{className:"text-left  pt-16 relative",style:{zIndex:997,marginLeft:"".concat(e.sidebar?"240px":"15px"),minHeight:"calc(100vh)"}},c.a.createElement(V.b,{path:"/",exact:!0,render:function(e){return c.a.createElement(ao,{globalGalleries:a,scrollPosition:m,setScrollPosition:u,setGlobalGalleries:l})}}),c.a.createElement(V.b,{path:"/user/:username",component:Ja}),c.a.createElement(V.b,{path:"/u/user/:username",component:Ja}),c.a.createElement(V.b,{exact:!0,path:"/edit/beam/:gallery_id",component:Tr}),c.a.createElement(V.b,{path:"/account",render:function(e){return c.a.createElement(zc,e)}}),c.a.createElement(V.b,{path:"/uploads",exact:!0,render:function(){return c.a.createElement(mo,{signedIn:e.signedIn})}}),c.a.createElement(V.b,{path:"/leadboard/:type",exact:!0,component:Jr}),c.a.createElement(V.b,{path:"/notifications",exact:!0,render:function(){return c.a.createElement(Zc,{signedIn:e.signedIn})}}),c.a.createElement(V.b,{path:"/following",exact:!0,render:function(){return c.a.createElement(Ct,{signedIn:e.signedIn})}}),c.a.createElement(V.b,{path:"/favorites",exact:!0,render:function(){return c.a.createElement(bo,{signedIn:e.signedIn})}}),c.a.createElement(V.b,{path:"/history",exact:!0,render:function(){return c.a.createElement(gc,{signedIn:e.signedIn})}}),c.a.createElement(V.b,{path:"/search/:searchString",render:function(e){return c.a.createElement(Jc,Object.assign({},e,{key:Date.now()}))}}),c.a.createElement(V.b,{path:"/tag/:tagstring",exact:!0,render:function(e){return c.a.createElement(Qc,Object.assign({key:Date.now()},e))}}),c.a.createElement(V.b,{path:"/users/:userstring",render:function(e){return c.a.createElement(qc,e)}}),c.a.createElement(V.b,{path:"/create",exact:!0,render:function(){return c.a.createElement(oc,{signedIn:e.signedIn})}}))})),To=n.p+"static/media/imgbeam_logo.02417a9c.svg",Ao=n.p+"static/media/bg_1.ffcdb534.jpg";function Io(e){function t(e){e.preventDefault()}return Object(r.useEffect)((function(){document.addEventListener("scroll",t)}),[]),c.a.createElement("div",{className:"fixed top-0 left-0 w-full h-full flex flex-col items-center justify-center",style:{zIndex:9999}},c.a.createElement("div",{onClick:function(t){return e.close(!1)},className:"overlay absolute top-0 bottom-0 left-0 right-0",style:{background:"rgba(0,0,0,.7)",zIndex:3}}),c.a.createElement("div",{className:"overlay absolute top-0 bottom-0 left-0 right-0",style:{pointerEvents:"none",zIndex:2}}),c.a.createElement(Lo,{className:"bg-gray-800 shadow-lg relative text-white",style:{zIndex:4,borderRadius:"26px",overflow:"hidden"}},c.a.createElement("div",{id:"login-modal-logo",className:"w-full px-16 py-8",style:{background:"url(".concat(Ao,")"),backgroundSize:"cover",backgroundPosition:"center"}},c.a.createElement("img",{src:To,className:"w-64 ",alt:"",style:{filter:"drop-shadow(0 0 8px rgba(0,0,0,.8))"}})),c.a.createElement("div",{className:"my-8 px-6 text-white font-bold text-lg"},c.a.createElement("a",{href:"/login",className:"text-purple-400"},"Log In ")," to proceed with that action."),c.a.createElement("form",{action:"/login",method:"POST",className:" flex flex-col w-full px-8 pb-4"},c.a.createElement(Ro,{className:"outline-none focus:outline-none mb-6",placeholder:"username or email",type:"text",name:"username",id:"login-overlay-login"}),c.a.createElement(Ro,{className:"outline-none focus:outline-none mb-6",placeholder:"password",type:"password",name:"password",id:"logib-overlay-password"}),c.a.createElement(Bo,{type:"submit"},"Log In"),c.a.createElement("div",{className:"text-gray-500 cursor-pointer mt-4 mb-4",onClick:function(t){return e.close(!1)}},"cancel"))))}var Do,zo,Fo,Po,Ro=f.b.input(jo||(jo=Object(i.a)(["\n    background: rgba(100,100,100,.1);\n    border: 1px solid #373737;\n    padding: 8px 10px;\n    border-radius: 16px;\n\n"]))),Uo=Object(f.c)(Oo||(Oo=Object(i.a)(["\n from{\n     transform: scale(.6);\n     opacity: 0;\n }\n to{\n    transform: scale(1);\n     opacity: 1;\n }\n"]))),Lo=f.b.div(ko||(ko=Object(i.a)(["\n    animation: "," .2s cubic-bezier(0.68, -0.6, 0.32, 1.6) forwards;\n\n"])),Uo),Bo=f.b.button(No||(No=Object(i.a)(["\n    background: linear-gradient(to right, #6134da , #8f71e2 );\n    color: white;\n    font-weight: bold;\n    padding: 6px;\n    border-radius: 16px;\n"]))),Mo=n(85),Ho=n.n(Mo);function Go(e){return c.a.createElement(fl,{className:"flex flex-row min-h-screen text-left relative"},c.a.createElement(Vo,null),c.a.createElement(Wo,{id:"settings-content"},c.a.createElement(V.d,null,c.a.createElement(V.b,{to:"/account"}),c.a.createElement(V.b,{to:"/application"}),c.a.createElement(V.b,{to:"/notifications"}),c.a.createElement(V.b,{to:"/privacy"}))))}var Wo=f.b.div(Do||(Do=Object(i.a)(["\n    margin-left: 240px;\n    min-height: 100vh;\n    flex-grow: 1;\n    background: ","\n"])),(function(e){return e.theme.background_1}));function Vo(){return c.a.createElement(bl,{id:"settings-sidebar"},c.a.createElement("div",{id:"settings-title",className:"text-lg font-semibold",style:{paddingLeft:"24px",paddingBottom:"24px"}},c.a.createElement("h3",null,"SETTINGS")),c.a.createElement("ul",null,c.a.createElement(Ko,{string:"Account",link:"/settings"}),c.a.createElement(Ko,{string:"Application",link:"/settings/application"}),c.a.createElement(Ko,{string:"Notifications",link:"/settings/notifications"}),c.a.createElement(Ko,{string:"Privacy",link:"/settings/privacy"})))}function Ko(e){return c.a.createElement("li",null,c.a.createElement(K.b,{to:e.link},c.a.createElement(pl,null,e.string)))}var Yo,Jo,Qo,Xo,qo,Zo,$o,el,tl,nl,al,rl,cl,ol,ll,il,sl,ml,ul,dl,pl=f.b.div(zo||(zo=Object(i.a)(["\n  display: block;\n  width: 100%;\n  padding: 12px 24px;\n  cursor: pointer;\n  :hover {\n    background: ",";\n  }\n"])),(function(e){return e.theme.background_1})),fl=f.b.div(Fo||(Fo=Object(i.a)(["\n  margin-top: ",";\n"])),(function(e){return e.theme.navbar_height})),bl=f.b.div(Po||(Po=Object(i.a)(["\n  padding: 24px 0;\n  width: 240px;\n  position: fixed;\n  z-index: 9999;\n  left: 0;\n  background-color: ",";\n  height: ",";\n"])),(function(e){return e.theme.background_3}),(function(e){return"calc(100vh - ".concat(e.theme.navbar_height,")")}));function gl(e){function t(t){var n=new FileReader;n.onload=function(n){t.typeString=function(e){if(e.includes("video"))return"video";return"image"}(t.type),t.url=n.target.result,e.addFile(t)},n.readAsDataURL(t)}function n(t,n){t.stopPropagation(),e.removeFile(n)}return e.filesToDo[0]&&console.log(e.filesToDo[0]),c.a.createElement(kl,null,c.a.createElement("div",{id:"main-drop"},c.a.createElement(wl,{id:"drop-zone",onDragOver:function(e){return function(e){console.log(e.dataTransfer)}(e)},occupied:e.filesToDo[0],onClick:function(e){return document.getElementById("browse").click()}},e.filesToDo.length>0&&c.a.createElement(Nl,{index:0,action:n}),e.filesToDo.length>0&&c.a.createElement("div",{className:"overlay absolute  top-0 bottom-0 left-0 right-0 z-10"},"image"==e.filesToDo[0].typeString?c.a.createElement("img",{src:e.filesToDo[0].url,alt:"",style:{width:"100%",height:"100%",objectFit:"contain"}}):c.a.createElement("video",{src:e.filesToDo[0].url,alt:"",muted:!0,autoPlay:!0,style:{width:"100%",height:"100%",objectFit:"contain"}})),e.filesToDo[0]&&c.a.createElement("div",{className:"control-overlay z-50 absolute top-0 left-0 right-0 bottom-0"}),c.a.createElement("div",{className:"absolute top-0 right-0 bottom-0 left-0 flex flex-col items-center justify-center"},c.a.createElement("div",{className:"relative"},c.a.createElement("i",{className:"fas fa-cloud-upload-alt icon"})),c.a.createElement("div",{className:"font-bold text-2xl"},"Drop an Image or Video"),c.a.createElement("div",null,c.a.createElement(yl,{htmlFor:"browse"},"or browse for a file",c.a.createElement("input",{onChange:function(e){return t(e.target.files[0])},id:"browse",style:{display:"none"},type:"file",accept:".jpg,.jpeg,.png,.gif,.apng,.tiff,.tif,.bmp,.xcf,.webp,.mp4,.mov,.avi,.webm,.mpeg,.flv,.mkv,.mpv,.wmv"}))),c.a.createElement("div",{className:"subhead"},"(20MB per file limit, up to 80MB per upload)")))),c.a.createElement("div",{className:"allowed mt-2"},"Accepted Formats",c.a.createElement("div",{className:"allowed-sub"},"images (.jpg, .png, gif, .tif, .webp) videos (.mp4, .avi, .webm, .mov)")),e.filesToDo[0]&&c.a.createElement(jl,{filesToDo:e.filesToDo}),c.a.createElement(xl,{length:e.filesToDo.length,id:"more-images",className:"mt-6"},c.a.createElement("div",{className:"flex flex-row flex-wrap"},c.a.createElement(vl,{htmlFor:"add-media"},c.a.createElement("input",{type:"file",id:"add-media",className:"hidden",onChange:function(e){return t(e.target.files[0])},style:{display:"none"},accept:".jpg,.jpeg,.png,.gif,.apng,.tiff,.tif,.bmp,.xcf,.webp,.mp4,.mov,.avi,.webm,.mpeg,.flv,.mkv,.mpv,.wmv"}),c.a.createElement("div",null,c.a.createElement("i",{className:"fas fa-plus icon"}))),e.filesToDo.map((function(e,t){if(0!==t)return c.a.createElement(El,null,c.a.createElement(Nl,{index:t,action:n}),c.a.createElement("img",{src:e.url,alt:"",style:{width:"100%",height:"100%",objectFit:"contain"}}))})))))}function hl(){return c.a.createElement(Hn.a,null,c.a.createElement("meta",{charset:"utf-8"}),c.a.createElement("title",null,"New Post - ImgBeam, Capital of Memeland"),c.a.createElement("meta",{name:"description",content:"Upload something new to ImgBeam. Share memes, find new wallpapers, get gifs, and more."}),c.a.createElement("meta",{name:"image",content:"https://imgbeam.com/splash.png"}),c.a.createElement("meta",{itemprop:"name",content:"New Post - ImgBeam, Capital of Memeland"}),c.a.createElement("meta",{itemprop:"description",content:"Upload something new to ImgBeam. Share memes, find new wallpapers, get gifs, and more."}),c.a.createElement("meta",{itemprop:"image",content:"https://imgbeam.com/splash.png"}),c.a.createElement("meta",{name:"twitter:card",content:"summary"}),c.a.createElement("meta",{name:"twitter:title",content:"New Post - ImgBeam, Capital of Memeland"}),c.a.createElement("meta",{name:"twitter:description",content:"Upload something new to ImgBeam. Share memes, find new wallpapers, get gifs, and more."}),c.a.createElement("meta",{name:"twitter:image:src",content:"https://imgbeam.com/splash.png"}),c.a.createElement("meta",{name:"og:title",content:"New Post - ImgBeam, Capital of Memeland"}),c.a.createElement("meta",{name:"og:description",content:"Upload something new to ImgBeam. Share memes, find new wallpapers, get gifs, and more."}),c.a.createElement("meta",{name:"og:image",content:"https://imgbeam.com/splash.png"}),c.a.createElement("meta",{name:"og:type",content:"website"}))}var xl=f.b.div(Yo||(Yo=Object(i.a)(["\n  transition: all 0.2s linear;\n  overflow-y: auto;\n"]))),vl=f.b.label(Jo||(Jo=Object(i.a)(["\n  background-color: ",";\n  border: ",";\n  cursor: pointer;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 92px;\n  height: 64px;\n  .icon {\n    transition: all 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n    color: ",";\n  }\n  :hover {\n    background-color: ",";\n    .icon {\n      transform: scale(1.5);\n    }\n  }\n  margin-right: 16px;\n  overflow: hidden;\n"])),(function(e){return e.theme.background_2}),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.theme.secondary}),(function(e){return e.theme.background_2})),El=f.b.button(Qo||(Qo=Object(i.a)(["\n  background-color: ",";\n  border-radius: 8px;\n  display: flex;\n  margin-bottom: 16px;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 92px;\n  position: relative;\n  height: 64px;\n  margin-right: 16px;\n  overflow: hidden;\n"])),(function(e){return e.theme.background_3})),yl=f.b.label(Xo||(Xo=Object(i.a)(["\n  cursor: pointer;\n  font-weight: 700;\n  color: ",";\n"])),(function(e){return e.theme.tertiary})),wl=f.b.div(qo||(qo=Object(i.a)(["\n  transition: all 0.2s linear;\n  cursor: pointer;\n  background: ",";\n  box-shadow: 0 8px 12px -8px rgba(0,0,0,.7);\n  color: white;\n    border-radius: 12px;\n  display: flex;\n  overflow: hidden;\n  position: relative;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  &.active {\n    transform: scale(1.03);\n    background: ",";\n  }\n  .control-overlay {\n    transition: all 0.1s linear;\n    display: none;\n    opacity: 0;\n  }\n  :hover {\n    .drop-info {\n      opacity: 0.2;\n    }\n    .control-overlay {\n      display: flex;\n      opacity: 1;\n    }\n    .icon {\n      transform: scale(1.3);\n      opacity: 1;\n      margin-bottom: 20px;\n      color: white;\n    }\n  }\n  .overlay {\n    background-color: ",';\n  }\n  :after {\n    padding-top: 75%;\n    content: "";\n    display: block;\n  }\n  .icon {\n    opacity: 0;\n\n    transition: all 0.3s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n    font-size: 72px;\n  }\n  .subhead{\n    font-weight: bold;\n    color: white;\n    opacity: .7;\n  }\n'])),(function(e){return"linear-gradient(to top right, ".concat(e.theme.success,", ").concat(e.theme.secondary,")")}),(function(e){return e.theme.background_2}),(function(e){return e.theme.background_2}));function jl(e){return c.a.createElement(Ol,null,c.a.createElement("div",{className:"bar"},e.filesToDo.length," items"," ",c.a.createElement("span",{className:"sizes"},"(",(e.filesToDo.map((function(e){return e.size})).reduce((function(e,t){return e+t}))/1e6).toFixed(1)||0,"MB)")))}var Ol=f.b.div(Zo||(Zo=Object(i.a)(["\n  width: 100%;\n  margin-top: 24px;\n  border-radius: 8px;\n  overflow: hidden;\n  box-sizing: border-box;\n  font-size: 14px;\n  font-weight: 600;\n  .sizes {\n    color: ",";\n  }\n  .bar {\n    padding: 12px;\n    background: ",";\n  }\n"])),(function(e){return e.theme.textFaded}),(function(e){return e.theme.background_2})),kl=f.b.div($o||($o=Object(i.a)(["\n  flex: 1;\n  overflow-y: auto;\n  @media(min-width: 600px){\n    margin-right: 32px;\n\n  }\n\n  .allowed{\n    font-size: 14px;\n    font-weight: 600;\n    color: ",";\n  }\n  .allowed-sub{\n    font-size: 12px;\n  }\n"])),(function(e){return e.theme.textFaded}));function Nl(e){return c.a.createElement(_l,{className:"delete-button",onClick:function(t){return e.action(t,e.index)}},c.a.createElement("i",{className:"fas fa-times block"}))}var _l=f.b.button(el||(el=Object(i.a)(["\n  border-radius: 8px;\n  position: absolute;\n  justify-content: center;\n  align-items: center;\n  display: flex;\n  padding: 12px;\n  top: -10px;\n  z-index: 99;\n  right: -10px;\n  border: ",";\n  background: ",";\n"])),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.theme.background_1}));function Sl(e){return c.a.createElement(Fl,null,c.a.createElement(zl,{title:"Title"},c.a.createElement(Al,{onChange:e.setTitle,value:e.title_value,placeholder:"Add a title",type:"text",id:"title"})),c.a.createElement(zl,{title:"Tags"},c.a.createElement(Al,{addTag:e.addTag,tags:e.tags,removeTag:e.removeTag,deleteTag:e.deleteTag,onChange:e.setTagString,value:e.tagString,type:"text",id:"tags"}),c.a.createElement("div",{id:"suggest-tags",className:"mt-6"},c.a.createElement("h3",{className:"font-bold small-header text-sm opacity-50"},"Suggestions"),c.a.createElement("ul",{className:"flex flex-row flex-wrap"},c.a.createElement(Cl,{onClick:function(t){return e.tagLink("meme")}},"meme"),c.a.createElement(Cl,{onClick:function(t){return e.tagLink("movies")}},"movies"),c.a.createElement(Cl,{onClick:function(t){return e.tagLink("funny")}},"funny"),c.a.createElement(Cl,{onClick:function(t){return e.tagLink("sports")}},"sports")))),c.a.createElement(zl,{title:"Description"},c.a.createElement(Tl,{value:e.description,placeholder:"Optional",onChange:function(t){return e.setDescription(t.target.value)}})))}var Cl=f.b.button(tl||(tl=Object(i.a)(["\n  color: ",";\n  margin-right: 8px;\n"])),(function(e){return e.theme.success})),Tl=f.b.textarea(nl||(nl=Object(i.a)(["\n  background: ",";\n  border-radius: 8px;\n  width: 100%;\n  padding: 8px;\n  min-height: 120px;\n  :focus,\n  :active {\n    outline: none;\n  }\n"])),(function(e){return e.theme.background_3}));function Al(e){return c.a.createElement(Dl,null,e.tags&&e.tags.map((function(t){return c.a.createElement(Il,{onClick:function(n){return e.removeTag(t)}},c.a.createElement("div",{className:"absolute flex cursor-pointer flex-col items-center justify-center overflow-hidden delete-overlay top-0 left-0 right-0 bottom-0"},c.a.createElement("i",{className:"fas fa-times block"})),t)})),c.a.createElement("input",{className:"inline input",onChange:function(t){return e.onChange(t.target.value)},onKeyDown:function(t){return e.addTag?e.addTag(t):function(){}},value:e.value,placeholder:e.placeholder,type:"text"}))}var Il=f.b.div(al||(al=Object(i.a)(["\n  .delete-overlay {\n    opacity: 0;\n    background: ",";\n  }\n  background: ",";\n  border-radius: 3px;\n  margin-right: 4px;\n  position: relative;\n  display: inline;\n  padding: 4px 8px;\n  color: white;\n  :hover {\n    .delete-overlay {\n      opacity: 1;\n    }\n  }\n"])),(function(e){return e.theme.warning}),(function(e){return e.theme.background_colored_2})),Dl=f.b.div(rl||(rl=Object(i.a)(["\n  /* max-width: 250px; */\n  cursor: text;\n  padding: 8px 12px;\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  flex-direction: row;\n  border-radius: 8px;\n  min-height: 48px;\n\n  width: 100%;\n  background: ",";\n  input {\n    margin-left: 8px;\n    background: transparent;\n    outline: none;\n    width: 100%;\n    ::active,\n    :focus {\n      outline: none;\n    }\n  }\n"])),(function(e){return e.theme.background_3}));function zl(e){return c.a.createElement("fieldset",{className:"py-3"},c.a.createElement("div",{className:"font-bold mb-2"},e.title),e.children)}var Fl=f.b.div(cl||(cl=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n  width: 100%;\n  @media(min-width: 600px){\n    width: 340px;\n\n  }\n"])));function Pl(e){var t=Object(V.g)();return c.a.createElement(Rl,null,c.a.createElement(Ul,{className:"justify-start"},c.a.createElement(Ll,{onClick:function(n){return t.goBack(),void e.cancelUpload()},className:"flex relative"},"Cancel")),c.a.createElement("div",{className:"flex-1 hidden sm:flex flex-row  items-center justify-center"},c.a.createElement("div",{className:"text-sm"},"Beam me up, Scotty!",c.a.createElement("i",{className:"fas fa-user-astronaut colored fa-lg ml-4"}))),c.a.createElement(Ul,{className:"justify-end"},c.a.createElement(Bl,{onClick:function(t){return e.startUpload()},disabled:!e.valid,className:"flex relative"},"Submit to Imgbeam")))}var Rl=f.b.footer(ol||(ol=Object(i.a)(["\n  position: fixed;\n  padding: 0 24px;\n  bottom: 0;\n  display: flex;\n  flex-direction: row;\n  justify-items: center;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  z-index: 99;\n  height: 64px;\n  background: ",";\n  border-top: ",";\n  .colored {\n    color: ",";\n  }\n"])),(function(e){return e.theme.background_1}),(function(e){return"1px solid ".concat(e.theme.border)}),(function(e){return e.theme.success})),Ul=f.b.div(ll||(ll=Object(i.a)(["\n  width: 250px;\n  display: flex;\n  position: relative;\n  align-items: center;\n"]))),Ll=f.b.button(il||(il=Object(i.a)(["\n  border: ",";\n  border-radius: 8px;\n  padding: 8px 14px;\n  font-size: 14px;\n  font-weight: bold;\n"])),(function(e){return"1px solid ".concat(e.theme.border)})),Bl=f.b.button(sl||(sl=Object(i.a)(["\n  font-size: 14px;\n  background: ",";\n  color: white;\n  opacity: ",";\n  cursor: ",";\n\n  font-weight: bold;\n  padding: 8px 14px;\n  border-radius: 8px;\n"])),(function(e){return e.theme.success}),(function(e){return e.disabled?.4:1}),(function(e){return e.disabled?"not-allowed":"pointer"}));var Ml,Hl,Gl={startUpload:function(e){return{type:"START_UPLOAD",payload:e}},addFile:E,setFiles:v,setTags:function(e){return{type:"SET_TAGS",payload:e}},removeFile:function(e){return{type:"REMOVE_FILE",payload:e}},setTitle:function(e){return{type:"SET_TITLE",payload:e}},cancelUpload:function(e){return{type:"CANCEL_UPLOAD",payload:e}},resetTransferState:function(e){return{type:"RESET_TRANSFER_STATE",payload:e}},setDescription:N},Wl=Object(A.b)((function(e){return{uploading:e.transfer_reducer.uploading,filesToDo:e.transfer_reducer.filesToDo,title:e.transfer_reducer.title,description:e.transfer_reducer.description}}),Gl)((function(e){Object(r.useEffect)((function(){return function(){e.resetTransferState()}}),[]);var t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(""),i=Object(d.a)(l,2),s=i[0],m=i[1],u=Object(r.useState)(!1),p=Object(d.a)(u,2),f=p[0],b=p[1];Object(r.useEffect)((function(){if(0!=e.filesToDo.length){var t=!0;0===e.title.length&&(t=!1),0===e.filesToDo.length&&(t=!1),e.filesToDo.map((function(e){return e.size})).reduce((function(e,t){return e+t}))/1e6>80&&(t=!1),e.filesToDo.length>40&&(t=!1),console.log(t),b(t)}}),[e.filesToDo,e.description,e.title]),Object(r.useEffect)((function(){m("")}),[a]);var g=Object(r.useState)(0),h=Object(d.a)(g,2),x=h[0],v=h[1];return Object(r.useEffect)((function(){console.log(x),x>0?document.getElementById("drop-zone").classList.add("active"):document.getElementById("drop-zone").classList.remove("active")}),[x]),e.uploading?c.a.createElement("div",null,c.a.createElement(hl,null),c.a.createElement(Yl,null,"uploading")):c.a.createElement(Yl,{className:"mx-auto ",onDragEnter:function(e){return v(x+1)},onDragLeave:function(e){return v(x-1)}},c.a.createElement(hl,null),c.a.createElement(Kl,null,c.a.createElement("div",{className:"absolute left-0 bottom-0 top-0 flex flex-col items-center justify-center pl-3"},c.a.createElement("a",{href:"/",className:"block"},c.a.createElement("img",{src:W,alt:"",style:{height:"32px"}}))),c.a.createElement("h2",{className:"title"},"New Post")),c.a.createElement("div",{className:"main-content mt-12 flex flex-col lg:flex-row container px-12 mx-auto",style:{maxWidth:"1080px",marginBottom:"64px"}},c.a.createElement(gl,{addFile:e.addFile,filesToDo:e.filesToDo,removeFile:e.removeFile}),c.a.createElement(Sl,{addTag:function(e){if(console.log(e.keyCode),8==e.keyCode&&0==s.length){var t=Object(It.a)(a);t.splice(t.length-1,1),o(t)}if(13===e.keyCode){if(a.includes(s))return void m("");o([].concat(Object(It.a)(a),[s]))}},tagLink:function(e){console.log(e),a.includes(e)||o([].concat(Object(It.a)(a),[e]))},tags:a,setDescription:N,removeTag:function(e){var t=a.indexOf(e),n=Object(It.a)(a);n.splice(t,1),o(n)},tagString:s,setTagString:m,title_value:e.title,setTitle:e.setTitle})),c.a.createElement(Pl,{startUpload:e.startUpload,valid:f,title:e.title,files:e.filesToDo,cancelUpload:e.cancelUpload}))})),Vl=Object(f.c)(ml||(ml=Object(i.a)(["\n  from{\n    opacity:0;\n    transform: translateY(-50px);\n  }\n  to{\n    opacity:1;\n    transform: translateY(0px);\n  }\n"]))),Kl=f.b.div(ul||(ul=Object(i.a)(["\n  padding: 16px 0;\n  background: ",";\n  font-weight: 700;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  flex-direction: row;\n  color: white;\n  .title {\n    opacity: 0;\n    line-height: 1;\n    animation: "," 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6) forwards;\n    animation-delay: 0.2s;\n    font-size: 24px;\n  }\n  .subtitle {\n    opacity: 0;\n    animation: "," 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6) forwards;\n    animation-delay: 0.4s;\n    font-size: 22px;\n    color: ",";\n  }\n"])),(function(e){return e.theme.background_colored}),Vl,Vl,(function(e){return e.theme.textFaded})),Yl=f.b.div(dl||(dl=Object(i.a)(["\n  z-index: 9999;\n  max-width: 100vw;\n  box-sizing: border-box;\n  /* opacity: 0; */\n  overflow-y: hidden;\n  padding-bottom: 64px;\n  position: absolute;\n  width: 100vw;\n  /* height: 100vh; */\n  display: flex;\n  flex-direction: column;\n  top:0;\n  background: ",";\n  /* animation: "," 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6) forwards; */\n  /* margin-top: ","; */\n"])),(function(e){return e.theme.background_1}),Vl,(function(e){return e.theme.navbar_height})),Jl=n.p+"static/media/spaceship.a3fc49c0.png";var Ql=Object(f.c)(Ml||(Ml=Object(i.a)(["\n  from{\n    opacity:0;\n    transform: translateY(60px);\n  }\n  to{\n    opacity:1;\n    transform: translateY(0px);\n  }\n"]))),Xl=f.b.div(Hl||(Hl=Object(i.a)(["\n  opacity: 0;\n  animation: "," 0.2s linear forwards;\n  border-radius: 8px;\n  background: ",";\n  text-align: left;\n  width: 100%;\n  margin: 64px 32px;\n  box-shadow: 4px 4px 12px rgba(0, 0, 0, 0.6);\n  color: white;\n\n  overflow: hidden;\n  .warning {\n    border: ",";\n    color: ",";\n    border-radius: 8px;\n    padding: 3px 8px;\n  }\n  .sign-up-link{\n    border-radius: 8px;\n    box-shadow: 4px 4px 6px rgba(0,0,0,.6);\n    background: ",";\n    padding: 10px 16px;\n  }\n  header {\n    padding: 32px 50% 32px 48px;\n    background: url(",");\n    background-position: 80% -200%;\n    background-size: 30%;\n    background-repeat: no-repeat;\n    line-height: 1;\n    /* background-color: ","; */\n    .title{\n    font-size: 22px;\n\n    }\n  }\n  @media (min-width: 800px) {\n    width: 520px;\n    margin: 64px auto 0 auto;\n  }\n"])),Ql,(function(e){return"linear-gradient(to top right, ".concat(e.theme.success,", ").concat(e.theme.secondary,")")}),(function(e){return"2px solid ".concat(e.theme.warning)}),(function(e){return e.theme.warning}),(function(e){return"linear-gradient(to top right, ".concat(e.theme.tertiary,", ").concat(e.theme.success,")")}),Jl,(function(e){return e.theme.background_4}));var ql,Zl={toggleSignUpOverlay:O},$l=Object(A.b)((function(e){return{signUpOverlay:e.app_state_reducer}}),Zl)((function(e){return c.a.createElement("div",{className:"fixed px-6 pt-24 top-0 left-0 right-0 bottom-0 text-sm flex flex-col items-center",style:{zIndex:1e3}},c.a.createElement("div",{onClick:function(t){return e.toggleSignUpOverlay()},className:"overlay fixed top-0 left-0 bottom-0 right-0 w-screen h-screen z-10",style:{}}),c.a.createElement(Xl,{className:"z-20 relative flex flex-col",style:{}},c.a.createElement("header",{className:"w-full header"},c.a.createElement("div",null,c.a.createElement("div",{className:"mt-2 font-extrabold title"},"Beam me up!"),c.a.createElement("div",{className:"description mt-2 leading-5"},"Sign in or sign up to vote or favorite posts.")),c.a.createElement("div",{className:"mt-4"},c.a.createElement("a",{className:"inline-block sign-up-link font-bold",href:"/signup?redirect=".concat(window.location.pathname)},"Sign Up"),c.a.createElement("a",{className:"inline-block font-bold ml-6",href:"/login?redirect=".concat(window.location.pathname)},"Sign In")))))}));function ei(){return c.a.createElement(ti,{id:"donate-view"},c.a.createElement("div",{className:"flex flex-col items-center justify-center"},c.a.createElement("div",{className:"headline"},"What to help support this site?"),c.a.createElement("div",{className:"subheadline"},"Bitcoin helps use keep the servers running."),c.a.createElement("div",{className:"image-wrap mt-12 flex flex-col items-center "},c.a.createElement("div",{className:"text-xs font-semibold mb-6"},"Send a few Satoshis our way."),c.a.createElement("img",{src:ve,alt:"",style:{width:"120px"}}))))}var ti=f.b.div(ql||(ql=Object(i.a)(["\n    margin-top: ",";\n    padding-top: 64px;\n    color: ",";\n    .headline{\n        font-size: 32px;\n        font-weight: 900;\n    }\n    .subheadline{\n        font-size: 14px;\n        font-weight: bold;\n\n    }\n"])),(function(e){return e.theme.navbar_height}),(function(e){return e.theme.text}));var ni,ai=Object(A.b)((function(e){return{uploading:e.transfer_reducer.uploading,currentFile:e.transfer_reducer.currentFile,filesToDo:e.transfer_reducer.filesToDo,filesComplete:e.transfer_reducer.filesComplete}}))((function(e){var t=((e.filesComplete.length/(e.filesToDo.length+e.filesComplete.length)*100).toFixed(0)||0)+20;return 0==e.filesComplete.length&&0==e.filesToDo.length&&(t=100),c.a.createElement("div",{id:"transfer-indicator",className:"fixed bottom-0 left-0 right-0 flex flex-row justify-start",style:{height:"5px",zIndex:1e4,background:"black",transitionDelay:".3s",transition:"all .5s linear",opacity:"".concat(e.uploading?1:0)}},c.a.createElement("div",{className:"h-full  relative",style:{transition:"all .6s linear",background:"".concat(xe.success),width:"".concat(t,"%")}}))}));var ri,ci,oi,li,ii=Object(A.b)((function(e){return{uploading:e.transfer_reducer.uploading,currentFile:e.transfer_reducer.currentFile,filesToDo:e.transfer_reducer.filesToDo,filesComplete:e.transfer_reducer.filesComplete,transferring:e.transfer_reducer.uploading,sidebar:e.app_state_reducer.sidebar}}))((function(e){return c.a.createElement(si,{id:"transfer-status",uploading:e.uploading,className:"fixed left-0 mb-4 ml-8  text-sm font-bold flex flex-col items-center justify-center py-5",style:{width:"260px",marginLeft:"".concat(e.sidebar?"260px":0),zIndex:9999,display:"".concat(e.transferring?"block":"none")}},"Uploading ",e.filesToDo.length+e.filesComplete.length," files")})),si=f.b.div(ni||(ni=Object(i.a)(["\n  transition: all 0.2s cubic-bezier(0.68, -0.6, 0.32, 1.6);\n\n  bottom: 0;\n  bottom: ",";\n  background-color: ",";\n"])),(function(e){return e.uploading?0:"-160px"}),(function(e){return e.theme.background_2}));function mi(e){var t=Object(V.g)();return c.a.createElement(hi,{className:"flex flex-row items-center"},c.a.createElement("div",{className:"h-12 w-1 mr-3",style:{background:"".concat(xe.success)}}),c.a.createElement("div",null,c.a.createElement("i",{className:"fas fa-check-circle mr-3 fa-lg",style:{color:"".concat(xe.success)}})),c.a.createElement("div",{className:"text-left"},c.a.createElement("div",{className:"font-bold text-sm"},"Post successful!")),c.a.createElement("div",{className:"flex flex-row",style:{marginLeft:"auto"}},c.a.createElement("div",{className:"mr-2"},c.a.createElement(ui,{string:"View",action:function(n){e.clearJob(e.job.gallery_id),t.push("/beam/".concat(e.job.gallery_id))}})),c.a.createElement("div",{className:"toast-close",style:{}},c.a.createElement(ui,{icon:"fa-times",action:function(t){return e.clearJob(e.job.gallery_id)}}))))}function ui(e){return c.a.createElement(pi,{onClick:e.action},e.icon&&c.a.createElement("i",{className:"fas ".concat(e.icon," icon")}),e.string&&c.a.createElement("div",{className:"string"},e.string))}var di,pi=f.b.button(ri||(ri=Object(i.a)(["\nfont-size: 12px;\nfont-weight: 600;\n  background: ",";\n  border: ",";\n  border-radius: 8px;\n  padding: 6px 14px;\n"])),(function(e){return e.theme.background_1}),(function(e){return"1px solid ".concat(e.theme.border)})),fi={clearJob:function(e){return{type:"CLEAR_JOB",payload:e}}},bi=Object(f.c)(ci||(ci=Object(i.a)(["\n    from{\n        transform: translateY(200px);\n    }\n    to{\n        transform: translateY(0px);\n\n    }\n"]))),gi=f.b.div(oi||(oi=Object(i.a)(["\n  position: fixed;\n  bottom: 10px;\n  display: flex;\n  color: white;\n  flex-direction: row;\n  left: 0;\n  right: 0;\n  z-index: 9999;\n"]))),hi=f.b.div(li||(li=Object(i.a)(["\n  margin-right: 16px;\n  position: relative;\n  width: 280px;\n  pointer-events: auto;\n  color: ",";\n  background: ",";\n  border-radius: 8px;\n  padding: 6px;\n  border: ",";\n  box-shadow: 3px 3px 18px rgba(0, 0, 0, 0.2);\n  animation: "," 0.3s cubic-bezier(0.68, -0.6, 0.32, 1.6) forwards;\n"])),(function(e){return e.theme.text}),(function(e){return e.theme.background_1}),(function(e){return"1px solid ".concat((function(e){return e.theme.border}))}),bi),xi=Object(A.b)((function(e){return console.log(e),{completedJobs:e.transfer_reducer.completedJobs,sidebar:e.app_state_reducer.sidebar}}),fi)((function(e){return console.log(e),c.a.createElement(gi,{id:"completed-jobs",style:{pointerEvents:"none",marginLeft:"".concat(e.sidebar?260:0,"px")}},e.completedJobs.map((function(t){return c.a.createElement(mi,{key:"complete-transfer-".concat(t.gallery_id),job:t,clearJob:e.clearJob})})))})),vi=n(153);var Ei=f.b.div(di||(di=Object(i.a)(["\n  color: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.text}),(function(e){return e.theme.background_1}));var yi={signIn:h,signOut:x,setAccount:function(e){return{type:"SET_ACCOUNT",payload:e}},setCheckedIn:function(e){return{type:"SET_CHECKED_IN",payload:e}},toggleTheme:j,toggleSidebar:g,toggleSignUpOverlay:O,setNotifications:function(e){return{type:"SET_NOTIFICATIONS",payload:e}}},wi=Object(A.b)((function(e){return{createMenu:e.app_state_reducer.createMenu,sidebar:e.app_state_reducer.sidebar,account:e.account_reducer.account,signedIn:e.app_state_reducer.signedIn,uploading:e.transfer_reducer.uploading,focus:e.app_state_reducer.focusView,focusPath:e.app_state_reducer.focusPath,theme:e.app_state_reducer.theme,signUpOverlay:e.app_state_reducer.signUpOverlay}}),yi)((function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(!1),i=Object(d.a)(l,2),s=i[0],p=i[1];function b(){return(b=Object(u.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/loggedin");case 3:200===(n=t.sent).status&&e.signIn(),401===n.status&&e.signOut(),e.setCheckedIn(!0),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function g(){return(g=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/account",{credentials:"include"});case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,console.log(a),console.log(e),e.setAccount(a),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function h(){return(h=Object(u.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/notifications/get/all",{credentials:"include"});case 3:if(n=t.sent,console.log("getting notifications"),!n.ok){t.next=11;break}return t.next=8,n.json();case 8:a=t.sent,console.log(a),e.setNotifications(a);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}Object(vi.throttle)((function(){console.log("resize"),window.innerWidth<600&&e.toggleSidebar(!1)}),100),Object(r.useEffect)((function(){return function(){b.apply(this,arguments)}(),function(){g.apply(this,arguments)}(),function(){h.apply(this,arguments)}(),function(){}}),[]);var x=Ho.a[e.theme];return console.log(x),c.a.createElement(f.a,{theme:x},c.a.createElement(Ei,{scroll:a,className:"min-h-screen text-center relative",style:{}},a&&c.a.createElement(Io,{close:o}),c.a.createElement(K.a,{style:{position:"relative"}},c.a.createElement(Nt,{appMenu:s,toggleAppMenu:p,account:e.account}),e.focus&&c.a.createElement(G,null),c.a.createElement(V.d,null,c.a.createElement(V.b,{path:"/settings",render:function(){return c.a.createElement(Go,null)}}),c.a.createElement(V.b,{exact:!0,path:"/beam/:gallery_id",render:function(t){return c.a.createElement(da,Object.assign({signedIn:e.signedIn,toggleLoginOverlay:e.toggleLoginOverlay,key:t.match.params.gallery_id},t))}}),c.a.createElement(V.b,{path:"/new",render:function(){return c.a.createElement(Wl,null)}}),c.a.createElement(V.b,{path:"/donate",render:function(){return c.a.createElement(ei,null)}}),c.a.createElement(V.b,{path:"/",render:function(){return c.a.createElement(Co,{account:e.account,toggleLoginOverlay:o})}})),c.a.createElement(ai,null),c.a.createElement(ii,null),c.a.createElement(xi,null),e.signUpOverlay&&c.a.createElement($l,null))))})),ji=n(44),Oi=n(6),ki={account:{},notifications:[],follows:[]};var Ni={createPanel:!1,sidebar:!1,signedIn:!1,checkedIn:!1,focusView:!1,focusPath:"",focusGallery:"",theme:"theme_dark",navbar:!0,signUpOverlay:!1,search:"",notifications:[]};var _i=n(361),Si={uploading:!1,filesToDo:[],filesComplete:[],currentFile:0,completedJobs:[],title:"",tags:[],description:""};function Ci(e,t){var n=t.map((function(e){return e.file_id}));return t[n.indexOf(e)]}function Ti(e,t){var n=Object(It.a)(t),a=Ai(e,t);return n.splice(a,1),n}function Ai(e,t){return Object(It.a)(t).map((function(e){return e.file_id})).indexOf(e)}function Ii(e,t){var n=t[e];return n.attempts=n.attempts-1,t[e]=n,t}function Di(e){return e.id=Object(_i.a)(),e.attempts=3,e}function zi(e,t){var n=t.map((function(e){return e.gallery_id})).indexOf(e);return t.splice(n,1),Object(It.a)(t)}var Fi=Object(ji.b)({account_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ki,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACCOUNT":return Object(Oi.a)(Object(Oi.a)({},e),{},{account:t.payload});case"SET_NOTIFICATIONS":return Object(Oi.a)(Object(Oi.a)({},e),{},{notifications:t.payload});case"CLEAR_ALL_NOTIFICATIONS":return Object(Oi.a)(Object(Oi.a)({},e),{},{notifications:[]});case"CLEAR_NOTIFICATION":var n=e.notifications;return Object(Oi.a)(Object(Oi.a)({},e),{},{notifications:n});default:return e}},app_state_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ni,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH":return Object(Oi.a)(Object(Oi.a)({},e),{},{search:t.payload});case"SET_NOTIFICATIONS":return Object(Oi.a)(Object(Oi.a)({},e),{},{notifications:t.payload});case"SET_CHECKED_IN":return Object(Oi.a)(Object(Oi.a)({},e),{},{checkedIn:!0});case"TOGGLE_CREATE":return Object(Oi.a)(Object(Oi.a)({},e),{},{createPanel:!e.createPanel});case"TOGGLE_SIDEBAR":return console.log(t.payload),"boolean"==typeof t.payload?Object(Oi.a)(Object(Oi.a)({},e),{},{sidebar:t.payload}):Object(Oi.a)(Object(Oi.a)({},e),{},{sidebar:!e.sidebar});case"SIGN_IN":return Object(Oi.a)(Object(Oi.a)({},e),{},{signedIn:!0});case"SIGN_OUT":return Object(Oi.a)(Object(Oi.a)({},e),{},{signedIn:!1});case"TOGGLE_FOCUS_VIEW":return Object(Oi.a)(Object(Oi.a)({},e),{},{focusView:!e.focusView});case"TOGGLE_SIGN_UP_OVERLAY":return Object(Oi.a)(Object(Oi.a)({},e),{},{signUpOverlay:!e.signUpOverlay});case"SET_FOCUS_PATH":return Object(Oi.a)(Object(Oi.a)({},e),{},{focusPath:t.payload.focusPath,focusGallery:t.payload.focusGallery});case"TOGGLE_THEME":return console.log("toggling theme"),t.payload?(localStorage.setItem("theme",t.payload),Object(Oi.a)(Object(Oi.a)({},e),{},{theme:t.payload})):"theme_dark"===e.theme?(localStorage.setItem("theme","theme_light"),Object(Oi.a)(Object(Oi.a)({},e),{},{theme:"theme_light"})):(localStorage.setItem("theme","theme_dark"),Object(Oi.a)(Object(Oi.a)({},e),{},{theme:"theme_dark"}));case"TOGGLE_NAVBAR":return Object(Oi.a)(Object(Oi.a)({},e),{},{navbar:!e.navbar});default:return e}},transfer_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Si,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DESCRIPTION":return Object(Oi.a)(Object(Oi.a)({},e),{},{description:t.payload});case"RESET_TRANSFER_STATE":return console.log("resetting transfer state"),Object(Oi.a)({},Si);case"SET_TITLE":return Object(Oi.a)(Object(Oi.a)({},e),{},{title:t.payload});case"COMPLETE_UPLOAD":console.log(t.payload),console.log("trying to build completed jobs array");var n={gallery_id:t.payload,filesUploaded:Object(It.a)(e.filesComplete)},a=[].concat(Object(It.a)(e.completedJobs),[n]);return Object(Oi.a)(Object(Oi.a)({},Si),{},{completedJobs:a});case"FILE_FAILURE":var r=t.payload,c=Ci(r,e.filesToDo),o=Ai(r,Object(It.a)(e.filesToDo));if(c.attempts>0){console.log("retrying file "+r),c.attempts=c.attempts-1;var l=Ii(o,Object(It.a)(e.filesToDo));return Object(Oi.a)(Object(Oi.a)({},e),{},{filesToDo:l})}console.log("ran out of atttempts for file "+r);var i=Ti(r,e.filesToDo);return Object(Oi.a)(Object(Oi.a)({},e),{},{filesToDo:i});case"START_UPLOAD":return console.log("Upload state set to true"),Object(Oi.a)(Object(Oi.a)({},e),{},{uploading:!0});case"ADD_FILE":var s=Di(t.payload);return Object(Oi.a)(Object(Oi.a)({},e),{},{filesToDo:[].concat(Object(It.a)(e.filesToDo),[s])});case"REMOVE_FILE":var m=Object(It.a)(e.filesToDo),u=Ti(t.payload,m);return Object(Oi.a)(Object(Oi.a)({},e),{},{filesToDo:u});case"NEXT_FILE":if(e.currentFile<e.filesToDo.length-1)return Object(Oi.a)(Object(Oi.a)({},e),{},{currentFile:e.currentFile+1});break;case"SET_TAGS":return Object(Oi.a)(Object(Oi.a)({},e),{},{tags:t.payload});case"CLEAR_FILE":var d=t.payload,p=Object(It.a)(e.filesToDo),f=Ci(d,p),b=Ti(d,p);return Object(Oi.a)(Object(Oi.a)({},e),{},{filesToDo:b,filesComplete:[].concat(Object(It.a)(e.filesComplete),[f])});case"CANCEL_UPLOAD":return Object(Oi.a)({},Si);case"CLEAR_JOB":return console.log("clear job"),Object(Oi.a)(Object(Oi.a)({},e),{},{completedJobs:Object(It.a)(zi(t.payload,e.completedJobs))});default:return e}}}),Pi=n(64),Ri=n(86),Ui=n.n(Ri),Li=function(){function e(){Object(a.a)(this,e),this.store=null}return Object(Pi.a)(e,[{key:"setWatcher",value:function(e){var t=this;this.store=e;var n=Ui()(e.getState,"transfer_reducer.uploading");e.subscribe(n((function(n,a,r){console.log("%s changed from %s to %s",r,a,n),n&&t.startJob(e),n||t.cancelJob()})))}},{key:"cancelJob",value:function(){this.job=null}},{key:"startJob",value:function(e){this.job=new Bi(null,e)}}]),e}(),Bi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;Object(a.a)(this,e),console.log("initiating upload job"),this.title=n.getState().transfer_reducer.title,this.description=n.getState().transfer_reducer.description,console.log("transfer title is "+this.title),this.gallery_id=t,this.files=[],this.start()}return Object(Pi.a)(e,[{key:"start",value:function(){null==this.gallery_id?(console.log("starting job at create step"),this.createNewPost()):(console.log("starting job at append step"),this.goToNextStep())}},{key:"getNextFile",value:function(){var e=Hi.getState(),t=e.transfer_reducer.filesToDo[0];return console.log(e),t}},{key:"getTags",value:function(){return Hi.getState().transfer_reducer.tags}},{key:"createNewPost",value:function(){var e=Object(u.a)(m.a.mark((function e(){var t,n,a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("creating new post"),t=this.getNextFile(),n=this.getTags(),Hi.dispatch(b()),e.prev=4,(a=new FormData).set("title",this.title),a.set("file",t),a.set("tags",JSON.stringify(n)),a.set("description",this.description),"/api/upload/create",e.next=13,fetch("/api/upload/create",{credentials:"include",method:"POST",body:a});case 13:if(200!==(r=e.sent).status){e.next=22;break}return console.log("post created"),e.next=18,r.json();case 18:c=e.sent,console.log("new gallery id "+c.gallery_id),this.gallery_id=c.gallery_id,this.goToNextStep(this.gallery_id);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),console.log(e.t0);case 27:case"end":return e.stop()}}),e,this,[[4,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"goToNextStep",value:function(){var e=Object(u.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t,Hi.dispatch(y()),!(n=this.getNextFile())){e.next=7;break}return console.log(n),e.next=6,this.addMedia(n);case 6:return e.abrupt("return");case 7:this.onComplete(this.gallery_id);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addMedia",value:function(){var e=Object(u.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ADDING FILE"),console.log(t),(n=new FormData).append("file",t),e.prev=4,a="/api/beam/edit/".concat(this.gallery_id,"/images/add"),e.next=8,fetch(a,{credentials:"include",method:"POST",body:n});case 8:200==e.sent.status&&(console.log("file upload success, now clearing"),console.log(t.id),this.goToNextStep(t.id)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),t.id;case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"clearFile",value:function(e){y(e)}},{key:"onComplete",value:function(e){console.log("Transfer job complete"),Hi.dispatch({type:"COMPLETE_UPLOAD",payload:e})}}]),e}();var Mi=Object(ji.c)(Fi),Hi=(new Li(Mi.getState),Mi);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Gi=window.localStorage,Wi=Gi.getItem("theme");console.log("getting app state from storage"),Wi?Hi.dispatch(j(Wi)):(Gi.setItem("theme","theme_light"),Hi.dispatch(j("theme_light"))),(new Li).setWatcher(Hi),l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(A.a,{store:Hi},c.a.createElement(wi,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t){e.exports={theme_dark:{success:"#3498db",error:"#e74c3c",secondary:"#2ecc71",tertiary:"#9b59b6",warning:"#f1c40f",text:"rgb(255,255,255)",text_light:"rgb(200,200,200)",gradient_1:"linear-gradient(to top right,#3498db22,#2ecc7122)",icons:"rgba(240,240,240)",icons_2:"rgba(210,210,210)",background_colored:"#143c57",background_colored_2:"#80a6bf",border:"rgba(40,40,40)",textFaded:"rgb(170,170,170)",background_1:"rgb(20,20,20)",background_2:"rgba(32,32,32)",background_5:"rgba(38,38,38)",background_3:"rgba(45,45,45)",background_4:"rgba(66,66,66)",backgroundLight:"rgba(90,90,90)",backgroundLightest:"rgba(90,90,90, .3)",navbar_height:"64px",animation_curve:"cubic-bezier(0.68, -0.6, 0.32, 1.6)"},theme_light:{success:"#3498db",error:"#e74c3c",secondary:"#2ecc71",tertiary:"#9b59b6",warning:"#f1c40f",text:"rgb(0,0,0)",text_light:"rgb(60,60,60)",gradient_1:"linear-gradient(to top right,#3498db22,#2ecc7122)",icons:"rgba(90,90,90)",icons_2:"rgba(144,144,144)",background_colored:"#143c57",background_colored_2:"#80a6bf",border:"rgba(230,230,230)",textFaded:"rgb(170,170,170)",background_1:"rgb(255,255,255)",background_2:"rgba(248,248,248)",background_3:"rgba(238,238,238)",background_4:"rgba(210,210,210)",backgroundLight:"rgba(90,90,90)",backgroundLightest:"rgba(90,90,90, .3)",navbar_height:"64px",animation_curve:"cubic-bezier(0.68, -0.6, 0.32, 1.6)"}}}},[[357,1,2]]]);
//# sourceMappingURL=main.879ed762.chunk.js.map